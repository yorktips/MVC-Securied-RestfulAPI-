window.Modernizr = function (M, O, Q) { function T(b) { ae.cssText = b } function V(c, d) { return T(al.join(c + ";") + (d || "")) } function X(c, d) { return typeof c === d } function Z(c, d) { return !!~("" + c).indexOf(d) } function ab(c, f) { for (var g in c) { var h = c[g]; if (!Z(h, "-") && ae[h] !== Q) { return f == "pfx" ? h : !0 } } return !1 } function ad(c, g, h) { for (var i in c) { var j = g[c[i]]; if (j !== Q) { return h === !1 ? c[i] : X(j, "function") ? j.bind(h || g) : j } } return !1 } function af(f, g, h) { var i = f.charAt(0).toUpperCase() + f.slice(1), j = (f + " " + an.join(i + " ") + i).split(" "); return X(g, "string") || X(g, "undefined") ? ab(j, g) : (j = (f + " " + ao.join(i + " ") + i).split(" "), ad(j, g, h)) } function ah() { U.input = function (a) { for (var b = 0, f = a.length; b < f; b++) { at[a[b]] = a[b] in ag } return at.list && (at.list = !!O.createElement("datalist") && !!M.HTMLDataListElement), at }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")), U.inputtypes = function (b) { for (var c = 0, g, j, k, l = b.length; c < l; c++) { ag.setAttribute("type", j = b[c]), g = ag.type !== "text", g && (ag.value = ai, ag.style.cssText = "position:absolute;visibility:hidden;", /^range$/.test(j) && ag.style.WebkitAppearance !== Q ? (Y.appendChild(ag), k = O.defaultView, g = k.getComputedStyle && k.getComputedStyle(ag, null).WebkitAppearance !== "textfield" && ag.offsetHeight !== 0, Y.removeChild(ag)) : /^(search|tel)$/.test(j) || (/^(url|email)$/.test(j) ? g = ag.checkValidity && ag.checkValidity() === !1 : g = ag.value != ai)), ar[b[c]] = !!g } return ar }("search tel url email datetime date month week time datetime-local number range color".split(" ")) } var S = "2.6.2", U = {}, W = !0, Y = O.documentElement, aa = "modernizr", ac = O.createElement(aa), ae = ac.style, ag = O.createElement("input"), ai = ":)", ak = {}.toString, al = " -webkit- -moz- -o- -ms- ".split(" "), am = "Webkit Moz O ms", an = am.split(" "), ao = am.toLowerCase().split(" "), ap = { svg: "http://www.w3.org/2000/svg" }, aq = {}, ar = {}, at = {}, au = [], av = au.slice, aw, ax = function (b, g, h, o) { var p, q, r, s, t = O.createElement("div"), u = O.body, v = u || O.createElement("body"); if (parseInt(h, 10)) { while (h--) { r = O.createElement("div"), r.id = o ? o[h] : aa + (h + 1), t.appendChild(r) } } return p = ["&#173;", '<style id="s', aa, '">', b, "</style>"].join(""), t.id = aa, (u ? t : v).innerHTML += p, v.appendChild(t), u || (v.style.background = "", v.style.overflow = "hidden", s = Y.style.overflow, Y.style.overflow = "hidden", Y.appendChild(v)), q = g(t, b), u ? t.parentNode.removeChild(t) : (v.parentNode.removeChild(v), Y.style.overflow = s), !!q }, ay = function (a) { var e = M.matchMedia || M.msMatchMedia; if (e) { return e(a).matches } var f; return ax("@media " + a + " { #" + aa + " { position: absolute; } }", function (c) { f = (M.getComputedStyle ? getComputedStyle(c, null) : c.currentStyle)["position"] == "absolute" }), f }, N = function () { function c(a, g) { g = g || O.createElement(b[a] || "div"), a = "on" + a; var h = a in g; return h || (g.setAttribute || (g = O.createElement("div")), g.setAttribute && g.removeAttribute && (g.setAttribute(a, ""), h = X(g[a], "function"), X(g[a], "undefined") || (g[a] = Q), g.removeAttribute(a))), g = null, h } var b = { select: "input", change: "input", submit: "form", reset: "form", error: "img", load: "img", abort: "img" }; return c }(), P = {}.hasOwnProperty, R; !X(P, "undefined") && !X(P.call, "undefined") ? R = function (c, d) { return P.call(c, d) } : R = function (c, d) { return d in c && X(c.constructor.prototype[d], "undefined") }, Function.prototype.bind || (Function.prototype.bind = function (a) { var f = this; if (typeof f != "function") { throw new TypeError } var g = av.call(arguments, 1), h = function () { if (this instanceof h) { var b = function () { }; b.prototype = f.prototype; var c = new b, d = f.apply(c, g.concat(av.call(arguments))); return Object(d) === d ? d : c } return f.apply(a, g.concat(av.call(arguments))) }; return h }), aq.flexbox = function () { return af("flexWrap") }, aq.canvas = function () { var b = O.createElement("canvas"); return !!b.getContext && !!b.getContext("2d") }, aq.canvastext = function () { return !!U.canvas && !!X(O.createElement("canvas").getContext("2d").fillText, "function") }, aq.webgl = function () { return !!M.WebGLRenderingContext }, aq.touch = function () { var a; return "ontouchstart" in M || M.DocumentTouch && O instanceof DocumentTouch ? a = !0 : ax(["@media (", al.join("touch-enabled),("), aa, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function (b) { a = b.offsetTop === 9 }), a }, aq.geolocation = function () { return "geolocation" in navigator }, aq.postmessage = function () { return !!M.postMessage }, aq.websqldatabase = function () { return !!M.openDatabase }, aq.indexedDB = function () { return !!af("indexedDB", M) }, aq.hashchange = function () { return N("hashchange", M) && (O.documentMode === Q || O.documentMode > 7) }, aq.history = function () { return !!M.history && !!history.pushState }, aq.draganddrop = function () { var b = O.createElement("div"); return "draggable" in b || "ondragstart" in b && "ondrop" in b }, aq.websockets = function () { return "WebSocket" in M || "MozWebSocket" in M }, aq.rgba = function () { return T("background-color:rgba(150,255,150,.5)"), Z(ae.backgroundColor, "rgba") }, aq.hsla = function () { return T("background-color:hsla(120,40%,100%,.5)"), Z(ae.backgroundColor, "rgba") || Z(ae.backgroundColor, "hsla") }, aq.multiplebgs = function () { return T("background:url(https://),url(https://),red url(https://)"), /(url\s*\(.*?){3}/.test(ae.background) }, aq.backgroundsize = function () { return af("backgroundSize") }, aq.borderimage = function () { return af("borderImage") }, aq.borderradius = function () { return af("borderRadius") }, aq.boxshadow = function () { return af("boxShadow") }, aq.textshadow = function () { return O.createElement("div").style.textShadow === "" }, aq.opacity = function () { return V("opacity:.55"), /^0.55$/.test(ae.opacity) }, aq.cssanimations = function () { return af("animationName") }, aq.csscolumns = function () { return af("columnCount") }, aq.cssgradients = function () { var d = "background-image:", e = "gradient(linear,left top,right bottom,from(#9f9),to(white));", f = "linear-gradient(left top,#9f9, white);"; return T((d + "-webkit- ".split(" ").join(e + d) + al.join(f + d)).slice(0, -d.length)), Z(ae.backgroundImage, "gradient") }, aq.cssreflections = function () { return af("boxReflect") }, aq.csstransforms = function () { return !!af("transform") }, aq.csstransforms3d = function () { var b = !!af("perspective"); return b && "webkitPerspective" in Y.style && ax("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function (a, d) { b = a.offsetLeft === 9 && a.offsetHeight === 3 }), b }, aq.csstransitions = function () { return af("transition") }, aq.fontface = function () { var b; return ax('@font-face {font-family:"font";src:url("https://")}', function (a, h) { var i = O.getElementById("smodernizr"), j = i.sheet || i.styleSheet, k = j ? j.cssRules && j.cssRules[0] ? j.cssRules[0].cssText : j.cssText || "" : ""; b = /src/i.test(k) && k.indexOf(h.split(" ")[0]) === 0 }), b }, aq.generatedcontent = function () { var b; return ax(["#", aa, "{font:0/0 a}#", aa, ':after{content:"', ai, '";visibility:hidden;font:3px/1 a}'].join(""), function (a) { b = a.offsetHeight >= 3 }), b }, aq.video = function () { var b = O.createElement("video"), e = !1; try { if (e = !!b.canPlayType) { e = new Boolean(e), e.ogg = b.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), e.h264 = b.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), e.webm = b.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "") } } catch (f) { } return e }, aq.audio = function () { var b = O.createElement("audio"), e = !1; try { if (e = !!b.canPlayType) { e = new Boolean(e), e.ogg = b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), e.mp3 = b.canPlayType("audio/mpeg;").replace(/^no$/, ""), e.wav = b.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), e.m4a = (b.canPlayType("audio/x-m4a;") || b.canPlayType("audio/aac;")).replace(/^no$/, "") } } catch (f) { } return e }, aq.localstorage = function () { try { return localStorage.setItem(aa, aa), localStorage.removeItem(aa), !0 } catch (b) { return !1 } }, aq.sessionstorage = function () { try { return sessionStorage.setItem(aa, aa), sessionStorage.removeItem(aa), !0 } catch (b) { return !1 } }, aq.webworkers = function () { return !!M.Worker }, aq.applicationcache = function () { return !!M.applicationCache }, aq.svg = function () { return !!O.createElementNS && !!O.createElementNS(ap.svg, "svg").createSVGRect }, aq.inlinesvg = function () { var b = O.createElement("div"); return b.innerHTML = "<svg/>", (b.firstChild && b.firstChild.namespaceURI) == ap.svg }, aq.smil = function () { return !!O.createElementNS && /SVGAnimate/.test(ak.call(O.createElementNS(ap.svg, "animate"))) }, aq.svgclippaths = function () { return !!O.createElementNS && /SVGClipPath/.test(ak.call(O.createElementNS(ap.svg, "clipPath"))) }; for (var aj in aq) { R(aq, aj) && (aw = aj.toLowerCase(), U[aw] = aq[aj](), au.push((U[aw] ? "" : "no-") + aw)) } return U.input || ah(), U.addTest = function (c, e) { if (typeof c == "object") { for (var f in c) { R(c, f) && U.addTest(f, c[f]) } } else { c = c.toLowerCase(); if (U[c] !== Q) { return U } e = typeof e == "function" ? e() : e, typeof W != "undefined" && W && (Y.className += " " + (e ? "" : "no-") + c), U[c] = e } return U }, T(""), ac = ag = null, function (s, t) { function C(e, f) { var g = e.createElement("p"), h = e.getElementsByTagName("head")[0] || e.documentElement; return g.innerHTML = "x<style>" + f + "</style>", h.insertBefore(g.lastChild, h.firstChild) } function D() { var b = J.elements; return typeof b == "string" ? b.split(" ") : b } function E(c) { var d = A[c[y]]; return d || (d = {}, z++, c[y] = z, A[z] = d), d } function F(b, d, e) { d || (d = t); if (B) { return d.createElement(b) } e || (e = E(d)); var h; return e.cache[b] ? h = e.cache[b].cloneNode() : w.test(b) ? h = (e.cache[b] = e.createElem(b)).cloneNode() : h = e.createElem(b), h.canHaveChildren && !v.test(b) ? e.frag.appendChild(h) : h } function G(b, h) { b || (b = t); if (B) { return b.createDocumentFragment() } h = h || E(b); var i = h.frag.cloneNode(), j = 0, k = D(), l = k.length; for (; j < l; j++) { i.createElement(k[j]) } return i } function H(c, d) { d.cache || (d.cache = {}, d.createElem = c.createElement, d.createFrag = c.createDocumentFragment, d.frag = d.createFrag()), c.createElement = function (a) { return J.shivMethods ? F(a, c, d) : d.createElem(a) }, c.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + D().join().replace(/\w+/g, function (b) { return d.createElem(b), d.frag.createElement(b), 'c("' + b + '")' }) + ");return n}")(J, d.frag) } function I(b) { b || (b = t); var d = E(b); return J.shivCSS && !x && !d.hasCSS && (d.hasCSS = !!C(b, "article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")), B || H(b, d), b } var u = s.html5 || {}, v = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i, w = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i, x, y = "_html5shiv", z = 0, A = {}, B; (function () { try { var b = t.createElement("a"); b.innerHTML = "<xyz></xyz>", x = "hidden" in b, B = b.childNodes.length == 1 || function () { t.createElement("a"); var c = t.createDocumentFragment(); return typeof c.cloneNode == "undefined" || typeof c.createDocumentFragment == "undefined" || typeof c.createElement == "undefined" }() } catch (d) { x = !0, B = !0 } })(); var J = { elements: u.elements || "abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video", shivCSS: u.shivCSS !== !1, supportsUnknownElements: B, shivMethods: u.shivMethods !== !1, type: "default", shivDocument: I, createElement: F, createDocumentFragment: G }; s.html5 = J, I(t) }(this, O), U._version = S, U._prefixes = al, U._domPrefixes = ao, U._cssomPrefixes = an, U.mq = ay, U.hasEvent = N, U.testProp = function (b) { return ab([b]) }, U.testAllProps = af, U.testStyles = ax, U.prefixed = function (d, e, f) { return e ? af(d, e, f) : af(d, "pfx") }, Y.className = Y.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (W ? " js " + au.join(" ") : ""), U }(this, this.document), function (C, E, G) { function H(b) { return "[object Function]" == S.call(b) } function I(b) { return "string" == typeof b } function J() { } function K(b) { return !b || "loaded" == b || "complete" == b || "uninitialized" == b } function L() { var b = T.shift(); U = 1, b ? b.t ? Q(function () { ("c" == b.t ? F.injectCss : F.injectJs)(b.s, 0, b.a, b.x, b.e, 1) }, 0) : (b(), L()) : U = 0 } function M(b, g, h, m, n, p, q) { function s(a) { if (!v && K(t.readyState) && (x.r = v = 1, !U && L(), t.onload = t.onreadystatechange = null, a)) { "img" != b && Q(function () { X.removeChild(t) }, 50); for (var c in ac[g]) { ac[g].hasOwnProperty(c) && ac[g][c].onload() } } } var q = q || F.errorTimeout, t = E.createElement(b), v = 0, w = 0, x = { t: h, s: g, e: n, a: p, x: q }; 1 === ac[g] && (w = 1, ac[g] = []), "object" == b ? t.data = g : (t.src = g, t.type = b), t.width = t.height = "0", t.onerror = t.onload = t.onreadystatechange = function () { s.call(this, w) }, T.splice(m, 0, x), "img" != b && (w || 2 === ac[g] ? (X.insertBefore(t, W ? null : R), Q(s, q)) : ac[g].push(t)) } function N(e, g, h, i, j) { return U = 0, g = g || "j", I(e) ? M("c" == g ? Z : Y, e, g, this.i++, h, i, j) : (T.splice(this.i++, 0, e), 1 == T.length && L()), this } function O() { var b = F; return b.loader = { load: N, i: 0 }, b } var P = E.documentElement, Q = C.setTimeout, R = E.getElementsByTagName("script")[0], S = {}.toString, T = [], U = 0, V = "MozAppearance" in P.style, W = V && !!E.createRange().compareNode, X = W ? P : R.parentNode, P = C.opera && "[object Opera]" == S.call(C.opera), P = !!E.attachEvent && !P, Y = V ? "object" : P ? "script" : "img", Z = P ? "script" : Y, aa = Array.isArray || function (b) { return "[object Array]" == S.call(b) }, ab = [], ac = {}, ad = { timeout: function (c, d) { return d.length && (c.timeout = d[0]), c } }, D, F; F = function (c) { function d(h) { var h = h.split("!"), i = ab.length, j = h.pop(), l = h.length, j = { url: j, origUrl: j, prefixes: h }, o, p, q; for (p = 0; p < l; p++) { q = h[p].split("="), (o = ad[q.shift()]) && (j = o(j, q)) } for (p = 0; p < i; p++) { j = ab[p](j) } return j } function e(b, l, o, p, q) { var r = d(b), s = r.autoCallback; r.url.split(".").pop().split("?").shift(), r.bypass || (l && (l = H(l) ? l : l[b] || l[p] || l[b.split("/").pop().split("?")[0]]), r.instead ? r.instead(b, l, o, p, q) : (ac[r.url] ? r.noexec = !0 : ac[r.url] = 1, o.load(r.url, r.forceCSS || !r.forceJS && "css" == r.url.split(".").pop().split("?").shift() ? "c" : G, r.noexec, r.attrs, r.timeout), (H(l) || H(s)) && o.load(function () { O(), l && l(r.origUrl, q, p), s && s(r.origUrl, q, p), ac[r.url] = 2 }))) } function f(g, o) { function p(b, h) { if (b) { if (I(b)) { h || (s = function () { var i = [].slice.call(arguments); t.apply(this, i), u() }), e(b, s, o, 0, q) } else { if (Object(b) === b) { for (w in v = function () { var a = 0, i; for (i in b) { b.hasOwnProperty(i) && a++ } return a }(), b) { b.hasOwnProperty(w) && (!h && !--v && (H(s) ? s = function () { var i = [].slice.call(arguments); t.apply(this, i), u() } : s[w] = function (i) { return function () { var a = [].slice.call(arguments); i && i.apply(this, a), u() } }(t[w])), e(b[w], s, o, w, q)) } } } } else { !h && u() } } var q = !!g.test, r = g.load || g.both, s = g.callback || J, t = s, u = g.complete || J, v, w; p(q ? g.yep : g.nope, !!r), r && p(r) } var k, m, n = this.yepnope.loader; if (I(c)) { e(c, 0, n, 0) } else { if (aa(c)) { for (k = 0; k < c.length; k++) { m = c[k], I(m) ? e(m, 0, n, 0) : aa(m) ? F(m) : Object(m) === m && f(m, n) } } else { Object(c) === c && f(c, n) } } }, F.addPrefix = function (c, d) { ad[c] = d }, F.addFilter = function (b) { ab.push(b) }, F.errorTimeout = 10000, null == E.readyState && E.addEventListener && (E.readyState = "loading", E.addEventListener("DOMContentLoaded", D = function () { E.removeEventListener("DOMContentLoaded", D, 0), E.readyState = "complete" }, 0)), C.yepnope = O(), C.yepnope.executeStack = L, C.yepnope.injectJs = function (b, f, g, h, m, n) { var p = E.createElement("script"), q, r, h = h || F.errorTimeout; p.src = b; for (r in g) { p.setAttribute(r, g[r]) } f = n ? L : f || J, p.onreadystatechange = p.onload = function () { !q && K(p.readyState) && (q = 1, f(), p.onload = p.onreadystatechange = null) }, Q(function () { q || (q = 1, f(1)) }, h), m ? p.onload() : R.parentNode.insertBefore(p, R) }, C.yepnope.injectCss = function (b, f, h, k, l, m) { var k = E.createElement("link"), n, f = m ? L : f || J; k.href = b, k.rel = "stylesheet", k.type = "text/css"; for (n in h) { k.setAttribute(n, h[n]) } l || (R.parentNode.insertBefore(k, R), Q(f, 0)) } }(this, document), Modernizr.load = function () { yepnope.apply(window, [].slice.call(arguments, 0)) };
function Visitor(g, J) { if (!g) { throw "Visitor requires Adobe Marketing Cloud Org ID" } var b = this; b.version = "1.3.2"; var d = window, C = d.Visitor; d.s_c_in || (d.s_c_il = [], d.s_c_in = 0); b._c = "Visitor"; b._il = d.s_c_il; b._in = d.s_c_in; b._il[b._in] = b; d.s_c_in++; var O = d.document, f = d.O; f || (f = null); var e = d.P; e || (e = !0); var H = d.N; H || (H = !1); b.C = function (i) { var m = 0, k, n; if (i) { for (k = 0; k < i.length; k++) { n = i.charCodeAt(k), m = (m << 5) - m + n, m &= m } } return m }; b.m = function (k) { var n = "0123456789", m = "", o = "", p, q = 8, r = 10, s = 10; if (1 == k) { n += "ABCDEF"; for (k = 0; 16 > k; k++) { p = Math.floor(Math.random() * q), m += n.substring(p, p + 1), p = Math.floor(Math.random() * q), o += n.substring(p, p + 1), q = 16 } return m + "-" + o } for (k = 0; 19 > k; k++) { p = Math.floor(Math.random() * r), m += n.substring(p, p + 1), 0 == k && 9 == p ? r = 3 : (1 == k || 2 == k) && 10 != r && 2 > p ? r = 10 : 2 < k && (r = 10), p = Math.floor(Math.random() * s), o += n.substring(p, p + 1), 0 == k && 9 == p ? s = 3 : (1 == k || 2 == k) && 10 != s && 2 > p ? s = 10 : 2 < k && (s = 10) } return m + o }; b.I = function () { var i; !i && d.location && (i = d.location.hostname); if (i) { if (/^[0-9.]+$/.test(i)) { i = "" } else { var m = i.split("."), k = m.length - 1, n = k - 1; 1 < k && 2 >= m[k].length && (2 == m[k - 1].length || 0 > ",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,nd,".indexOf("," + m[k] + ",")) && n--; if (0 < n) { for (i = ""; k >= n;) { i = m[k] + (i ? "." : "") + i, k-- } } } } return i }; b.cookieRead = function (i) { var i = encodeURIComponent(i), m = (";" + O.cookie).split(" ").join(";"), k = m.indexOf(";" + i + "="), n = 0 > k ? k : m.indexOf(";", k + 1); return 0 > k ? "" : decodeURIComponent(m.substring(k + 2 + i.length, 0 > n ? m.length : n)) }; b.cookieWrite = function (k, i, a) { var m = b.cookieLifetime, n, i = "" + i, m = m ? ("" + m).toUpperCase() : ""; a && "SESSION" != m && "NONE" != m ? (n = "" != i ? parseInt(m ? m : 0) : -60) ? (a = new Date, a.setTime(a.getTime() + 1000 * n)) : 1 == a && (a = new Date, n = a.getYear(), a.setYear(n + 2 + (1900 > n ? 1900 : 0))) : a = 0; return k && "NONE" != m ? (O.cookie = encodeURIComponent(k) + "=" + encodeURIComponent(i) + "; path=/;" + (a ? " expires=" + a.toGMTString() + ";" : "") + (b.cookieDomain ? " domain=" + b.cookieDomain + ";" : ""), b.cookieRead(k) == i) : 0 }; b.e = f; b.w = function (i, m) { try { "function" == typeof i ? i.apply(d, m) : i[1].apply(i[0], m) } catch (k) { } }; b.L = function (i, a) { a && (b.e == f && (b.e = {}), void 0 == b.e[i] && (b.e[i] = []), b.e[i].push(a)) }; b.l = function (k, i) { if (b.e != f) { var a = b.e[k]; if (a) { for (; 0 < a.length;) { b.w(a.shift(), i) } } } }; b.j = f; b.J = function (k, i, a) { !i && a && a(); var m = O.getElementsByTagName("HEAD")[0], n = O.createElement("SCRIPT"); n.type = "text/javascript"; n.setAttribute("async", "async"); n.src = i; m.firstChild ? m.insertBefore(n, m.firstChild) : m.appendChild(n); a && (b.j == f && (b.j = {}), b.j[k] = setTimeout(a, b.loadTimeout)) }; b.H = function (a) { b.j != f && b.j[a] && (clearTimeout(b.j[a]), b.j[a] = 0) }; b.D = H; b.F = H; b.isAllowed = function () { if (!b.D && (b.D = e, b.cookieRead(b.cookieName) || b.cookieWrite(b.cookieName, "T", 1))) { b.F = e } return b.F }; b.a = f; b.c = f; var M = b.V; M || (M = "MC"); var D = b.Y; D || (D = "MCMID"); var N = b.X; N || (N = "MCCIDH"); var P = b.W; P || (P = "MCAS"); var K = b.T; K || (K = "A"); var B = b.Q; B || (B = "MCAID"); var L = b.U; L || (L = "AAM"); var I = b.S; I || (I = "MCAAMLH"); var F = b.R; F || (F = "MCAAMB"); var G = b.Z; G || (G = "NONE"); b.t = 0; b.B = function () { if (!b.t) { var i = b.version; b.audienceManagerServer && (i += "|" + b.audienceManagerServer); b.audienceManagerServerSecure && (i += "|" + b.audienceManagerServerSecure); if (b.audienceManagerCustomerIDDPIDs) { for (var a in b.audienceManagerCustomerIDDPIDs) { !Object.prototype[a] && b.audienceManagerCustomerIDDPIDs[a] && (i += a + "=" + b.audienceManagerCustomerIDDPIDs[a]) } } b.t = b.C(i) } return b.t }; b.G = H; b.h = function () { if (!b.G) { b.G = e; var k = b.B(), i = H, a = b.cookieRead(b.cookieName), m, n, o, p = new Date; b.a == f && (b.a = {}); if (a && "T" != a) { a = a.split("|"); a[0].match(/^[\-0-9]+$/) && (parseInt(a[0]) != k && (i = e), a.shift()); 1 == a.length % 2 && a.pop(); for (k = 0; k < a.length; k += 2) { m = a[k].split("-"), n = m[0], o = a[k + 1], m = 1 < m.length ? parseInt(m[1]) : 0, i && (n == N && (o = ""), 0 < m && (m = p.getTime() / 1000 - 60)), n && o && (b.d(n, o, 1), 0 < m && (b.a["expire" + n] = m, p.getTime() >= 1000 * m && (b.c || (b.c = {}), b.c[n] = e))) } } if (!b.b(B) && (a = b.cookieRead("s_vi"))) { a = a.split("|"), 1 < a.length && 0 <= a[0].indexOf("v1") && (o = a[1], k = o.indexOf("["), 0 <= k && (o = o.substring(0, k)), o && o.match(/^[0-9a-fA-F\-]+$/) && b.d(B, o)) } } }; b.M = function () { var k = b.B(), i, a; for (i in b.a) { !Object.prototype[i] && b.a[i] && "expire" != i.substring(0, 6) && (a = b.a[i], k += (k ? "|" : "") + i + (b.a["expire" + i] ? "-" + b.a["expire" + i] : "") + "|" + a) } b.cookieWrite(b.cookieName, k, 1) }; b.b = function (i, a) { return b.a != f && (a || !b.c || !b.c[i]) ? b.a[i] : f }; b.d = function (k, i, a) { b.a == f && (b.a = {}); b.a[k] = i; a || b.M() }; b.p = function (k, i) { var a = new Date; a.setTime(a.getTime() + 1000 * i); b.a == f && (b.a = {}); b.a["expire" + k] = Math.floor(a.getTime() / 1000); 0 > i && (b.c || (b.c = {}), b.c[k] = e) }; b.A = function (i) { if (i && ("object" == typeof i && (i = i.d_mid ? i.d_mid : i.visitorID ? i.visitorID : i.id ? i.id : i.uuid ? i.uuid : "" + i), i && (i = i.toUpperCase(), "NOTARGET" == i && (i = G)), !i || i != G && !i.match(/^[0-9a-fA-F\-]+$/))) { i = "" } return i }; b.i = function (k, i) { b.H(k); b.g != f && (b.g[k] = H); if (k == M) { var a = b.b(D); if (!a) { a = "object" == typeof i && i.mid ? i.mid : b.A(i); if (!a) { if (b.r) { b.getAnalyticsVisitorID(null, !1, !0); return } a = b.m() } b.d(D, a) } if (!a || a == G) { a = "" } "object" == typeof i && ((i.d_region || i.dcs_region || i.d_blob || i.blob) && b.i(L, i), b.r && i.mid && b.i(K, { id: i.id })); b.l(D, [a]) } if (k == L && "object" == typeof i) { a = 604800; void 0 != i.id_sync_ttl && i.id_sync_ttl && (a = parseInt(i.id_sync_ttl)); var m = b.b(I); m || ((m = i.d_region) || (m = i.dcs_region), m && (b.p(I, a), b.d(I, m))); m || (m = ""); b.l(I, [m]); m = b.b(F); if (i.d_blob || i.blob) { (m = i.d_blob) || (m = i.blob), b.p(F, a), b.d(F, m) } m || (m = ""); b.l(F, [m]); !i.error_msg && b.o && b.d(N, b.o) } if (k == K) { a = b.b(B); a || ((a = b.A(i)) ? b.p(F, -1) : a = G, b.d(B, a)); if (!a || a == G) { a = "" } b.l(B, [a]) } }; b.g = f; b.n = function (k, i, a, m) { var n = "", o; if (b.isAllowed() && (b.h(), n = b.b(k), !n && (k == D ? o = M : k == I || k == F ? o = L : k == B && (o = K), o))) { if (i && (b.g == f || !b.g[o])) { b.g == f && (b.g = {}), b.g[o] = e, b.J(o, i, function () { if (!b.b(k)) { var p = ""; k == D && (p = b.m()); b.i(o, p) } }) } b.L(k, a); i || b.i(o, { id: G }); return "" } if ((k == D || k == B) && n == G) { n = "", m = e } a && m && b.w(a, [n]); return n }; b._setMarketingCloudFields = function (a) { b.h(); b.i(M, a) }; b.setMarketingCloudVisitorID = function (a) { b._setMarketingCloudFields(a) }; b.r = H; b.getMarketingCloudVisitorID = function (i, a) { return b.isAllowed() ? (b.marketingCloudServer && 0 > b.marketingCloudServer.indexOf(".demdex.net") && (b.r = e), b.n(D, b.s("_setMarketingCloudFields"), i, a)) : "" }; b.K = function () { b.getAudienceManagerBlob() }; b.f = {}; b.z = H; b.o = ""; b.setCustomerIDs = function (k) { b.f = k; if (b.isAllowed()) { b.h(); var k = b.b(N), i = "", a, m; k || (k = 0); for (a in b.f) { m = b.f[a], !Object.prototype[a] && m && (i += (i ? "|" : "") + a + "|" + m) } b.o = b.C(i); b.o != k && (b.z = e, b.K()) } }; b.getCustomerIDs = function () { return b.f }; b._setAnalyticsFields = function (a) { b.h(); b.i(K, a) }; b.setAnalyticsVisitorID = function (a) { b._setAnalyticsFields(a) }; b.getAnalyticsVisitorID = function (k, i, a) { if (b.isAllowed()) { var m = ""; a || (m = b.getMarketingCloudVisitorID(function () { b.getAnalyticsVisitorID(k, e) })); if (m || a) { var n = a ? b.marketingCloudServer : b.trackingServer, o = ""; b.loadSSL && (a ? b.marketingCloudServerSecure && (n = b.marketingCloudServerSecure) : b.trackingServerSecure && (n = b.trackingServerSecure)); n && (o = "http" + (b.loadSSL ? "s" : "") + "://" + n + "/id?callback=s_c_il%5B" + b._in + "%5D._set" + (a ? "MarketingCloud" : "Analytics") + "Fields&mcorgid=" + encodeURIComponent(b.marketingCloudOrgID) + (m ? "&mid=" + m : "")); return b.n(a ? D : B, o, k, i) } } return "" }; b._setAudienceManagerFields = function (a) { b.h(); b.i(L, a) }; b.s = function (m) { var i = b.audienceManagerServer, a = "", n = b.b(D), o = b.b(F, e), p = b.b(B), p = p && p != G ? "&d_cid_ic=AVID%01" + encodeURIComponent(p) : "", q = "", r, s; b.loadSSL && b.audienceManagerServerSecure && (i = b.audienceManagerServerSecure); if (i) { if (b.f) { for (r in b.f) { if (!Object.prototype[r] && (a = b.f[r])) { p += "&d_cid_ic=" + encodeURIComponent(r) + "%01" + encodeURIComponent(a), b.audienceManagerCustomerIDDPIDs && (s = b.audienceManagerCustomerIDDPIDs[r]) && (q += "&d_cid=" + s + "%01" + encodeURIComponent(a)) } } } m || (m = "_setAudienceManagerFields"); a = "http" + (b.loadSSL ? "s" : "") + "://" + i + "/id?d_rtbd=json&d_ver=2" + (!n && b.r ? "&d_verify=1" : "") + "&d_orgid=" + encodeURIComponent(b.marketingCloudOrgID) + (n ? "&d_mid=" + n : "") + (o ? "&d_blob=" + encodeURIComponent(o) : "") + p + q + "&d_cb=s_c_il%5B" + b._in + "%5D." + m } return a }; b.getAudienceManagerLocationHint = function (k, i) { if (b.isAllowed() && b.getMarketingCloudVisitorID(function () { b.getAudienceManagerLocationHint(k, e) })) { var a = b.b(B); a || (a = b.getAnalyticsVisitorID(function () { b.getAudienceManagerLocationHint(k, e) })); if (a) { return b.n(I, b.s(), k, i) } } return "" }; b.getAudienceManagerBlob = function (k, i) { if (b.isAllowed() && b.getMarketingCloudVisitorID(function () { b.getAudienceManagerBlob(k, e) })) { var a = b.b(B); a || (a = b.getAnalyticsVisitorID(function () { b.getAudienceManagerBlob(k, e) })); if (a) { return a = b.s(), b.z && b.p(F, -1), b.n(F, a, k, i) } } return "" }; C.AUTH_STATE_UNAUTHENTICATED = 0; C.AUTH_STATE_AUTHENTICATED = 1; C.AUTH_STATE_ASSUMED_AUTHENTICATED = 2; C.AUTH_STATE_LOGGEDOUT = 3; b.setAuthState = function (a) { b.isAllowed() && (b.h(), b.d(P, a)) }; b.getAuthState = function () { return b.isAllowed() ? (b.h(), b.b(P)) : 0 }; b.k = ""; b.q = {}; b.u = ""; b.v = {}; b.getSupplementalDataID = function (k, i) { !b.k && !i && (b.k = b.m(1)); var a = b.k; b.u && !b.v[k] ? (a = b.u, b.v[k] = e) : a && (b.q[k] && (b.u = b.k, b.v = b.q, b.k = a = !i ? b.m(1) : "", b.q = {}), a && (b.q[k] = e)); return a }; 0 > g.indexOf("@") && (g += "@AdobeOrg"); b.marketingCloudOrgID = g; b.namespace = J; b.cookieName = "AMCV_" + g; b.cookieDomain = b.I(); b.cookieDomain == d.location.hostname && (b.cookieDomain = ""); if (J) { var C = "AMCV_" + J, c = b.cookieRead(b.cookieName), Q = b.cookieRead(C); !c && Q && (b.cookieWrite(b.cookieName, Q, 1), b.cookieWrite(C, "", -60)) } b.loadSSL = 0 <= d.location.protocol.toLowerCase().indexOf("https"); b.loadTimeout = 500; b.marketingCloudServer = b.audienceManagerServer = "dpm.demdex.net" } Visitor.getInstance = function (d, f) { var b, c = window.s_c_il, e; 0 > d.indexOf("@") && (d += "@AdobeOrg"); if (c) { for (e = 0; e < c.length; e++) { if ((b = c[e]) && "Visitor" == b._c && (b.marketingCloudOrgID == d || f && b.namespace == f)) { return b } } } return new Visitor(d, f) }; function AppMeasurement_Module_AudienceManagement(b) { var a = this; a.s = b; var c = window; if (!c.s_c_in) { c.s_c_il = [], c.s_c_in = 0 } a._il = c.s_c_il; a._in = c.s_c_in; a._il[a._in] = a; c.s_c_in++; a._c = "s_m"; a.setup = function (d) { if (c.DIL && d) { d.disableDefaultRequest = !0, d.disableScriptAttachment = !0, a.instance = c.DIL.create(d), a.tools = c.DIL.tools } }; a.isReady = function () { return a.instance ? !0 : !1 }; a.getEventCallConfigParams = function () { if (a.instance && a.instance.api && a.instance.api.getEventCallConfigParams) { return a.instance.api.getEventCallConfigParams() } return {} }; a.passData = function (d) { a.instance && a.instance.api && a.instance.api.passData && a.instance.api.passData(d) } } "function" != typeof DIL && (DIL = function (g, k) { var O = [], o, Q; g !== Object(g) && (g = {}); var S, V, ab, ak, ai, al, am, ag, an, W, X; S = g.partner; V = g.containerNSID; ab = g.iframeAttachmentDelay; ak = !!g.disableDestinationPublishingIframe; ai = g.iframeAkamaiHTTPS; al = g.mappings; am = g.uuidCookie; ag = !0 === g.enableErrorReporting; an = g.visitorService; W = g.declaredId; X = !0 === g.removeFinishedScriptsAndCallbacks; var Y, Z, R, B; Y = !0 === g.disableScriptAttachment; Z = !0 === g.disableDefaultRequest; R = g.afterResultForDefaultRequest; B = g.dpIframeSrc; ag && DIL.errorModule.activate(); var aa = !0 === window._dil_unit_tests; (o = k) && O.push(o + ""); if (!S || "string" != typeof S) { return o = "DIL partner is invalid or not specified in initConfig", DIL.errorModule.handleError({ name: "error", message: o, filename: "dil.js" }), Error(o) } o = "DIL containerNSID is invalid or not specified in initConfig, setting to default of 0"; if (V || "number" == typeof V) { V = parseInt(V, 10), !isNaN(V) && 0 <= V && (o = "") } o && (V = 0, O.push(o), o = ""); Q = DIL.getDil(S, V); if (Q instanceof DIL && Q.api.getPartner() == S && Q.api.getContainerNSID() == V) { return Q } if (this instanceof DIL) { DIL.registerDil(this, S, V) } else { return new DIL(g, "DIL was not instantiated with the 'new' operator, returning a valid instance with partner = " + S + " and containerNSID = " + V) } var ao = { IS_HTTPS: "https:" == document.location.protocol, POST_MESSAGE_ENABLED: !!window.postMessage, COOKIE_MAX_EXPIRATION_DATE: "Tue, 19 Jan 2038 03:14:07 UTC" }, T = { stuffed: {} }, ad = {}, af = { firingQueue: [], fired: [], firing: !1, sent: [], errored: [], reservedKeys: { sids: !0, pdata: !0, logdata: !0, callback: !0, postCallbackFn: !0, useImageRequest: !0 }, callbackPrefix: "demdexRequestCallback", firstRequestHasFired: !1, useJSONP: !0, abortRequests: !1, num_of_jsonp_responses: 0, num_of_jsonp_errors: 0, num_of_img_responses: 0, num_of_img_errors: 0, toRemove: [], removed: [], readyToRemove: !1, platformParams: { d_nsid: V + "", d_rtbd: "json", d_jsonv: DIL.jsonVersion + "", d_dst: "1" }, nonModStatsParams: { d_rtbd: !0, d_dst: !0, d_cts: !0, d_rs: !0 }, modStatsParams: null, adms: { TIME_TO_CATCH_ALL_REQUESTS_RELEASE: 2000, calledBack: !1, uuid: null, noVisitorAPI: !1, instance: null, releaseType: "no VisitorAPI", admsProcessingStarted: !1, process: function (r) { try { if (!this.admsProcessingStarted) { var e = this, t, s, n, m, p; if ("function" == typeof r && "function" == typeof r.getInstance) { if (an === Object(an) && (t = an.namespace) && "string" == typeof t) { s = r.getInstance(t) } else { this.releaseType = "no namespace"; this.releaseRequests(); return } if (s === Object(s) && "function" == typeof s.isAllowed && "function" == typeof s.getGlobalVisitorID) { if (!s.isAllowed()) { this.releaseType = "VisitorAPI not allowed"; this.releaseRequests(); return } this.instance = s; this.admsProcessingStarted = !0; n = function (a) { "VisitorAPI" != e.releaseType && (e.uuid = a, e.releaseType = "VisitorAPI", e.releaseRequests()) }; aa && (m = an.server) && "string" == typeof m && (s.server = m); p = s.getGlobalVisitorID(n); if ("string" == typeof p && p.length) { n(p); return } setTimeout(function () { "VisitorAPI" != e.releaseType && (e.releaseType = "timeout", e.releaseRequests()) }, this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE); return } this.releaseType = "invalid instance" } else { this.noVisitorAPI = !0 } this.releaseRequests() } } catch (q) { this.releaseRequests() } }, releaseRequests: function () { this.calledBack = !0; af.registerRequest() }, getGlobalVisitorID: function () { return this.instance ? this.instance.getGlobalVisitorID() : null } }, declaredId: { uuid: null, declaredId: { init: null, request: null }, declaredIdCombos: {}, dIdAlwaysOn: !1, dIdInRequest: !1, setDeclaredId: function (p, e) { var r = aj.isPopulatedString, q = encodeURIComponent; if (p === Object(p) && r(e)) { var m = p.dpid, n = p.dpuuid, f = null; if (r(m) && r(n)) { f = q(m) + "$" + q(n); if (!0 === this.declaredIdCombos[f]) { return "setDeclaredId: combo exists for type '" + e + "'" } this.declaredIdCombos[f] = !0; this.declaredId[e] = { dpid: m, dpuuid: n }; "init" == e ? this.dIdAlwaysOn = !0 : "request" == e && (this.dIdInRequest = !0); return "setDeclaredId: succeeded for type '" + e + "'" } } return "setDeclaredId: failed for type '" + e + "'" }, getDeclaredIdQueryString: function () { var c = this.declaredId.request, b = this.declaredId.init, d = ""; null !== c ? d = "&d_dpid=" + c.dpid + "&d_dpuuid=" + c.dpuuid : null !== b && (d = "&d_dpid=" + b.dpid + "&d_dpuuid=" + b.dpuuid); return d }, getUUIDQueryString: function () { var c = af.adms, b = aj.isPopulatedString, e = !1, d = af.adms.getGlobalVisitorID(); b(this.uuid) ? b(d) && this.uuid != d && (this.uuid = d) : this.uuid = d || c.uuid; if (this.dIdAlwaysOn || this.dIdInRequest) { e = !0, this.dIdInRequest = !1 } return b(this.uuid) && e ? "d_uuid=" + this.uuid + "&" : "" } }, registerRequest: function (c) { var b = this.firingQueue; c === Object(c) && b.push(c); !this.firing && b.length && (this.adms.calledBack ? (c = b.shift(), c.src = c.src.replace(/demdex.net\/event\?d_nsid=/, "demdex.net/event?" + this.declaredId.getUUIDQueryString() + "d_nsid="), ap.fireRequest(c), this.firstRequestHasFired || "script" != c.tag || (this.firstRequestHasFired = !0)) : this.processVisitorAPI()) }, processVisitorAPI: function () { this.adms.process(window.Visitor) }, requestRemoval: function (e) { if (!X) { return "removeFinishedScriptsAndCallbacks is not boolean true" } var b = this.toRemove, m, f; e === Object(e) && (m = e.script, f = e.callbackName, (m === Object(m) && "SCRIPT" == m.nodeName || "no script created" == m) && "string" == typeof f && f.length && b.push(e)); if (this.readyToRemove && b.length) { f = b.shift(); m = f.script; f = f.callbackName; "no script created" != m ? (e = m.src, m.parentNode.removeChild(m)) : e = m; window[f] = null; try { delete window[f] } catch (d) { } this.removed.push({ scriptSrc: e, callbackName: f }); DIL.variables.scriptsRemoved.push(e); DIL.variables.callbacksRemoved.push(f); return this.requestRemoval() } return "requestRemoval() processed" } }; Q = function () { var c = "http://fast.", b = "?d_nsid=" + V + "#" + encodeURIComponent(document.location.href); if ("string" === typeof B && B.length) { return B + b } ao.IS_HTTPS && (c = !0 === ai ? "https://fast." : "https://"); return c + S + ".demdex.net/dest4.html" + b }; var i = { THROTTLE_START: 30000, throttleTimerSet: !1, id: "destination_publishing_iframe_" + S + "_" + V, url: Q(), iframe: null, iframeHasLoaded: !1, sendingMessages: !1, messages: [], messagesPosted: [], messageSendingInterval: ao.POST_MESSAGE_ENABLED ? 15 : 100, jsonProcessed: [], attachIframe: function () { var c = this, b = document.createElement("iframe"); b.id = this.id; b.style.cssText = "display: none; width: 0; height: 0;"; b.src = this.url; ah.addListener(b, "load", function () { c.iframeHasLoaded = !0; c.requestToProcess() }); document.body.appendChild(b); this.iframe = b }, requestToProcess: function (c, b) { var d = this; c && !aj.isEmptyObject(c) && this.process(c, b); this.iframeHasLoaded && this.messages.length && !this.sendingMessages && (this.throttleTimerSet || (this.throttleTimerSet = !0, setTimeout(function () { d.messageSendingInterval = ao.POST_MESSAGE_ENABLED ? 15 : 150 }, this.THROTTLE_START)), this.sendingMessages = !0, this.sendMessages()) }, process: function (t, m) { var w = encodeURIComponent, u, p, q, n, s, r; m === Object(m) && (r = ah.encodeAndBuildRequest([af.declaredId.uuid || "", m.dpid || "", m.dpuuid || ""], ",")); if ((u = t.dests) && u instanceof Array && (p = u.length)) { for (q = 0; q < p; q++) { n = u[q], n = [w("dests"), w(n.id || ""), w(n.y || ""), w(n.c || "")], this.addMessage(n.join("|")) } } if ((u = t.ibs) && u instanceof Array && (p = u.length)) { for (q = 0; q < p; q++) { n = u[q], n = [w("ibs"), w(n.id || ""), w(n.tag || ""), ah.encodeAndBuildRequest(n.url || [], ","), w(n.ttl || ""), "", r], this.addMessage(n.join("|")) } } if ((u = t.dpcalls) && u instanceof Array && (p = u.length)) { for (q = 0; q < p; q++) { n = u[q], s = n.callback || {}, s = [s.obj || "", s.fn || "", s.key || "", s.tag || "", s.url || ""], n = [w("dpm"), w(n.id || ""), w(n.tag || ""), ah.encodeAndBuildRequest(n.url || [], ","), w(n.ttl || ""), ah.encodeAndBuildRequest(s, ","), r], this.addMessage(n.join("|")) } } this.jsonProcessed.push(t) }, addMessage: function (c) { var b = encodeURIComponent, b = ag ? b("---destpub-debug---") : b("---destpub---"); this.messages.push(b + c) }, sendMessages: function () { var c = this, b; this.messages.length ? (b = this.messages.shift(), DIL.xd.postMessage(b, this.url, this.iframe.contentWindow), this.messagesPosted.push(b), setTimeout(function () { c.sendMessages() }, this.messageSendingInterval)) : this.sendingMessages = !1 } }, U = { traits: function (a) { aj.isValidPdata(a) && (ad.sids instanceof Array || (ad.sids = []), ah.extendArray(ad.sids, a)); return this }, pixels: function (a) { aj.isValidPdata(a) && (ad.pdata instanceof Array || (ad.pdata = []), ah.extendArray(ad.pdata, a)); return this }, logs: function (a) { aj.isValidLogdata(a) && (ad.logdata !== Object(ad.logdata) && (ad.logdata = {}), ah.extendObject(ad.logdata, a)); return this }, customQueryParams: function (a) { aj.isEmptyObject(a) || ah.extendObject(ad, a, af.reservedKeys); return this }, signals: function (m, c) { var e, f = m; if (!aj.isEmptyObject(f)) { if (c && "string" == typeof c) { for (e in f = {}, m) { m.hasOwnProperty(e) && (f[c + e] = m[e]) } } ah.extendObject(ad, f, af.reservedKeys) } return this }, declaredId: function (a) { af.declaredId.setDeclaredId(a, "request"); return this }, result: function (a) { "function" == typeof a && (ad.callback = a); return this }, afterResult: function (a) { "function" == typeof a && (ad.postCallbackFn = a); return this }, useImageRequest: function () { ad.useImageRequest = !0; return this }, clearData: function () { ad = {}; return this }, submit: function () { ap.submitRequest(ad); ad = {}; return this }, getPartner: function () { return S }, getContainerNSID: function () { return V }, getEventLog: function () { return O }, getState: function () { var c = {}, b = {}; ah.extendObject(c, af, { callbackPrefix: !0, useJSONP: !0, registerRequest: !0 }); ah.extendObject(b, i, { attachIframe: !0, requestToProcess: !0, process: !0, sendMessages: !0 }); return { pendingRequest: ad, otherRequestInfo: c, destinationPublishingInfo: b } }, idSync: function (p) { if (p !== Object(p) || "string" != typeof p.dpid || !p.dpid.length) { return "Error: config or config.dpid is empty" } if ("string" != typeof p.url || !p.url.length) { return "Error: config.url is empty" } var e = p.url, f = p.minutesToLive, n = encodeURIComponent, m = af.declaredId, e = e.replace(/^https:/, "").replace(/^http:/, ""); if ("undefined" == typeof f) { f = 20160 } else { if (f = parseInt(f, 10), isNaN(f) || 0 >= f) { return "Error: config.minutesToLive needs to be a positive number" } } m = ah.encodeAndBuildRequest([af.adms.getGlobalVisitorID() || m.uuid || "", p.dpid, p.dpuuid || ""], ","); p = ["ibs", n(p.dpid), "img", n(e), f, "", m]; i.addMessage(p.join("|")); af.firstRequestHasFired && i.requestToProcess(); return "Successfully queued" }, aamIdSync: function (b) { if (b !== Object(b) || "string" != typeof b.dpuuid || !b.dpuuid.length) { return "Error: config or config.dpuuid is empty" } b.url = "//dpm.demdex.net/ibs:dpid=" + b.dpid + "&dpuuid=" + b.dpuuid; return this.idSync(b) }, passData: function (b) { if (aj.isEmptyObject(b)) { return "Error: json is empty or not an object" } ap.defaultCallback(b); return "json submitted for processing" }, getPlatformParams: function () { return af.platformParams }, getEventCallConfigParams: function () { var e = af, f = e.modStatsParams, n = e.platformParams, m; if (!f) { f = {}; for (m in n) { n.hasOwnProperty(m) && !e.nonModStatsParams[m] && (f[m.replace(/^d_/, "")] = n[m]) } e.modStatsParams = f } return f } }, ap = { submitRequest: function (b) { af.registerRequest(ap.createQueuedRequest(b)); return !0 }, createQueuedRequest: function (f) { var m = af, r, p = f.callback, t = "img"; if (!aj.isEmptyObject(al)) { var n, u, w; for (n in al) { al.hasOwnProperty(n) && (u = al[n], null != u && "" !== u && n in f && !(u in f || u in af.reservedKeys) && (w = f[n], null != w && "" !== w && (f[u] = w))) } } aj.isValidPdata(f.sids) || (f.sids = []); aj.isValidPdata(f.pdata) || (f.pdata = []); aj.isValidLogdata(f.logdata) || (f.logdata = {}); f.logdataArray = ah.convertObjectToKeyValuePairs(f.logdata, "=", !0); f.logdataArray.push("_ts=" + (new Date).getTime()); "function" != typeof p && (p = this.defaultCallback); if (m.useJSONP = !f.useImageRequest || "boolean" != typeof f.useImageRequest) { t = "script", r = m.callbackPrefix + "_" + S + "_" + V + "_" + (new Date).getTime() } return { tag: t, src: ap.makeRequestSrc(f, r), internalCallbackName: r, callbackFn: p, postCallbackFn: f.postCallbackFn, useImageRequest: f.useImageRequest, requestData: f } }, defaultCallback: function (n, p) { var t, r, w, u, x, z, A, C, y; if ((t = n.stuff) && t instanceof Array && (r = t.length)) { for (w = 0; w < r; w++) { if ((u = t[w]) && u === Object(u)) { x = u.cn; z = u.cv; A = u.ttl; if ("undefined" == typeof A || "" === A) { A = Math.floor(ah.getMaxCookieExpiresInMinutes() / 60 / 24) } C = u.dmn || "." + document.domain.replace(/^www\./, ""); y = u.type; x && (z || "number" == typeof z) && ("var" != y && (A = parseInt(A, 10)) && !isNaN(A) && ah.setCookie(x, z, 1440 * A, "/", C, !1), T.stuffed[x] = z) } } } t = n.uuid; r = af.declaredId; w = aj.isPopulatedString; w(t) && (w(r.uuid) || (r.uuid = t), aj.isEmptyObject(am) || (r = am.path, "string" == typeof r && r.length || (r = "/"), w = parseInt(am.days, 10), isNaN(w) && (w = 100), ah.setCookie(am.name || "aam_did", t, 1440 * w, r, am.domain || "." + document.domain.replace(/^www\./, ""), !0 === am.secure))); ak || af.abortRequests || i.requestToProcess(n, p) }, makeRequestSrc: function (f, p) { f.sids = aj.removeEmptyArrayValues(f.sids || []); f.pdata = aj.removeEmptyArrayValues(f.pdata || []); var t = af, r = t.platformParams, y = ah.encodeAndBuildRequest(f.sids, ","), z = ah.encodeAndBuildRequest(f.pdata, ","), D = (f.logdataArray || []).join("&"); delete f.logdataArray; var F = ao.IS_HTTPS ? "https://" : "http://", H = t.declaredId.getDeclaredIdQueryString(), A; A = []; var C, I, J, G; for (C in f) { if (!(C in t.reservedKeys) && f.hasOwnProperty(C)) { if (I = f[C], C = encodeURIComponent(C), I instanceof Array) { for (J = 0, G = I.length; J < G; J++) { A.push(C + "=" + encodeURIComponent(I[J])) } } else { A.push(C + "=" + encodeURIComponent(I)) } } } A = A.length ? "&" + A.join("&") : ""; return F + S + ".demdex.net/event?d_nsid=" + r.d_nsid + H + (y.length ? "&d_sid=" + y : "") + (z.length ? "&d_px=" + z : "") + (D.length ? "&d_ld=" + encodeURIComponent(D) : "") + A + (t.useJSONP ? "&d_rtbd=" + r.d_rtbd + "&d_jsonv=" + r.d_jsonv + "&d_dst=" + r.d_dst + "&d_cb=" + (p || "") : "") }, fireRequest: function (c) { if ("img" == c.tag) { this.fireImage(c) } else { if ("script" == c.tag) { var d = af.declaredId, d = d.declaredId.request || d.declaredId.init || {}; this.fireScript(c, { dpid: d.dpid || "", dpuuid: d.dpuuid || "" }) } } }, fireImage: function (c) { var d = af, n, m; d.abortRequests || (d.firing = !0, n = new Image(0, 0), d.sent.push(c), n.onload = function () { d.firing = !1; d.fired.push(c); d.num_of_img_responses++; d.registerRequest() }, m = function (a) { o = "imgAbortOrErrorHandler received the event of type " + a.type; O.push(o); d.abortRequests = !0; d.firing = !1; d.errored.push(c); d.num_of_img_errors++; d.registerRequest() }, n.addEventListener ? (n.addEventListener("error", m, !1), n.addEventListener("abort", m, !1)) : n.attachEvent && (n.attachEvent("onerror", m), n.attachEvent("onabort", m)), n.src = c.src) }, fireScript: function (c, d) { var f = this, r = af, p, w, x = c.src, t = c.postCallbackFn, y = "function" == typeof t, u = c.internalCallbackName; r.abortRequests || (r.firing = !0, window[u] = function (a) { try { a !== Object(a) && (a = {}); var m = c.callbackFn; r.firing = !1; r.fired.push(c); r.num_of_jsonp_responses++; m(a, d); y && t(a, d) } catch (b) { b.message = "DIL jsonp callback caught error with message " + b.message; o = b.message; O.push(o); b.filename = b.filename || "dil.js"; b.partner = S; DIL.errorModule.handleError(b); try { m({ error: b.name + "|" + b.message }), y && t({ error: b.name + "|" + b.message }) } catch (n) { } } finally { r.requestRemoval({ script: w, callbackName: u }), r.registerRequest() } }, Y ? (r.firing = !1, r.requestRemoval({ script: "no script created", callbackName: u })) : (w = document.createElement("script"), w.addEventListener && w.addEventListener("error", function (a) { r.requestRemoval({ script: w, callbackName: u }); o = "jsonp script tag error listener received the event of type " + a.type + " with src " + x; f.handleScriptError(o, c) }, !1), w.type = "text/javascript", w.src = x, p = DIL.variables.scriptNodeList[0], p.parentNode.insertBefore(w, p)), r.sent.push(c), r.declaredId.declaredId.request = null) }, handleScriptError: function (d, e) { var f = af; O.push(d); f.abortRequests = !0; f.firing = !1; f.errored.push(e); f.num_of_jsonp_errors++; f.registerRequest() } }, aj = { isValidPdata: function (b) { return b instanceof Array && this.removeEmptyArrayValues(b).length ? !0 : !1 }, isValidLogdata: function (b) { return !this.isEmptyObject(b) }, isEmptyObject: function (c) { if (c !== Object(c)) { return !0 } for (var d in c) { if (c.hasOwnProperty(d)) { return !1 } } return !0 }, removeEmptyArrayValues: function (e) { for (var m = 0, n = e.length, p, q = [], m = 0; m < n; m++) { p = e[m], "undefined" != typeof p && null != p && q.push(p) } return q }, isPopulatedString: function (b) { return "string" == typeof b && b.length } }, ah = { addListener: function () { if (document.addEventListener) { return function (c, e, f) { c.addEventListener(e, function (b) { "function" == typeof f && f(b) }, !1) } } if (document.attachEvent) { return function (c, e, f) { c.attachEvent("on" + e, function (b) { "function" == typeof f && f(b) }) } } }(), convertObjectToKeyValuePairs: function (m, n, q) { var p = []; n = n || "="; var s, r; for (s in m) { r = m[s], "undefined" != typeof r && null != r && p.push(s + n + (q ? encodeURIComponent(r) : r)) } return p }, encodeAndBuildRequest: function (c, d) { return this.map(c, function (b) { return encodeURIComponent(b) }).join(d) }, map: function (m, n) { if (Array.prototype.map) { return m.map(n) } if (void 0 === m || null === m) { throw new TypeError } var q = Object(m), p = q.length >>> 0; if ("function" !== typeof n) { throw new TypeError } for (var s = Array(p), r = 0; r < p; r++) { r in q && (s[r] = n.call(n, q[r], r, q)) } return s }, filter: function (m, n) { if (!Array.prototype.filter) { if (void 0 === m || null === m) { throw new TypeError } var q = Object(m), p = q.length >>> 0; if ("function" !== typeof n) { throw new TypeError } for (var s = [], r = 0; r < p; r++) { if (r in q) { var t = q[r]; n.call(n, t, r, q) && s.push(t) } } return s } return m.filter(n) }, getCookie: function (f) { f += "="; var m = document.cookie.split(";"), p, n, q; p = 0; for (n = m.length; p < n; p++) { for (q = m[p]; " " == q.charAt(0) ;) { q = q.substring(1, q.length) } if (0 == q.indexOf(f)) { return decodeURIComponent(q.substring(f.length, q.length)) } } return null }, setCookie: function (m, n, q, p, r, s) { var t = new Date; q && (q *= 60000); document.cookie = m + "=" + encodeURIComponent(n) + (q ? ";expires=" + (new Date(t.getTime() + q)).toUTCString() : "") + (p ? ";path=" + p : "") + (r ? ";domain=" + r : "") + (s ? ";secure" : "") }, extendArray: function (c, d) { return c instanceof Array && d instanceof Array ? (Array.prototype.push.apply(c, d), !0) : !1 }, extendObject: function (e, f, n) { var m; if (e === Object(e) && f === Object(f)) { for (m in f) { !f.hasOwnProperty(m) || !aj.isEmptyObject(n) && m in n || (e[m] = f[m]) } return !0 } return !1 }, getMaxCookieExpiresInMinutes: function () { return ((new Date(ao.COOKIE_MAX_EXPIRATION_DATE)).getTime() - (new Date).getTime()) / 1000 / 60 } }; "error" == S && 0 == V && ah.addListener(window, "load", function () { DIL.windowLoaded = !0 }); var P = function () { ae(); ak || af.abortRequests || i.attachIframe(); af.readyToRemove = !0; af.requestRemoval() }, ae = function () { ak || setTimeout(function () { Z || af.firstRequestHasFired || af.adms.admsProcessingStarted || af.adms.calledBack || ("function" == typeof R ? U.afterResult(R).submit() : U.submit()) }, DIL.constants.TIME_TO_DEFAULT_REQUEST) }, ac = document; "error" != S && (DIL.windowLoaded ? P() : "complete" != ac.readyState && "loaded" != ac.readyState ? ah.addListener(window, "load", P) : DIL.isAddedPostWindowLoadWasCalled ? ah.addListener(window, "load", P) : (ab = "number" == typeof ab ? parseInt(ab, 10) : 0, 0 > ab && (ab = 0), setTimeout(P, ab || DIL.constants.TIME_TO_CATCH_ALL_DP_IFRAME_ATTACHMENT))); af.declaredId.setDeclaredId(W, "init"); this.api = U; this.getStuffedVariable = function (c) { var d = T.stuffed[c]; d || "number" == typeof d || (d = ah.getCookie(c)) || "number" == typeof d || (d = ""); return d }; this.validators = aj; this.helpers = ah; this.constants = ao; this.log = O; aa && (this.pendingRequest = ad, this.requestController = af, this.setDestinationPublishingUrl = Q, this.destinationPublishing = i, this.requestProcs = ap, this.variables = T) }, function () { var c = document, d; null == c.readyState && c.addEventListener && (c.readyState = "loading", c.addEventListener("DOMContentLoaded", d = function () { c.removeEventListener("DOMContentLoaded", d, !1); c.readyState = "complete" }, !1)) }(), DIL.extendStaticPropertiesAndMethods = function (c) { var d; if (c === Object(c)) { for (d in c) { c.hasOwnProperty(d) && (this[d] = c[d]) } } }, DIL.extendStaticPropertiesAndMethods({ version: "4.8", jsonVersion: 1, constants: { TIME_TO_DEFAULT_REQUEST: 50, TIME_TO_CATCH_ALL_DP_IFRAME_ATTACHMENT: 500 }, variables: { scriptNodeList: document.getElementsByTagName("script"), scriptsRemoved: [], callbacksRemoved: [] }, windowLoaded: !1, dils: {}, isAddedPostWindowLoadWasCalled: !1, isAddedPostWindowLoad: function (b) { this.isAddedPostWindowLoadWasCalled = !0; this.windowLoaded = "function" == typeof b ? !!b() : "boolean" == typeof b ? b : !0 }, create: function (c) { try { return new DIL(c) } catch (d) { return (new Image(0, 0)).src = "http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D" + (new Date).getTime(), Error("Error in attempt to create DIL instance with DIL.create()") } }, registerDil: function (c, e, f) { e = e + "$" + f; e in this.dils || (this.dils[e] = c) }, getDil: function (c, e) { var f; "string" != typeof c && (c = ""); e || (e = 0); f = c + "$" + e; return f in this.dils ? this.dils[f] : Error("The DIL instance with partner = " + c + " and containerNSID = " + e + " was not found") }, dexGetQSVars: function (c, e, f) { e = this.getDil(e, f); return e instanceof this ? e.getStuffedVariable(c) : "" }, xd: { postMessage: function (e, f, i) { var g = 1; f && (window.postMessage ? i.postMessage(e, f.replace(/([^:]+:\/\/[^\/]+).*/, "$1")) : f && (i.location = f.replace(/#.*$/, "") + "#" + +new Date + g++ + "&" + e)) } } }), DIL.errorModule = function () { var c = DIL.create({ partner: "error", containerNSID: 0, disableDestinationPublishingIframe: !0 }), e = { harvestererror: 14138, destpuberror: 14139, dpmerror: 14140, generalerror: 14137, error: 14137, noerrortypedefined: 15021, evalerror: 15016, rangeerror: 15017, referenceerror: 15018, typeerror: 15019, urierror: 15020 }, f = !1; return { activate: function () { f = !0 }, handleError: function (a) { if (!f) { return "DIL error module has not been activated" } a !== Object(a) && (a = {}); var b = a.name ? (new String(a.name)).toLowerCase() : "", d = []; a = { name: b, filename: a.filename ? a.filename + "" : "", partner: a.partner ? a.partner + "" : "no_partner", site: a.site ? a.site + "" : document.location.href, message: a.message ? a.message + "" : "" }; d.push(b in e ? e[b] : e.noerrortypedefined); c.api.pixels(d).logs(a).useImageRequest().submit(); return "DIL error report sent" }, pixelMap: e } }(), DIL.tools = {}, DIL.modules = { helpers: { handleModuleError: function (e, f, i) { var g = ""; f = f || "Error caught in DIL module/submodule: "; e === Object(e) ? g = f + (e.message || "err has no message") : (g = f + "err is not a valid object", e = {}); e.message = g; i instanceof DIL && (e.partner = i.api.getPartner()); DIL.errorModule.handleError(e); return this.errorMessage = g } } }); DIL.tools.getSearchReferrer = function (g, i) { var m = DIL.getDil("error"), k = DIL.tools.decomposeURI(g || document.referrer), n = "", o = "", p = { queryParam: "q" }; return (n = m.helpers.filter([i === Object(i) ? i : {}, { hostPattern: /aol\./ }, { hostPattern: /ask\./ }, { hostPattern: /bing\./ }, { hostPattern: /google\./ }, { hostPattern: /yahoo\./, queryParam: "p" }], function (b) { return !(!b.hasOwnProperty("hostPattern") || !k.hostname.match(b.hostPattern)) }).shift()) ? { valid: !0, name: k.hostname, keywords: (m.helpers.extendObject(p, n), o = p.queryPattern ? (n = ("" + k.search).match(p.queryPattern)) ? n[1] : "" : k.uriParams[p.queryParam], decodeURIComponent(o || "").replace(/\+|%20/g, " ")) } : { valid: !1, name: "", keywords: "" } }; DIL.tools.decomposeURI = function (c) { var e = DIL.getDil("error"), f = document.createElement("a"); f.href = c || document.referrer; return { hash: f.hash, host: f.host.split(":").shift(), hostname: f.hostname, href: f.href, pathname: f.pathname.replace(/^\//, ""), protocol: f.protocol, search: f.search, uriParams: function (b, g) { e.helpers.map(g.split("&"), function (a) { a = a.split("="); b[a.shift()] = a.shift() }); return b }({}, f.search.replace(/^(\/|\?)?|\/$/g, "")) } }; DIL.tools.getMetaTags = function () { var g = {}, i = document.getElementsByTagName("meta"), m, k, n, o, p; m = 0; for (n = arguments.length; m < n; m++) { if (o = arguments[m], null !== o) { for (k = 0; k < i.length; k++) { if (p = i[k], p.name == o) { g[o] = p.content; break } } } } return g }; DIL.modules.siteCatalyst = { dil: null, handle: DIL.modules.helpers.handleModuleError, init: function (g, i, m) { try { var k = this, n = { name: "DIL Site Catalyst Module Error" }, o = function (b) { n.message = b; DIL.errorModule.handleError(n); return b }; this.dil = null; if (i instanceof DIL) { this.dil = i } else { return o("dilInstance is not a valid instance of DIL") } n.partner = i.api.getPartner(); if (g !== Object(g)) { return o("siteCatalystReportingSuite is not an object") } window.AppMeasurement_Module_DIL = g.m_DIL = function (c) { var d = "function" === typeof c.m_i ? c.m_i("DIL") : this; if (d !== Object(d)) { return o("m is not an object") } d.trackVars = k.constructTrackVars(m); d.d = 0; d.s = c; d._t = function () { var f, q, s = "," + this.trackVars + ",", r = this.s, t, w = []; t = []; var x = {}, y = !1; if (r !== Object(r)) { return o("Error in m._t function: s is not an object") } if (this.d) { if ("function" == typeof r.foreachVar) { r.foreachVar(function (e, u) { x[e] = u; y = !0 }, this.trackVars) } else { if (!(r.va_t instanceof Array)) { return o("Error in m._t function: s.va_t is not an array") } if (r.lightProfileID) { (f = r.lightTrackVars) && (f = "," + f + "," + r.vl_mr + ",") } else { if (r.pe || r.linkType) { f = r.linkTrackVars, r.pe && (q = r.pe.substring(0, 1).toUpperCase() + r.pe.substring(1), r[q] && (f = r[q].trackVars)), f && (f = "," + f + "," + r.vl_l + "," + r.vl_l2 + ",") } } if (f) { q = 0; for (w = f.split(",") ; q < w.length; q++) { 0 <= s.indexOf("," + w[q] + ",") && t.push(w[q]) } t.length && (s = "," + t.join(",") + ",") } t = 0; for (q = r.va_t.length; t < q; t++) { f = r.va_t[t], 0 <= s.indexOf("," + f + ",") && null != r[f] && "" !== r[f] && (x[f] = r[f], y = !0) } } y && this.d.api.signals(x, "c_").submit() } } }; g.loadModule("DIL"); g.DIL.d = i; return n.message ? n.message : "DIL.modules.siteCatalyst.init() completed with no errors" } catch (p) { return this.handle(p, "DIL.modules.siteCatalyst.init() caught error with message ", this.dil) } }, constructTrackVars: function (g) { var i = [], m, k, n, o, p; if (g === Object(g)) { m = g.names; if (m instanceof Array && (n = m.length)) { for (k = 0; k < n; k++) { o = m[k], "string" == typeof o && o.length && i.push(o) } } g = g.iteratedNames; if (g instanceof Array && (n = g.length)) { for (k = 0; k < n; k++) { if (m = g[k], m === Object(m) && (o = m.name, p = parseInt(m.maxIndex, 10), "string" == typeof o && o.length && !isNaN(p) && 0 <= p)) { for (m = 0; m <= p; m++) { i.push(o + m) } } } } if (i.length) { return i.join(",") } } return this.constructTrackVars({ names: "pageName channel campaign products events pe pev1 pev2 pev3".split(" "), iteratedNames: [{ name: "prop", maxIndex: 75 }, { name: "eVar", maxIndex: 75 }] }) } }; DIL.modules.GA = { dil: null, arr: null, tv: null, errorMessage: "", defaultTrackVars: ["_setAccount", "_setCustomVar", "_addItem", "_addTrans", "_trackSocial"], defaultTrackVarsObj: null, signals: {}, hasSignals: !1, handle: DIL.modules.helpers.handleModuleError, init: function (g, i, m) { try { this.tv = this.arr = this.dil = null; this.errorMessage = ""; this.signals = {}; this.hasSignals = !1; var k = { name: "DIL GA Module Error" }, n = ""; i instanceof DIL ? (this.dil = i, k.partner = this.dil.api.getPartner()) : (n = "dilInstance is not a valid instance of DIL", k.message = n, DIL.errorModule.handleError(k)); g instanceof Array && g.length ? this.arr = g : (n = "gaArray is not an array or is empty", k.message = n, DIL.errorModule.handleError(k)); this.tv = this.constructTrackVars(m); this.errorMessage = n } catch (o) { this.handle(o, "DIL.modules.GA.init() caught error with message ", this.dil) } finally { return this } }, constructTrackVars: function (g) { var i = [], m, k, n, o; if (this.defaultTrackVarsObj !== Object(this.defaultTrackVarsObj)) { n = this.defaultTrackVars; o = {}; m = 0; for (k = n.length; m < k; m++) { o[n[m]] = !0 } this.defaultTrackVarsObj = o } else { o = this.defaultTrackVarsObj } if (g === Object(g)) { g = g.names; if (g instanceof Array && (k = g.length)) { for (m = 0; m < k; m++) { n = g[m], "string" == typeof n && n.length && n in o && i.push(n) } } if (i.length) { return i } } return this.defaultTrackVars }, constructGAObj: function (g) { var i = {}; g = g instanceof Array ? g : this.arr; var m, k, n, o; m = 0; for (k = g.length; m < k; m++) { n = g[m], n instanceof Array && n.length && (n = [], o = g[m], n instanceof Array && o instanceof Array && Array.prototype.push.apply(n, o), o = n.shift(), "string" == typeof o && o.length && (i[o] instanceof Array || (i[o] = []), i[o].push(n))) } return i }, addToSignals: function (c, d) { if ("string" != typeof c || "" === c || null == d || "" === d) { return !1 } this.signals[c] instanceof Array || (this.signals[c] = []); this.signals[c].push(d); return this.hasSignals = !0 }, constructSignals: function () { var g = this.constructGAObj(), i = { _setAccount: function (b) { this.addToSignals("c_accountId", b) }, _setCustomVar: function (e, f, m, t) { "string" == typeof f && f.length && this.addToSignals("c_" + f, m) }, _addItem: function (m, t, u, w, x, y) { this.addToSignals("c_itemOrderId", m); this.addToSignals("c_itemSku", t); this.addToSignals("c_itemName", u); this.addToSignals("c_itemCategory", w); this.addToSignals("c_itemPrice", x); this.addToSignals("c_itemQuantity", y) }, _addTrans: function (t, u, w, x, y, z, A, B) { this.addToSignals("c_transOrderId", t); this.addToSignals("c_transAffiliation", u); this.addToSignals("c_transTotal", w); this.addToSignals("c_transTax", x); this.addToSignals("c_transShipping", y); this.addToSignals("c_transCity", z); this.addToSignals("c_transState", A); this.addToSignals("c_transCountry", B) }, _trackSocial: function (e, f, m, t) { this.addToSignals("c_socialNetwork", e); this.addToSignals("c_socialAction", f); this.addToSignals("c_socialTarget", m); this.addToSignals("c_socialPagePath", t) } }, n = this.tv, k, o, p, q, r, s; k = 0; for (o = n.length; k < o; k++) { if (p = n[k], g.hasOwnProperty(p) && i.hasOwnProperty(p) && (s = g[p], s instanceof Array)) { for (q = 0, r = s.length; q < r; q++) { i[p].apply(this, s[q]) } } } }, submit: function () { try { if ("" !== this.errorMessage) { return this.errorMessage } this.constructSignals(); return this.hasSignals ? (this.dil.api.signals(this.signals).submit(), "Signals sent: " + this.dil.helpers.convertObjectToKeyValuePairs(this.signals, "=", !0) + this.dil.log) : "No signals present" } catch (b) { return this.handle(b, "DIL.modules.GA.submit() caught error with message ", this.dil) } }, Stuffer: { LIMIT: 5, dil: null, cookieName: null, delimiter: null, errorMessage: "", handle: DIL.modules.helpers.handleModuleError, callback: null, v: function () { return !1 }, init: function (e, f, i) { try { this.callback = this.dil = null, this.errorMessage = "", e instanceof DIL ? (this.dil = e, this.v = this.dil.validators.isPopulatedString, this.cookieName = this.v(f) ? f : "aam_ga", this.delimiter = this.v(i) ? i : "|") : this.handle({ message: "dilInstance is not a valid instance of DIL" }, "DIL.modules.GA.Stuffer.init() error: ") } catch (g) { this.handle(g, "DIL.modules.GA.Stuffer.init() caught error with message ", this.dil) } finally { return this } }, process: function (g) { var i, n, k, o, p, q; q = !1; var r = 1; if (g === Object(g) && (i = g.stuff) && i instanceof Array && (n = i.length)) { for (g = 0; g < n; g++) { if ((k = i[g]) && k === Object(k) && (o = k.cn, p = k.cv, o == this.cookieName && this.v(p))) { q = !0; break } } } if (q) { i = p.split(this.delimiter); "undefined" == typeof window._gaq && (window._gaq = []); k = window._gaq; g = 0; for (n = i.length; g < n && !(q = i[g].split("="), p = q[0], q = q[1], this.v(p) && this.v(q) && k.push(["_setCustomVar", r++, p, q, 1]), r > this.LIMIT) ; g++) { } this.errorMessage = 1 < r ? "No errors - stuffing successful" : "No valid values to stuff" } else { this.errorMessage = "Cookie name and value not found in json" } if ("function" == typeof this.callback) { return this.callback() } }, submit: function () { try { var c = this; if ("" !== this.errorMessage) { return this.errorMessage } this.dil.api.afterResult(function (a) { c.process(a) }).submit(); return "DIL.modules.GA.Stuffer.submit() successful" } catch (d) { return this.handle(d, "DIL.modules.GA.Stuffer.submit() caught error with message ", this.dil) } } } }; DIL.modules.Peer39 = { aid: "", dil: null, optionals: null, errorMessage: "", calledBack: !1, script: null, scriptsSent: [], returnedData: [], handle: DIL.modules.helpers.handleModuleError, init: function (g, i, m) { try { this.dil = null; this.errorMessage = ""; this.calledBack = !1; this.optionals = m === Object(m) ? m : {}; m = { name: "DIL Peer39 Module Error" }; var k = [], n = ""; this.isSecurePageButNotEnabled(document.location.protocol) && (n = "Module has not been enabled for a secure page", k.push(n), m.message = n, DIL.errorModule.handleError(m)); i instanceof DIL ? (this.dil = i, m.partner = this.dil.api.getPartner()) : (n = "dilInstance is not a valid instance of DIL", k.push(n), m.message = n, DIL.errorModule.handleError(m)); "string" == typeof g && g.length ? this.aid = g : (n = "aid is not a string or is empty", k.push(n), m.message = n, DIL.errorModule.handleError(m)); this.errorMessage = k.join("\n") } catch (o) { this.handle(o, "DIL.modules.Peer39.init() caught error with message ", this.dil) } finally { return this } }, isSecurePageButNotEnabled: function (b) { return "https:" == b && !0 !== this.optionals.enableHTTPS ? !0 : !1 }, constructSignals: function () { var c = this, e = this.constructScript(), f = DIL.variables.scriptNodeList[0]; window["afterFinished_" + this.aid] = function () { try { var a = c.processData(p39_KVP_Short("c_p", "|").split("|")); a.hasSignals && c.dil.api.signals(a.signals).submit() } catch (g) { } finally { c.calledBack = !0, "function" == typeof c.optionals.afterResult && c.optionals.afterResult() } }; f.parentNode.insertBefore(e, f); this.scriptsSent.push(e); return "Request sent to Peer39" }, processData: function (g) { var i, m, k, n, o = {}, p = !1; this.returnedData.push(g); if (g instanceof Array) { for (i = 0, m = g.length; i < m; i++) { k = g[i].split("="), n = k[0], k = k[1], n && isFinite(k) && !isNaN(parseInt(k, 10)) && (o[n] instanceof Array || (o[n] = []), o[n].push(k), p = !0) } } return { hasSignals: p, signals: o } }, constructScript: function () { var e = document.createElement("script"), f = this.optionals, i = f.scriptId, g = f.scriptSrc, f = f.scriptParams; e.id = "string" == typeof i && i.length ? i : "peer39ScriptLoader"; e.type = "text/javascript"; "string" == typeof g && g.length ? e.src = g : (e.src = (this.dil.constants.IS_HTTPS ? "https:" : "http:") + "//stags.peer39.net/" + this.aid + "/trg_" + this.aid + ".js", "string" == typeof f && f.length && (e.src += "?" + f)); return e }, submit: function () { try { return "" !== this.errorMessage ? this.errorMessage : this.constructSignals() } catch (b) { return this.handle(b, "DIL.modules.Peer39.submit() caught error with message ", this.dil) } } }; function AppMeasurement() { var q = this; q.version = "1.4.1"; var x = window; if (!x.s_c_in) { x.s_c_il = [], x.s_c_in = 0 } q._il = x.s_c_il; q._in = x.s_c_in; q._il[q._in] = q; x.s_c_in++; q._c = "s_c"; var b = x.sb; b || (b = null); var c = x, a, e; try { a = c.parent; for (e = c.location; a && a.location && e && "" + a.location != "" + e && c.location && "" + a.location != "" + c.location && a.location.host == e.host;) { c = a, a = c.parent } } catch (f) { } q.eb = function (k) { try { console.log(k) } catch (i) { } }; q.ta = function (i) { return "" + parseInt(i) == "" + i }; q.replace = function (m, i, k) { if (!m || m.indexOf(i) < 0) { return m } return m.split(i).join(k) }; q.escape = function (k) { var i, m; if (!k) { return k } k = encodeURIComponent(k); for (i = 0; i < 7; i++) { m = "+~!*()'".substring(i, i + 1), k.indexOf(m) >= 0 && (k = q.replace(k, m, "%" + m.charCodeAt(0).toString(16).toUpperCase())) } return k }; q.unescape = function (k) { if (!k) { return k } k = k.indexOf("+") >= 0 ? q.replace(k, "+", " ") : k; try { return decodeURIComponent(k) } catch (i) { } return unescape(k) }; q.Va = function () { var k = x.location.hostname, i = q.fpCookieDomainPeriods, m; if (!i) { i = q.cookieDomainPeriods } if (k && !q.cookieDomain && !/^[0-9.]+$/.test(k) && (i = i ? parseInt(i) : 2, i = i > 2 ? i : 2, m = k.lastIndexOf("."), m >= 0)) { for (; m >= 0 && i > 1;) { m = k.lastIndexOf(".", m - 1), i-- } q.cookieDomain = m > 0 ? k.substring(m) : k } return q.cookieDomain }; q.c_r = q.cookieRead = function (k) { k = q.escape(k); var i = " " + q.d.cookie, m = i.indexOf(" " + k + "="), n = m < 0 ? m : i.indexOf(";", m); k = m < 0 ? "" : q.unescape(i.substring(m + 2 + k.length, n < 0 ? i.length : n)); return k != "[[B]]" ? k : "" }; q.c_w = q.cookieWrite = function (k, i, m) { var o = q.Va(), n = q.cookieLifetime, p; i = "" + i; n = n ? ("" + n).toUpperCase() : ""; m && n != "SESSION" && n != "NONE" && ((p = i != "" ? parseInt(n ? n : 0) : -60) ? (m = new Date, m.setTime(m.getTime() + p * 1000)) : m == 1 && (m = new Date, p = m.getYear(), m.setYear(p + 5 + (p < 1900 ? 1900 : 0)))); if (k && n != "NONE") { return q.d.cookie = k + "=" + q.escape(i != "" ? i : "[[B]]") + "; path=/;" + (m && n != "SESSION" ? " expires=" + m.toGMTString() + ";" : "") + (o ? " domain=" + o + ";" : ""), q.cookieRead(k) == i } return 0 }; q.C = []; q.B = function (k, i, m) { if (q.ma) { return 0 } if (!q.maxDelay) { q.maxDelay = 250 } var o = 0, n = (new Date).getTime() + q.maxDelay, p = q.d.qb, r = ["webkitvisibilitychange", "visibilitychange"]; if (!p) { p = q.d.rb } if (p && p == "prerender") { if (!q.X) { q.X = 1; for (m = 0; m < r.length; m++) { q.d.addEventListener(r[m], function () { var s = q.d.qb; if (!s) { s = q.d.rb } if (s == "visible") { q.X = 0, q.delayReady() } }) } } o = 1; n = 0 } else { m || q.q("_d") && (o = 1) } o && (q.C.push({ m: k, a: i, t: n }), q.X || setTimeout(q.delayReady, q.maxDelay)); return o }; q.delayReady = function () { var k = (new Date).getTime(), i = 0, m; for (q.q("_d") && (i = 1) ; q.C.length > 0;) { m = q.C.shift(); if (i && !m.t && m.t > k) { q.C.unshift(m); setTimeout(q.delayReady, parseInt(q.maxDelay / 2)); break } q.ma = 1; q[m.m].apply(q, m.a); q.ma = 0 } }; q.setAccount = q.sa = function (k) { var i, m; if (!q.B("setAccount", arguments)) { if (q.account = k, q.allAccounts) { i = q.allAccounts.concat(k.split(",")); q.allAccounts = []; i.sort(); for (m = 0; m < i.length; m++) { (m == 0 || i[m - 1] != i[m]) && q.allAccounts.push(i[m]) } } else { q.allAccounts = k.split(",") } } }; q.foreachVar = function (k, i) { var m, o, n, p, r = ""; n = o = ""; if (q.lightProfileID) { m = q.H, (r = q.lightTrackVars) && (r = "," + r + "," + q.ba.join(",") + ",") } else { m = q.c; if (q.pe || q.linkType) { if (r = q.linkTrackVars, o = q.linkTrackEvents, q.pe && (n = q.pe.substring(0, 1).toUpperCase() + q.pe.substring(1), q[n])) { r = q[n].pb, o = q[n].ob } } r && (r = "," + r + "," + q.z.join(",") + ","); o && r && (r += ",events,") } i && (i = "," + i + ","); for (o = 0; o < m.length; o++) { n = m[o], (p = q[n]) && (!r || r.indexOf("," + n + ",") >= 0) && (!i || i.indexOf("," + n + ",") >= 0) && k(n, p) } }; q.J = function (m, k, n, p, o) { var r = "", s, y, A, z, t = 0; m == "contextData" && (m = "c"); if (k) { for (s in k) { if (!Object.prototype[s] && (!o || s.substring(0, o.length) == o) && k[s] && (!n || n.indexOf("," + (p ? p + "." : "") + s + ",") >= 0)) { A = !1; if (t) { for (y = 0; y < t.length; y++) { s.substring(0, t[y].length) == t[y] && (A = !0) } } if (!A && (r == "" && (r += "&" + m + "."), y = k[s], o && (s = s.substring(o.length)), s.length > 0)) { if (A = s.indexOf("."), A > 0) { y = s.substring(0, A), A = (o ? o : "") + y + ".", t || (t = []), t.push(A), r += q.J(y, k, n, p, A) } else { if (typeof y == "boolean" && (y = y ? "true" : "false"), y) { if (p == "retrieveLightData" && o.indexOf(".contextData.") < 0) { switch (A = s.substring(0, 4), z = s.substring(4), s) { case "transactionID": s = "xact"; break; case "channel": s = "ch"; break; case "campaign": s = "v0"; break; default: q.ta(z) && (A == "prop" ? s = "c" + z : A == "eVar" ? s = "v" + z : A == "list" ? s = "l" + z : A == "hier" && (s = "h" + z, y = y.substring(0, 255))) } } r += "&" + q.escape(s) + "=" + q.escape(y) } } } } } r != "" && (r += "&." + m) } return r }; q.Xa = function () { var o = "", n, p, s, r, t, y, A, D, z = "", B = "", C = p = ""; if (q.lightProfileID) { n = q.H, (z = q.lightTrackVars) && (z = "," + z + "," + q.ba.join(",") + ",") } else { n = q.c; if (q.pe || q.linkType) { if (z = q.linkTrackVars, B = q.linkTrackEvents, q.pe && (p = q.pe.substring(0, 1).toUpperCase() + q.pe.substring(1), q[p])) { z = q[p].pb, B = q[p].ob } } z && (z = "," + z + "," + q.z.join(",") + ","); B && (B = "," + B + ",", z && (z += ",events,")); q.events2 && (C += (C != "" ? "," : "") + q.events2) } q.AudienceManagement && q.AudienceManagement.isReady() && (o += q.J("d", q.AudienceManagement.getEventCallConfigParams())); for (p = 0; p < n.length; p++) { r = n[p]; t = q[r]; s = r.substring(0, 4); y = r.substring(4); !t && r == "events" && C && (t = C, C = ""); if (t && (!z || z.indexOf("," + r + ",") >= 0)) { switch (r) { case "supplementalDataID": r = "sdid"; break; case "timestamp": r = "ts"; break; case "dynamicVariablePrefix": r = "D"; break; case "visitorID": r = "vid"; break; case "marketingCloudVisitorID": r = "mid"; break; case "analyticsVisitorID": r = "aid"; break; case "audienceManagerLocationHint": r = "aamlh"; break; case "audienceManagerBlob": r = "aamb"; break; case "authState": r = "as"; break; case "pageURL": r = "g"; if (t.length > 255) { q.pageURLRest = t.substring(255), t = t.substring(0, 255) } break; case "pageURLRest": r = "-g"; break; case "referrer": r = "r"; break; case "vmk": case "visitorMigrationKey": r = "vmt"; break; case "visitorMigrationServer": r = "vmf"; q.ssl && q.visitorMigrationServerSecure && (t = ""); break; case "visitorMigrationServerSecure": r = "vmf"; !q.ssl && q.visitorMigrationServer && (t = ""); break; case "charSet": r = "ce"; break; case "visitorNamespace": r = "ns"; break; case "cookieDomainPeriods": r = "cdp"; break; case "cookieLifetime": r = "cl"; break; case "variableProvider": r = "vvp"; break; case "currencyCode": r = "cc"; break; case "channel": r = "ch"; break; case "transactionID": r = "xact"; break; case "campaign": r = "v0"; break; case "latitude": r = "lat"; break; case "longitude": r = "lon"; break; case "resolution": r = "s"; break; case "colorDepth": r = "c"; break; case "javascriptVersion": r = "j"; break; case "javaEnabled": r = "v"; break; case "cookiesEnabled": r = "k"; break; case "browserWidth": r = "bw"; break; case "browserHeight": r = "bh"; break; case "connectionType": r = "ct"; break; case "homepage": r = "hp"; break; case "events": C && (t += (t != "" ? "," : "") + C); if (B) { y = t.split(","); t = ""; for (s = 0; s < y.length; s++) { A = y[s], D = A.indexOf("="), D >= 0 && (A = A.substring(0, D)), D = A.indexOf(":"), D >= 0 && (A = A.substring(0, D)), B.indexOf("," + A + ",") >= 0 && (t += (t ? "," : "") + y[s]) } } break; case "events2": t = ""; break; case "contextData": o += q.J("c", q[r], z, r); t = ""; break; case "lightProfileID": r = "mtp"; break; case "lightStoreForSeconds": r = "mtss"; q.lightProfileID || (t = ""); break; case "lightIncrementBy": r = "mti"; q.lightProfileID || (t = ""); break; case "retrieveLightProfiles": r = "mtsr"; break; case "deleteLightProfiles": r = "mtsd"; break; case "retrieveLightData": q.retrieveLightProfiles && (o += q.J("mts", q[r], z, r)); t = ""; break; default: q.ta(y) && (s == "prop" ? r = "c" + y : s == "eVar" ? r = "v" + y : s == "list" ? r = "l" + y : s == "hier" && (r = "h" + y, t = t.substring(0, 255))) } t && (o += "&" + r + "=" + (r.substring(0, 3) != "pev" ? q.escape(t) : t)) } r == "pev3" && q.g && (o += q.g) } return o }; q.u = function (k) { var i = k.tagName; if ("" + k.wb != "undefined" || "" + k.ib != "undefined" && ("" + k.ib).toUpperCase() != "HTML") { return "" } i = i && i.toUpperCase ? i.toUpperCase() : ""; i == "SHAPE" && (i = ""); i && ((i == "INPUT" || i == "BUTTON") && k.type && k.type.toUpperCase ? i = k.type.toUpperCase() : !i && k.href && (i = "A")); return i }; q.oa = function (o) { var i = o.href ? o.href : "", k, n, m; k = i.indexOf(":"); n = i.indexOf("?"); m = i.indexOf("/"); if (i && (k < 0 || n >= 0 && k > n || m >= 0 && k > m)) { n = o.protocol && o.protocol.length > 1 ? o.protocol : l.protocol ? l.protocol : "", k = l.pathname.lastIndexOf("/"), i = (n ? n + "//" : "") + (o.host ? o.host : l.host ? l.host : "") + (h.substring(0, 1) != "/" ? l.pathname.substring(0, k < 0 ? 0 : k) + "/" : "") + i } return i }; q.D = function (k) { var i = q.u(k), m, o, n = "", p = 0; if (i) { m = k.protocol; o = k.onclick; if (k.href && (i == "A" || i == "AREA") && (!o || !m || m.toLowerCase().indexOf("javascript") < 0)) { n = q.oa(k) } else { if (o) { n = q.replace(q.replace(q.replace(q.replace("" + o, "\r", ""), "\n", ""), "\t", ""), " ", ""), p = 2 } else { if (i == "INPUT" || i == "SUBMIT") { if (k.value) { n = k.value } else { if (k.innerText) { n = k.innerText } else { if (k.textContent) { n = k.textContent } } } p = 3 } else { if (k.src && i == "IMAGE") { n = k.src } } } } if (n) { return { id: n.substring(0, 100), type: p } } } return 0 }; q.tb = function (k) { for (var i = q.u(k), m = q.D(k) ; k && !m && i != "BODY";) { if (k = k.parentElement ? k.parentElement : k.parentNode) { i = q.u(k), m = q.D(k) } } if (!m || i == "BODY") { k = 0 } if (k && (i = k.onclick ? "" + k.onclick : "", i.indexOf(".tl(") >= 0 || i.indexOf(".trackLink(") >= 0)) { k = 0 } return k }; q.hb = function () { var o, n, p = q.linkObject, s = q.linkType, r = q.linkURL, t, w; q.ca = 1; if (!p) { q.ca = 0, p = q.clickObject } if (p) { o = q.u(p); for (n = q.D(p) ; p && !n && o != "BODY";) { if (p = p.parentElement ? p.parentElement : p.parentNode) { o = q.u(p), n = q.D(p) } } if (!n || o == "BODY") { p = 0 } if (p) { var z = p.onclick ? "" + p.onclick : ""; if (z.indexOf(".tl(") >= 0 || z.indexOf(".trackLink(") >= 0) { p = 0 } } } else { q.ca = 1 } !r && p && (r = q.oa(p)); r && !q.linkLeaveQueryString && (t = r.indexOf("?"), t >= 0 && (r = r.substring(0, t))); if (!s && r) { var y = 0, A = 0, B; if (q.trackDownloadLinks && q.linkDownloadFileTypes) { z = r.toLowerCase(); t = z.indexOf("?"); w = z.indexOf("#"); t >= 0 ? w >= 0 && w < t && (t = w) : t = w; t >= 0 && (z = z.substring(0, t)); t = q.linkDownloadFileTypes.toLowerCase().split(","); for (w = 0; w < t.length; w++) { (B = t[w]) && z.substring(z.length - (B.length + 1)) == "." + B && (s = "d") } } if (q.trackExternalLinks && !s && (z = r.toLowerCase(), q.ra(z))) { if (!q.linkInternalFilters) { q.linkInternalFilters = x.location.hostname } t = 0; q.linkExternalFilters ? (t = q.linkExternalFilters.toLowerCase().split(","), y = 1) : q.linkInternalFilters && (t = q.linkInternalFilters.toLowerCase().split(",")); if (t) { for (w = 0; w < t.length; w++) { B = t[w], z.indexOf(B) >= 0 && (A = 1) } A ? y && (s = "e") : y || (s = "e") } } } q.linkObject = p; q.linkURL = r; q.linkType = s; if (q.trackClickMap || q.trackInlineStats) { if (q.g = "", p) { s = q.pageName; r = 1; p = p.sourceIndex; if (!s) { s = q.pageURL, r = 0 } if (x.s_objectID) { n.id = x.s_objectID, p = n.type = 1 } if (s && n && n.id && o) { q.g = "&pid=" + q.escape(s.substring(0, 255)) + (r ? "&pidt=" + r : "") + "&oid=" + q.escape(n.id.substring(0, 100)) + (n.type ? "&oidt=" + n.type : "") + "&ot=" + o + (p ? "&oi=" + p : "") } } } }; q.Ya = function () { var k = q.ca, i = q.linkType, m = q.linkURL, o = q.linkName; if (i && (m || o)) { i = i.toLowerCase(), i != "d" && i != "e" && (i = "o"), q.pe = "lnk_" + i, q.pev1 = m ? q.escape(m) : "", q.pev2 = o ? q.escape(o) : "", k = 1 } q.abort && (k = 0); if (q.trackClickMap || q.trackInlineStats) { i = {}; m = 0; var n = q.cookieRead("s_sq"), p = n ? n.split("&") : 0, r, s, t; n = 0; if (p) { for (r = 0; r < p.length; r++) { s = p[r].split("="), o = q.unescape(s[0]).split(","), s = q.unescape(s[1]), i[s] = o } } o = q.account.split(","); if (k || q.g) { k && !q.g && (n = 1); for (s in i) { if (!Object.prototype[s]) { for (r = 0; r < o.length; r++) { n && (t = i[s].join(","), t == q.account && (q.g += (s.charAt(0) != "&" ? "&" : "") + s, i[s] = [], m = 1)); for (p = 0; p < i[s].length; p++) { t = i[s][p], t == o[r] && (n && (q.g += "&u=" + q.escape(t) + (s.charAt(0) != "&" ? "&" : "") + s + "&u=0"), i[s].splice(p, 1), m = 1) } } } } k || (m = 1); if (m) { n = ""; r = 2; !k && q.g && (n = q.escape(o.join(",")) + "=" + q.escape(q.g), r = 1); for (s in i) { !Object.prototype[s] && r > 0 && i[s].length > 0 && (n += (n ? "&" : "") + q.escape(i[s].join(",")) + "=" + q.escape(s), r--) } q.cookieWrite("s_sq", n) } } } return k }; q.Za = function () { if (!q.nb) { var s = new Date, m = c.location, t, z, y = z = t = "", A = "", B = "", J = "1.2", C = q.cookieWrite("s_cc", "true", 0) ? "Y" : "N", D = "", F = ""; if (s.setUTCDate && (J = "1.3", (0).toPrecision && (J = "1.5", s = [], s.forEach))) { J = "1.6"; z = 0; t = {}; try { z = new Iterator(t), z.next && (J = "1.7", s.reduce && (J = "1.8", J.trim && (J = "1.8.1", Date.parse && (J = "1.8.2", Object.create && (J = "1.8.5"))))) } catch (G) { } } t = screen.width + "x" + screen.height; y = navigator.javaEnabled() ? "Y" : "N"; z = screen.pixelDepth ? screen.pixelDepth : screen.colorDepth; A = q.w.innerWidth ? q.w.innerWidth : q.d.documentElement.offsetWidth; B = q.w.innerHeight ? q.w.innerHeight : q.d.documentElement.offsetHeight; try { q.b.addBehavior("#default#homePage"), D = q.b.ub(m) ? "Y" : "N" } catch (H) { } try { q.b.addBehavior("#default#clientCaps"), F = q.b.connectionType } catch (I) { } q.resolution = t; q.colorDepth = z; q.javascriptVersion = J; q.javaEnabled = y; q.cookiesEnabled = C; q.browserWidth = A; q.browserHeight = B; q.connectionType = F; q.homepage = D; q.nb = 1 } }; q.I = {}; q.loadModule = function (k, i) { var m = q.I[k]; if (!m) { m = x["AppMeasurement_Module_" + k] ? new x["AppMeasurement_Module_" + k](q) : {}; q.I[k] = q[k] = m; m.Fa = function () { return m.Ja }; m.Ka = function (o) { if (m.Ja = o) { q[k + "_onLoad"] = o, q.B(k + "_onLoad", [q, m], 1) || o(q, m) } }; try { Object.defineProperty ? Object.defineProperty(m, "onLoad", { get: m.Fa, set: m.Ka }) : m._olc = 1 } catch (n) { m._olc = 1 } } i && (q[k + "_onLoad"] = i, q.B(k + "_onLoad", [q, m], 1) || i(q, m)) }; q.q = function (k) { var i, m; for (i in q.I) { if (!Object.prototype[i] && (m = q.I[i])) { if (m._olc && m.onLoad) { m._olc = 0, m.onLoad(q, m) } if (m[k] && m[k]()) { return 1 } } } return 0 }; q.bb = function () { var k = Math.floor(Math.random() * 10000000000000), i = q.visitorSampling, m = q.visitorSamplingGroup; m = "s_vsn_" + (q.visitorNamespace ? q.visitorNamespace : q.account) + (m ? "_" + m : ""); var n = q.cookieRead(m); if (i) { n && (n = parseInt(n)); if (!n) { if (!q.cookieWrite(m, k)) { return 0 } n = k } if (n % 10000 > v) { return 0 } } return 1 }; q.K = function (k, i) { var m, o, n, p, r, s; for (m = 0; m < 2; m++) { o = m > 0 ? q.ia : q.c; for (n = 0; n < o.length; n++) { if (p = o[n], (r = k[p]) || k["!" + p]) { if (!i && (p == "contextData" || p == "retrieveLightData") && q[p]) { for (s in q[p]) { r[s] || (r[s] = q[p][s]) } } q[p] = r } } } }; q.Aa = function (k, i) { var m, o, n, p; for (m = 0; m < 2; m++) { o = m > 0 ? q.ia : q.c; for (n = 0; n < o.length; n++) { p = o[n], k[p] = q[p], !i && !k[p] && (k["!" + p] = 1) } } }; q.Ua = function (A) { var m, n, p, o, r, t = 0, B, y = "", z = ""; if (A && A.length > 255 && (m = "" + A, n = m.indexOf("?"), n > 0 && (B = m.substring(n + 1), m = m.substring(0, n), o = m.toLowerCase(), p = 0, o.substring(0, 7) == "http://" ? p += 7 : o.substring(0, 8) == "https://" && (p += 8), n = o.indexOf("/", p), n > 0 && (o = o.substring(p, n), r = m.substring(n), m = m.substring(0, n), o.indexOf("google") >= 0 ? t = ",q,ie,start,search_key,word,kw,cd," : o.indexOf("yahoo.co") >= 0 && (t = ",p,ei,"), t && B)))) { if ((A = B.split("&")) && A.length > 1) { for (p = 0; p < A.length; p++) { o = A[p], n = o.indexOf("="), n > 0 && t.indexOf("," + o.substring(0, n) + ",") >= 0 ? y += (y ? "&" : "") + o : z += (z ? "&" : "") + o } y && z ? B = y + "&" + z : z = "" } n = 253 - (B.length - z.length) - m.length; A = m + (n > 0 ? r.substring(0, n) : "") + "?" + B } return A }; q.U = !1; q.O = !1; q.Ia = function (i) { q.marketingCloudVisitorID = i; q.O = !0; q.k() }; q.R = !1; q.L = !1; q.Ca = function (i) { q.analyticsVisitorID = i; q.L = !0; q.k() }; q.T = !1; q.N = !1; q.Ea = function (i) { q.audienceManagerLocationHint = i; q.N = !0; q.k() }; q.S = !1; q.M = !1; q.Da = function (i) { q.audienceManagerBlob = i; q.M = !0; q.k() }; q.isReadyToTrack = function () { var k = !0, i = q.visitor; if (i && i.isAllowed()) { if (!q.U && !q.marketingCloudVisitorID && i.getMarketingCloudVisitorID && (q.U = !0, q.marketingCloudVisitorID = i.getMarketingCloudVisitorID([q, q.Ia]), q.marketingCloudVisitorID)) { q.O = !0 } if (!q.R && !q.analyticsVisitorID && i.getAnalyticsVisitorID && (q.R = !0, q.analyticsVisitorID = i.getAnalyticsVisitorID([q, q.Ca]), q.analyticsVisitorID)) { q.L = !0 } if (!q.T && !q.audienceManagerLocationHint && i.getAudienceManagerLocationHint && (q.T = !0, q.audienceManagerLocationHint = i.getAudienceManagerLocationHint([q, q.Ea]), q.audienceManagerLocationHint)) { q.N = !0 } if (!q.S && !q.audienceManagerBlob && i.getAudienceManagerBlob && (q.S = !0, q.audienceManagerBlob = i.getAudienceManagerBlob([q, q.Da]), q.audienceManagerBlob)) { q.M = !0 } if (q.U && !q.O && !q.marketingCloudVisitorID || q.R && !q.L && !q.analyticsVisitorID || q.T && !q.N && !q.audienceManagerLocationHint || q.S && !q.M && !q.audienceManagerBlob) { k = !1 } } return k }; q.j = b; q.l = 0; q.callbackWhenReadyToTrack = function (k, i, m) { var n; n = {}; n.Oa = k; n.Na = i; n.La = m; if (q.j == b) { q.j = [] } q.j.push(n); if (q.l == 0) { q.l = setInterval(q.k, 100) } }; q.k = function () { var i; if (q.isReadyToTrack()) { if (q.l) { clearInterval(q.l), q.l = 0 } if (q.j != b) { for (; q.j.length > 0;) { i = q.j.shift(), i.Na.apply(i.Oa, i.La) } } } }; q.Ga = function (k) { var i, m, o = b, n = b; if (!q.isReadyToTrack()) { i = []; if (k != b) { for (m in o = {}, k) { o[m] = k[m] } } n = {}; q.Aa(n, !0); i.push(o); i.push(n); q.callbackWhenReadyToTrack(q, q.track, i); return !0 } return !1 }; q.Wa = function () { var k = q.cookieRead("s_fid"), i = "", m = "", o; o = 8; var n = 4; if (!k || k.indexOf("-") < 0) { for (k = 0; k < 16; k++) { o = Math.floor(Math.random() * o), i += "0123456789ABCDEF".substring(o, o + 1), o = Math.floor(Math.random() * n), m += "0123456789ABCDEF".substring(o, o + 1), o = n = 16 } k = i + "-" + m } q.cookieWrite("s_fid", k, 1) || (k = 0); return k }; q.t = q.track = function (k, i) { var m, o = new Date, n = "s" + Math.floor(o.getTime() / 10800000) % 10 + Math.floor(Math.random() * 10000000000000), p = o.getYear(); p = "t=" + q.escape(o.getDate() + "/" + o.getMonth() + "/" + (p < 1900 ? p + 1900 : p) + " " + o.getHours() + ":" + o.getMinutes() + ":" + o.getSeconds() + " " + o.getDay() + " " + o.getTimezoneOffset()); if (q.visitor) { if (q.visitor.getAuthState) { q.authState = q.visitor.getAuthState() } if (!q.supplementalDataID && q.visitor.getSupplementalDataID) { q.supplementalDataID = q.visitor.getSupplementalDataID("AppMeasurement:" + q._in, q.expectSupplementalData ? !1 : !0) } } q.q("_s"); if (!q.B("track", arguments)) { if (!q.Ga(k)) { i && q.K(i); k && (m = {}, q.Aa(m, 0), q.K(k)); if (q.bb()) { if (!q.analyticsVisitorID && !q.marketingCloudVisitorID) { q.fid = q.Wa() } q.hb(); q.usePlugins && q.doPlugins && q.doPlugins(q); if (q.account) { if (!q.abort) { if (q.trackOffline && !q.timestamp) { q.timestamp = Math.floor(o.getTime() / 1000) } o = x.location; if (!q.pageURL) { q.pageURL = o.href ? o.href : o } if (!q.referrer && !q.Ba) { q.referrer = c.document.referrer, q.Ba = 1 } q.referrer = q.Ua(q.referrer); q.q("_g") } if (q.Ya() && !q.abort) { q.Za(), p += q.Xa(), q.gb(n, p), q.q("_t"), q.referrer = "" } } } k && q.K(m, 1) } q.abort = q.supplementalDataID = q.timestamp = q.pageURLRest = q.linkObject = q.clickObject = q.linkURL = q.linkName = q.linkType = x.vb = q.pe = q.pev1 = q.pev2 = q.pev3 = q.g = 0 } }; q.tl = q.trackLink = function (k, i, m, o, n) { q.linkObject = k; q.linkType = i; q.linkName = m; if (n) { q.i = k, q.p = n } return q.track(o) }; q.trackLight = function (k, i, m, n) { q.lightProfileID = k; q.lightStoreForSeconds = i; q.lightIncrementBy = m; return q.track(n) }; q.clearVars = function () { var k, i; for (k = 0; k < q.c.length; k++) { if (i = q.c[k], i.substring(0, 4) == "prop" || i.substring(0, 4) == "eVar" || i.substring(0, 4) == "hier" || i.substring(0, 4) == "list" || i == "channel" || i == "events" || i == "eventList" || i == "products" || i == "productList" || i == "purchaseID" || i == "transactionID" || i == "state" || i == "zip" || i == "campaign") { q[i] = void 0 } } }; q.tagContainerMarker = ""; q.gb = function (k, i) { var m, o = q.trackingServer; m = ""; var n = q.dc, p = "sc.", r = q.visitorNamespace; if (o) { if (q.trackingServerSecure && q.ssl) { o = q.trackingServerSecure } } else { if (!r) { r = q.account, o = r.indexOf(","), o >= 0 && (r = r.substring(0, o)), r = r.replace(/[^A-Za-z0-9]/g, "") } m || (m = "2o7.net"); n = n ? ("" + n).toLowerCase() : "d1"; m == "2o7.net" && (n == "d1" ? n = "112" : n == "d2" && (n = "122"), p = ""); o = r + "." + n + "." + p + m } m = q.ssl ? "https://" : "http://"; n = q.AudienceManagement && q.AudienceManagement.isReady(); m += o + "/b/ss/" + q.account + "/" + (q.mobile ? "5." : "") + (n ? "10" : "1") + "/JS-" + q.version + (q.mb ? "T" : "") + (q.tagContainerMarker ? "-" + q.tagContainerMarker : "") + "/" + k + "?AQB=1&ndh=1&pf=1&" + (n ? "callback=s_c_il[" + q._in + "].AudienceManagement.passData&" : "") + i + "&AQE=1"; q.Sa(m); q.Y() }; q.Sa = function (i) { q.e || q.$a(); q.e.push(i); q.aa = q.r(); q.za() }; q.$a = function () { q.e = q.cb(); if (!q.e) { q.e = [] } }; q.cb = function () { var k, i; if (q.fa()) { try { (i = x.localStorage.getItem(q.da())) && (k = x.JSON.parse(i)) } catch (m) { } return k } }; q.fa = function () { var i = !0; if (!q.trackOffline || !q.offlineFilename || !x.localStorage || !x.JSON) { i = !1 } return i }; q.pa = function () { var i = 0; if (q.e) { i = q.e.length } q.v && i++; return i }; q.Y = function () { if (!q.v) { if (q.qa = b, q.ea) { q.aa > q.G && q.xa(q.e), q.ha(500) } else { var i = q.Ma(); if (i > 0) { q.ha(i) } else { if (i = q.na()) { q.v = 1, q.fb(i), q.jb(i) } } } } }; q.ha = function (i) { if (!q.qa) { i || (i = 0), q.qa = setTimeout(q.Y, i) } }; q.Ma = function () { var i; if (!q.trackOffline || q.offlineThrottleDelay <= 0) { return 0 } i = q.r() - q.wa; if (q.offlineThrottleDelay < i) { return 0 } return q.offlineThrottleDelay - i }; q.na = function () { if (q.e.length > 0) { return q.e.shift() } }; q.fb = function (k) { if (q.debugTracking) { var i = "AppMeasurement Debug: " + k; k = k.split("&"); var m; for (m = 0; m < k.length; m++) { i += "\n\t" + q.unescape(k[m]) } q.eb(i) } }; q.Ha = function () { return q.marketingCloudVisitorID || q.analyticsVisitorID }; q.Q = !1; var d; try { d = JSON.parse('{"x":"y"}') } catch (g) { d = null } d && d.x == "y" ? (q.Q = !0, q.P = function (i) { return JSON.parse(i) }) : x.$ && x.$.parseJSON ? (q.P = function (i) { return x.$.parseJSON(i) }, q.Q = !0) : q.P = function () { return null }; q.jb = function (k) { var i, m, o; if (q.Ha() && k.length > 2047 && (typeof XMLHttpRequest != "undefined" && (i = new XMLHttpRequest, "withCredentials" in i ? m = 1 : i = 0), !i && typeof XDomainRequest != "undefined" && (i = new XDomainRequest, m = 2), i && q.AudienceManagement && q.AudienceManagement.isReady())) { q.Q ? i.ja = !0 : i = 0 } !i && q.ab && (k = k.substring(0, 2047)); if (!i && q.d.createElement && q.AudienceManagement && q.AudienceManagement.isReady() && (i = q.d.createElement("SCRIPT")) && "async" in i) { (o = (o = q.d.getElementsByTagName("HEAD")) && o[0] ? o[0] : q.d.body) ? (i.type = "text/javascript", i.setAttribute("async", "async"), m = 3) : i = 0 } if (!i) { i = new Image, i.alt = "" } i.la = function () { try { if (q.ga) { clearTimeout(q.ga), q.ga = 0 } if (i.timeout) { clearTimeout(i.timeout), i.timeout = 0 } } catch (r) { } }; i.onload = i.lb = function () { i.la(); q.Ra(); q.V(); q.v = 0; q.Y(); if (i.ja) { i.ja = !1; try { var r = q.P(i.responseText); AudienceManagement.passData(r) } catch (s) { } } }; i.onabort = i.onerror = i.Ta = function () { i.la(); (q.trackOffline || q.ea) && q.v && q.e.unshift(q.Qa); q.v = 0; q.aa > q.G && q.xa(q.e); q.V(); q.ha(500) }; i.onreadystatechange = function () { i.readyState == 4 && (i.status == 200 ? i.lb() : i.Ta()) }; q.wa = q.r(); if (m == 1 || m == 2) { var n = k.indexOf("?"); o = k.substring(0, n); n = k.substring(n + 1); n = n.replace(/&callback=[a-zA-Z0-9_.\[\]]+/, ""); m == 1 ? (i.open("POST", o, !0), i.send(n)) : m == 2 && (i.open("POST", o), i.send(n)) } else { if (i.src = k, m == 3) { if (q.ua) { try { o.removeChild(q.ua) } catch (p) { } } o.firstChild ? o.insertBefore(i, o.firstChild) : o.appendChild(i); q.ua = q.Pa } } if (i.abort) { q.ga = setTimeout(i.abort, 5000) } q.Qa = k; q.Pa = x["s_i_" + q.replace(q.account, ",", "_")] = i; if (q.useForcedLinkTracking && q.A || q.p) { if (!q.forcedLinkTrackingTimeout) { q.forcedLinkTrackingTimeout = 250 } q.W = setTimeout(q.V, q.forcedLinkTrackingTimeout) } }; q.Ra = function () { if (q.fa() && !(q.va > q.G)) { try { x.localStorage.removeItem(q.da()), q.va = q.r() } catch (i) { } } }; q.xa = function (k) { if (q.fa()) { q.za(); try { x.localStorage.setItem(q.da(), x.JSON.stringify(k)), q.G = q.r() } catch (i) { } } }; q.za = function () { if (q.trackOffline) { if (!q.offlineLimit || q.offlineLimit <= 0) { q.offlineLimit = 10 } for (; q.e.length > q.offlineLimit;) { q.na() } } }; q.forceOffline = function () { q.ea = !0 }; q.forceOnline = function () { q.ea = !1 }; q.da = function () { return q.offlineFilename + "-" + q.visitorNamespace + q.account }; q.r = function () { return (new Date).getTime() }; q.ra = function (i) { i = i.toLowerCase(); if (i.indexOf("#") != 0 && i.indexOf("about:") != 0 && i.indexOf("opera:") != 0 && i.indexOf("javascript:") != 0) { return !0 } return !1 }; q.setTagContainer = function (k) { var i, m, n; q.mb = k; for (i = 0; i < q._il.length; i++) { if ((m = q._il[i]) && m._c == "s_l" && m.tagContainerName == k) { q.K(m); if (m.lmq) { for (i = 0; i < m.lmq.length; i++) { n = m.lmq[i], q.loadModule(n.n) } } if (m.ml) { for (n in m.ml) { if (q[n]) { for (i in k = q[n], n = m.ml[n], n) { if (!Object.prototype[i] && (typeof n[i] != "function" || ("" + n[i]).indexOf("s_c_il") < 0)) { k[i] = n[i] } } } } } if (m.mmq) { for (i = 0; i < m.mmq.length; i++) { n = m.mmq[i], q[n.m] && (k = q[n.m], k[n.f] && typeof k[n.f] == "function" && (n.a ? k[n.f].apply(k, n.a) : k[n.f].apply(k))) } } if (m.tq) { for (i = 0; i < m.tq.length; i++) { q.track(m.tq[i]) } } m.s = q; break } } }; q.Util = { urlEncode: q.escape, urlDecode: q.unescape, cookieRead: q.cookieRead, cookieWrite: q.cookieWrite, getQueryParam: function (k, i, m) { var n; i || (i = q.pageURL ? q.pageURL : x.location); m || (m = "&"); if (k && i && (i = "" + i, n = i.indexOf("?"), n >= 0 && (i = m + i.substring(n + 1) + m, n = i.indexOf(m + k + "="), n >= 0 && (i = i.substring(n + m.length + k.length + 1), n = i.indexOf(m), n >= 0 && (i = i.substring(0, n)), i.length > 0)))) { return q.unescape(i) } return "" } }; q.z = ["supplementalDataID", "timestamp", "dynamicVariablePrefix", "visitorID", "marketingCloudVisitorID", "analyticsVisitorID", "audienceManagerLocationHint", "authState", "fid", "vmk", "visitorMigrationKey", "visitorMigrationServer", "visitorMigrationServerSecure", "charSet", "visitorNamespace", "cookieDomainPeriods", "fpCookieDomainPeriods", "cookieLifetime", "pageName", "pageURL", "referrer", "contextData", "currencyCode", "lightProfileID", "lightStoreForSeconds", "lightIncrementBy", "retrieveLightProfiles", "deleteLightProfiles", "retrieveLightData", "pe", "pev1", "pev2", "pev3", "pageURLRest"]; q.c = q.z.concat(["purchaseID", "variableProvider", "channel", "server", "pageType", "transactionID", "campaign", "state", "zip", "events", "events2", "products", "audienceManagerBlob", "tnt"]); q.ba = ["timestamp", "charSet", "visitorNamespace", "cookieDomainPeriods", "cookieLifetime", "contextData", "lightProfileID", "lightStoreForSeconds", "lightIncrementBy"]; q.H = q.ba.slice(0); q.ia = ["account", "allAccounts", "debugTracking", "visitor", "trackOffline", "offlineLimit", "offlineThrottleDelay", "offlineFilename", "usePlugins", "doPlugins", "configURL", "visitorSampling", "visitorSamplingGroup", "linkObject", "clickObject", "linkURL", "linkName", "linkType", "trackDownloadLinks", "trackExternalLinks", "trackClickMap", "trackInlineStats", "linkLeaveQueryString", "linkTrackVars", "linkTrackEvents", "linkDownloadFileTypes", "linkExternalFilters", "linkInternalFilters", "useForcedLinkTracking", "forcedLinkTrackingTimeout", "trackingServer", "trackingServerSecure", "ssl", "abort", "mobile", "dc", "lightTrackVars", "maxDelay", "expectSupplementalData", "AudienceManagement"]; for (a = 0; a <= 250; a++) { a < 76 && (q.c.push("prop" + a), q.H.push("prop" + a)), q.c.push("eVar" + a), q.H.push("eVar" + a), a < 6 && q.c.push("hier" + a), a < 4 && q.c.push("list" + a) } a = ["latitude", "longitude", "resolution", "colorDepth", "javascriptVersion", "javaEnabled", "cookiesEnabled", "browserWidth", "browserHeight", "connectionType", "homepage"]; q.c = q.c.concat(a); q.z = q.z.concat(a); q.ssl = x.location.protocol.toLowerCase().indexOf("https") >= 0; q.charSet = "UTF-8"; q.contextData = {}; q.offlineThrottleDelay = 0; q.offlineFilename = "AppMeasurement.offline"; q.wa = 0; q.aa = 0; q.G = 0; q.va = 0; q.linkDownloadFileTypes = "exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx"; q.w = x; q.d = x.document; try { q.ab = navigator.appName == "Microsoft Internet Explorer" } catch (u) { } q.V = function () { if (q.W) { x.clearTimeout(q.W), q.W = b } q.i && q.A && q.i.dispatchEvent(q.A); if (q.p) { if (typeof q.p == "function") { q.p() } else { if (q.i && q.i.href) { q.d.location = q.i.href } } } q.i = q.A = q.p = 0 }; q.ya = function () { q.b = q.d.body; if (q.b) { if (q.o = function (o) { var n, p, s, r, t; if (!(q.d && q.d.getElementById("cppXYctnr") || o && o["s_fe_" + q._in])) { if (q.ka) { if (q.useForcedLinkTracking) { q.b.removeEventListener("click", q.o, !1) } else { q.b.removeEventListener("click", q.o, !0); q.ka = q.useForcedLinkTracking = 0; return } } else { q.useForcedLinkTracking = 0 } q.clickObject = o.srcElement ? o.srcElement : o.target; try { if (q.clickObject && (!q.F || q.F != q.clickObject) && (q.clickObject.tagName || q.clickObject.parentElement || q.clickObject.parentNode)) { var w = q.F = q.clickObject; if (q.Z) { clearTimeout(q.Z), q.Z = 0 } q.Z = setTimeout(function () { if (q.F == w) { q.F = 0 } }, 10000); s = q.pa(); q.track(); if (s < q.pa() && q.useForcedLinkTracking && o.target) { for (r = o.target; r && r != q.b && r.tagName.toUpperCase() != "A" && r.tagName.toUpperCase() != "AREA";) { r = r.parentNode } if (r && (t = r.href, q.ra(t) || (t = 0), p = r.target, o.target.dispatchEvent && t && (!p || p == "_self" || p == "_top" || p == "_parent" || x.name && p == x.name))) { try { n = q.d.createEvent("MouseEvents") } catch (y) { n = new x.MouseEvent } if (n) { try { n.initMouseEvent("click", o.bubbles, o.cancelable, o.view, o.detail, o.screenX, o.screenY, o.clientX, o.clientY, o.ctrlKey, o.altKey, o.shiftKey, o.metaKey, o.button, o.relatedTarget) } catch (z) { n = 0 } if (n) { n["s_fe_" + q._in] = n.s_fe = 1, o.stopPropagation(), o.kb && o.kb(), o.preventDefault(), q.i = o.target, q.A = n } } } } } else { q.clickObject = 0 } } catch (A) { q.clickObject = 0 } } }, q.b && q.b.attachEvent) { q.b.attachEvent("onclick", q.o) } else { if (q.b && q.b.addEventListener) { if (navigator && (navigator.userAgent.indexOf("WebKit") >= 0 && q.d.createEvent || navigator.userAgent.indexOf("Firefox/2") >= 0 && x.MouseEvent)) { q.ka = 1, q.useForcedLinkTracking = 1, q.b.addEventListener("click", q.o, !0) } q.b.addEventListener("click", q.o, !1) } } } else { setTimeout(q.ya, 30) } }; q.ya() } function s_gi(q) { var t, b = window.s_c_il, c, a, e = q.split(","), f, d, g = 0; if (b) { for (c = 0; !g && c < b.length;) { t = b[c]; if (t._c == "s_c" && (t.account || t.oun)) { if (t.account && t.account == q) { g = 1 } else { a = t.account ? t.account : t.oun; a = t.allAccounts ? t.allAccounts : a.split(","); for (f = 0; f < e.length; f++) { for (d = 0; d < a.length; d++) { e[f] == a[d] && (g = 1) } } } } c++ } } g || (t = new AppMeasurement); t.setAccount ? t.setAccount(q) : t.sa && t.sa(q); return t } AppMeasurement.getInstance = s_gi; window.s_objectID || (window.s_objectID = 0); function s_pgicq() { var d = window, e = d.s_giq, b, c, a; if (e) { for (b = 0; b < e.length; b++) { c = e[b], a = s_gi(c.oun), a.setAccount(c.un), a.setTagContainer(c.tagContainerName) } } d.s_giq = 0 } s_pgicq(); function AppMeasurement_Module_Integrate(b) { var a = this; a.s = b; var c = window; if (!c.s_c_in) { c.s_c_il = [], c.s_c_in = 0 } a._il = c.s_c_il; a._in = c.s_c_in; a._il[a._in] = a; c.s_c_in++; a._c = "s_m"; a.list = []; a.add = function (f, e) { var d; e || (e = "s_Integrate_" + f); c[e] || (c[e] = {}); d = a[f] = c[e]; d.a = f; d.e = a; d._c = 0; d._d = 0; d.disable == void 0 && (d.disable = 0); d.get = function (i, k) { var m = document, n = m.getElementsByTagName("HEAD"), o; if (!d.disable && (k || (v = "s_" + a._in + "_Integrate_" + d.a + "_get_" + d._c), d._c++, d.VAR = v, d.CALLBACK = "s_c_il[" + a._in + "]." + d.a + ".callback", d.delay(), n = n && n.length > 0 ? n[0] : m.body)) { try { o = m.createElement("SCRIPT"); o.type = "text/javascript"; o.setAttribute("async", "async"); o.src = a.c(d, i); if (i.indexOf("[CALLBACK]") < 0) { o.onload = o.onreadystatechange = function () { d.callback(c[v]) } } n.firstChild ? n.insertBefore(o, n.firstChild) : n.appendChild(o) } catch (p) { } } }; d.callback = function (g) { var i; if (g) { for (i in g) { Object.prototype[i] || (d[i] = g[i]) } } d.ready() }; d.beacon = function (g) { var i = "s_i_" + a._in + "_Integrate_" + d.a + "_" + d._c; if (!d.disable) { d._c++, i = c[i] = new Image, i.src = a.c(d, g) } }; d.script = function (g) { d.get(g, 1) }; d.delay = function () { d._d++ }; d.ready = function () { d._d--; d.disable || b.delayReady() }; a.list.push(f) }; a._g = function (f) { var e, d = (f ? "use" : "set") + "Vars"; for (f = 0; f < a.list.length; f++) { if ((e = a[a.list[f]]) && !e.disable && e[d]) { try { e[d](b, e) } catch (g) { } } } }; a._t = function () { a._g(1) }; a._d = function () { var e, d; for (e = 0; e < a.list.length; e++) { if ((d = a[a.list[e]]) && !d.disable && d._d > 0) { return 1 } } return 0 }; a.c = function (n, g) { var f, o, k, i; g.toLowerCase().substring(0, 4) != "http" && (g = "http://" + g); b.ssl && (g = b.replace(g, "http:", "https:")); n.RAND = Math.floor(Math.random() * 10000000000000); for (f = 0; f >= 0;) { f = g.indexOf("[", f), f >= 0 && (o = g.indexOf("]", f), o > f && (k = g.substring(f + 1, o), k.length > 2 && k.substring(0, 2) == "s." ? (i = b[k.substring(2)]) || (i = "") : (i = "" + n[k], i != n[k] && parseFloat(i) != n[k] && (k = 0)), k && (g = g.substring(0, f) + encodeURIComponent(i) + g.substring(o + 1)), f = o)) } return g } } var j = null; function E() { return function () { } } function AppMeasurement_Module_Media(c) { var b = this; b.s = c; var d = window; if (!d.s_c_in) { d.s_c_il = [], d.s_c_in = 0 } b._il = d.s_c_il; b._in = d.s_c_in; b._il[b._in] = b; d.s_c_in++; b._c = "s_m"; b.list = []; b.open = function (n, o, m, q) { var k = {}, f = new Date, i = "", p; o || (o = -1); if (n && m) { if (!b.list) { b.list = {} } b.list[n] && b.close(n); if (q && q.id) { i = q.id } if (i) { for (p in b.list) { !Object.prototype[p] && b.list[p] && b.list[p].Rf == i && b.close(b.list[p].name) } } k.name = n; k.length = o; k.xc = 0; k.U = 0; k.playerName = b.playerName ? b.playerName : m; k.Rf = i; k.ce = 0; k.aa = 0; k.timestamp = Math.floor(f.getTime() / 1000); k.za = 0; k.wc = k.timestamp; k.T = -1; k.Dc = ""; k.ha = -1; k.Ic = 0; k.Qd = {}; k.Mc = 0; k.Ja = 0; k.V = ""; k.Ob = 0; k.Yd = 0; k.Cc = 0; k.Kc = 0; k.xa = !1; k.Jb = ""; k.yc = ""; k.zc = 0; k.sc = !1; k.na = ""; k.complete = 0; k.Af = 0; k.Hb = 0; k.Ib = 0; b.list[n] = k; k.Ud = !1 } }; b.openAd = function (o, q, n, s, m, i, k, r) { var p = {}; b.open(o, q, n, r); if (p = b.list[o]) { p.xa = !0, p.Jb = s, p.yc = m, p.zc = i, p.na = k } }; b.Oe = function (f) { var i = b.list[f]; b.list[f] = 0; i && i.monitor && clearTimeout(i.monitor.O) }; b.close = function (f) { b.ja(f, 0, -1) }; b.play = function (k, m, i, n) { var f = b.ja(k, 1, m, i, n); if (f && !f.monitor) { f.monitor = {}, f.monitor.update = function () { f.za == 1 && b.ja(f.name, 3, -1); f.monitor.O = setTimeout(f.monitor.update, 1000) }, f.monitor.update() } }; b.click = function (f, i) { b.ja(f, 7, i) }; b.complete = function (f, i) { b.ja(f, 5, i) }; b.stop = function (f, i) { b.ja(f, 2, i) }; b.track = function (f) { b.ja(f, 4, -1) }; b.yf = function (q, s) { var p = "a.media.", u = q.linkTrackVars, n = q.linkTrackEvents, i = "m_i", k, t = q.contextData, r; if (s.xa) { p += "ad."; if (s.Jb) { t["a.media.name"] = s.Jb, t[p + "pod"] = s.yc, t[p + "podPosition"] = s.zc } if (!s.Mc) { t[p + "CPM"] = s.na } } if (s.sc) { t[p + "clicked"] = !0, s.sc = !1 } t["a.contentType"] = "video" + (s.xa ? "Ad" : ""); t["a.media.channel"] = b.channel; t[p + "name"] = s.name; t[p + "playerName"] = s.playerName; if (s.length > 0) { t[p + "length"] = s.length } t[p + "timePlayed"] = Math.floor(s.aa); Math.floor(s.aa) > 0 && (t[p + "timePlayed"] = Math.floor(s.aa)); if (!s.Mc) { t[p + "view"] = !0, i = "m_s", b.Heartbeat && b.Heartbeat.enabled && (i = s.xa ? b.__primetime ? "mspa_s" : "msa_s" : b.__primetime ? "msp_s" : "ms_s"), s.Mc = 1 } if (s.V) { t[p + "segmentNum"] = s.Ja; t[p + "segment"] = s.V; if (s.Ob > 0) { t[p + "segmentLength"] = s.Ob } s.Cc && s.aa > 0 && (t[p + "segmentView"] = !0) } if (!s.Af && s.complete) { t[p + "complete"] = !0, s.gg = 1 } if (s.Hb > 0) { t[p + "milestone"] = s.Hb } if (s.Ib > 0) { t[p + "offsetMilestone"] = s.Ib } if (u) { for (r in t) { Object.prototype[r] || (u += ",contextData." + r) } } k = t["a.contentType"]; q.pe = i; q.pev3 = k; var m, o; if (b.contextDataMapping) { if (!q.events2) { q.events2 = "" } u && (u += ",events"); for (r in b.contextDataMapping) { if (!Object.prototype[r]) { i = r.length > p.length && r.substring(0, p.length) == p ? r.substring(p.length) : ""; k = b.contextDataMapping[r]; if (typeof k == "string") { m = k.split(","); for (o = 0; o < m.length; o++) { k = m[o], r == "a.contentType" ? (u && (u += "," + k), q[k] = t[r]) : i == "view" || i == "segmentView" || i == "clicked" || i == "complete" || i == "timePlayed" || i == "CPM" ? (n && (n += "," + k), i == "timePlayed" || i == "CPM" ? t[r] && (q.events2 += (q.events2 ? "," : "") + k + "=" + t[r]) : t[r] && (q.events2 += (q.events2 ? "," : "") + k)) : i == "segment" && t[r + "Num"] ? (u && (u += "," + k), q[k] = t[r + "Num"] + ":" + t[r]) : (u && (u += "," + k), q[k] = t[r]) } } else { if (i == "milestones" || i == "offsetMilestones") { r = r.substring(0, r.length - 1), t[r] && b.contextDataMapping[r + "s"][t[r]] && (n && (n += "," + b.contextDataMapping[r + "s"][t[r]]), q.events2 += (q.events2 ? "," : "") + b.contextDataMapping[r + "s"][t[r]]) } } t[r] && (t[r] = 0); i == "segment" && t[r + "Num"] && (t[r + "Num"] = 0) } } } q.linkTrackVars = u; q.linkTrackEvents = n }; b.ja = function (x, D, w, K, s) { var i = {}, m = (new Date).getTime() / 1000, I, z, o = b.trackVars, u = b.trackEvents, A = b.trackSeconds, L = b.trackMilestones, N = b.trackOffsetMilestones, Q = b.segmentByMilestones, M = b.segmentByOffsetMilestones, O, P, R = 1, J = {}, H; if (!b.channel) { b.channel = b.s.w.location.hostname } if (i = x && b.list && b.list[x] ? b.list[x] : 0) { if (i.xa) { A = b.adTrackSeconds, L = b.adTrackMilestones, N = b.adTrackOffsetMilestones, Q = b.adSegmentByMilestones, M = b.adSegmentByOffsetMilestones } w < 0 && (w = i.za == 1 && i.wc > 0 ? m - i.wc + i.T : i.T); i.length > 0 && (w = w < i.length ? w : i.length); w < 0 && (w = 0); i.xc = w; if (i.length > 0) { i.U = i.xc / i.length * 100, i.U = i.U > 100 ? 100 : i.U } if (i.T < 0) { i.T = w } H = i.Ic; J.name = x; J.ad = i.xa; J.length = i.length; J.openTime = new Date; J.openTime.setTime(i.timestamp * 1000); J.offset = i.xc; J.percent = i.U; J.playerName = i.playerName; J.mediaEvent = i.ha < 0 ? "OPEN" : D == 1 ? "PLAY" : D == 2 ? "STOP" : D == 3 ? "MONITOR" : D == 4 ? "TRACK" : D == 5 ? "COMPLETE" : D == 7 ? "CLICK" : "CLOSE"; if (D > 2 || D != i.za && (D != 2 || i.za == 1)) { if (!s) { K = i.Ja, s = i.V } if (D) { if (D == 1) { i.T = w } if ((D <= 3 || D >= 5) && i.ha >= 0) { if (R = !1, o = u = "None", i.ha != w) { z = i.ha; if (z > w) { z = i.T, z > w && (z = w) } O = L ? L.split(",") : 0; if (i.length > 0 && O && w >= z) { for (P = 0; P < O.length; P++) { if ((I = O[P] ? parseFloat("" + O[P]) : 0) && z / i.length * 100 < I && i.U >= I) { R = !0, P = O.length, J.mediaEvent = "MILESTONE", i.Hb = J.milestone = I } } } if ((O = N ? N.split(",") : 0) && w >= z) { for (P = 0; P < O.length; P++) { if ((I = O[P] ? parseFloat("" + O[P]) : 0) && z < I && w >= I) { R = !0, P = O.length, J.mediaEvent = "OFFSET_MILESTONE", i.Ib = J.offsetMilestone = I } } } } } if (i.Yd || !s) { if (Q && L && i.length > 0) { if (O = L.split(",")) { O.push("100"); for (P = z = 0; P < O.length; P++) { if (I = O[P] ? parseFloat("" + O[P]) : 0) { if (i.U < I) { K = P + 1, s = "M:" + z + "-" + I, P = O.length } z = I } } } } else { if (M && N && (O = N.split(","))) { O.push("" + (i.length > 0 ? i.length : "E")); for (P = z = 0; P < O.length; P++) { if ((I = O[P] ? parseFloat("" + O[P]) : 0) || O[P] == "E") { if (w < I || O[P] == "E") { K = P + 1, s = "O:" + z + "-" + I, P = O.length } z = I } } } } if (s) { i.Yd = !0 } } if ((s || i.V) && s != i.V) { i.Kc = !0; if (!i.V) { i.Ja = K, i.V = s } i.ha >= 0 && (R = !0) } if ((D >= 2 || i.U >= 100) && i.T < w) { i.ce += w - i.T, i.aa += w - i.T } if (D <= 2 || D == 3 && !i.za) { i.Dc += (D == 1 || D == 3 ? "S" : "E") + Math.floor(w), i.za = D == 3 ? 1 : D } if (!R && i.ha >= 0 && D <= 3 && (A = A ? A : 0) && i.aa >= A) { R = !0, J.mediaEvent = "SECONDS" } i.wc = m; i.T = w } if (!D || D <= 3 && i.U >= 100) { i.za != 2 && (i.Dc += "E" + Math.floor(w)), D = 0, o = u = "None", J.mediaEvent = "CLOSE" } if (D == 7) { R = J.clicked = i.sc = !0 } if (D == 5 || b.completeByCloseOffset && (!D || i.U >= 100) && i.length > 0 && w >= i.length - b.completeCloseOffsetThreshold) { R = J.complete = i.complete = !0 } m = J.mediaEvent; m == "MILESTONE" ? m += "_" + J.milestone : m == "OFFSET_MILESTONE" && (m += "_" + J.offsetMilestone); i.Qd[m] ? J.eventFirstTime = !1 : (J.eventFirstTime = !0, i.Qd[m] = 1); J.event = J.mediaEvent; J.timePlayed = i.ce; J.segmentNum = i.Ja; J.segment = i.V; J.segmentLength = i.Ob; b.monitor && D != 4 && b.monitor(b.s, J); if (b.Heartbeat && b.Heartbeat.enabled) { J = []; J.push(i.name); if (!i.Ud) { i.Ud = !0, J.push(i.length), J.push(i.playerName), i.xa ? (J.push(i.Jb), J.push(i.yc), J.push(i.zc), J.push(i.na), b.Heartbeat.callMethodWhenReady("openAd", J)) : b.Heartbeat.callMethodWhenReady("open", J), J = [], J.push(i.name) } D == 0 ? b.Heartbeat.callMethodWhenReady("close", J) : (J.push(w), D == 1 ? (J.push(i.Ja), J.push(i.V), J.push(i.Ob), b.Heartbeat.callMethodWhenReady("play", J)) : D == 2 ? b.Heartbeat.callMethodWhenReady("stop", J) : D == 3 ? b.Heartbeat.callMethodWhenReady("monitor", J) : D == 5 ? b.Heartbeat.callMethodWhenReady("complete", J) : D == 7 && b.Heartbeat.callMethodWhenReady("click", J)); i.ha >= 0 && (R = !1) } D == 0 && b.Oe(x); if (R && i.Ic == H) { x = {}; x.contextData = {}; x.linkTrackVars = o; x.linkTrackEvents = u; if (!x.linkTrackVars) { x.linkTrackVars = "" } if (!x.linkTrackEvents) { x.linkTrackEvents = "" } b.yf(x, i); x.linkTrackVars || (x["!linkTrackVars"] = 1); x.linkTrackEvents || (x["!linkTrackEvents"] = 1); b.s.track(x); if (i.Kc) { i.Ja = K, i.V = s, i.Cc = !0, i.Kc = !1 } else { if (i.aa > 0) { i.Cc = !1 } } i.Dc = ""; i.Hb = i.Ib = 0; i.aa -= Math.floor(i.aa); i.ha = w; i.Ic++ } } } return i }; b.vf = function (m, n, k, o, i) { var f = 0; if (m && (!b.autoTrackMediaLengthRequired || n && n > 0)) { if (!b.list || !b.list[m]) { if (k == 1 || k == 3) { b.open(m, n, "HTML5 Video", i), f = 1 } } else { f = 1 } f && b.ja(m, k, o, -1, 0) } }; b.attach = function (i) { var k, f, m; if (i && i.tagName && i.tagName.toUpperCase() == "VIDEO") { if (!b.hb) { b.hb = function (n, e, g) { var p, o; if (b.autoTrack) { p = n.currentSrc; (o = n.duration) || (o = -1); if (g < 0) { g = n.currentTime } b.vf(p, o, e, g, n) } } } k = function () { b.hb(i, 1, -1) }; f = function () { b.hb(i, 1, -1) }; b.ra(i, "play", k); b.ra(i, "pause", f); b.ra(i, "seeking", f); b.ra(i, "seeked", k); b.ra(i, "ended", function () { b.hb(i, 0, -1) }); b.ra(i, "timeupdate", k); m = function () { !i.paused && !i.ended && !i.seeking && b.hb(i, 3, -1); setTimeout(m, 1000) }; m() } }; b.ra = function (i, f, e) { i.attachEvent ? i.attachEvent("on" + f, e) : i.addEventListener && i.addEventListener(f, e, !1) }; if (b.completeByCloseOffset == void 0) { b.completeByCloseOffset = 1 } if (b.completeCloseOffsetThreshold == void 0) { b.completeCloseOffsetThreshold = 1 } var a = new function (e) { this.Je = function (f) { this.s = f; this.enabled = !1; this.v = new this.Ka.Of.ne(f) }; this.open = function (i, f, k) { this.v.open(i, f, k) }; this.openAd = function (o, n, q, k, f, i, p) { this.v.openAd(o, n, q, k, f, i, p) }; this.close = function (f) { this.v.close(f) }; this.play = function (n, k, o, i, f) { this.v.play(n, k, o, i, f) }; this.monitor = function (f, i) { this.v.monitor(f, i) }; this.stop = function (f, i) { this.v.stop(f, i) }; this.click = function (f, i) { this.v.click(f, i) }; this.complete = function (f, i) { this.v.complete(f, i) }; this.setup = function (f) { this.v.Wf(f) }; this.bufferStart = function () { this.v.xf() }; this.bitrateChange = function (f) { this.v.wf(f) }; this.updateQoSInfo = function (i, k, f) { this.v.bg(i, k, f) }; this.adBreakStart = function (f) { this.v.sf(f) }; this.adBreakEnd = function () { this.v.rf() }; this.trackError = function (i, f, g) { this.v.$f(i, f, g) }; this.sessionComplete = function () { this.v.Uf() }; this.__setPsdkVersion = function (f) { this.v.Ke(f) }; (function (i) { if (typeof f === "undefined") { var f = {} } if (typeof g === "undefined") { var g = {} } g.event || (g.event = {}); g.a || (g.a = {}); g.H || (g.H = {}); g.bb || (g.bb = {}); g.M || (g.M = {}); (function (k) { k.extend = function (m, n) { function o() { this.constructor = m } for (var p in n) { n.hasOwnProperty(p) && (m[p] = n[p]) } o.prototype = n.prototype; m.prototype = new o; m.r = n.prototype; return m } })(f); (function (k) { k.Q = function (m, n) { var p = [], q; for (q in n) { n.hasOwnProperty(q) && typeof n[q] === "function" && p.push(q) } for (q = 0; q < p.length; q++) { var o = p[q]; m.prototype[o] = n[o] } } })(f); (function (k) { k.Md = { Pd: function () { this.ea && this.ea.apply(this, arguments); this.ea = j } } })(f); (function (k) { k.Oa = !1; k.P = { N: function (m) { this.Ua = !0; this.Ab = m }, jg: function () { this.Ua = !1 }, log: function (m) { k.Oa && this.Ua && window.console && window.console.log && window.console.log(this.Ab + m) }, info: function (m) { k.Oa && this.Ua && window.console && window.console.info && window.console.info(this.Ab + m) }, warn: function (m) { k.Oa && this.Ua && window.console && window.console.warn && window.console.warn(this.Ab + m) }, error: function (m) { if (k.Oa && this.Ua && window.console && window.console.error) { throw m = this.Ab + m, window.console.error(m), Error(m) } } } })(f); (function (m) { function k(n, o) { this.type = n; this.data = o } k.wb = "success"; k.Xb = "error"; m.S = k })(f); (function (m) { function k() { this.F = {} } k.prototype.addEventListener = function (n, o, p) { n && o && (this.F[n] = this.F[n] || [], this.F[n].push({ zf: o, Ld: p || window })) }; k.prototype.dispatchEvent = function (n) { if (n.type) { for (var o in this.F) { if (this.F.hasOwnProperty(o) && n.type === o) { var p = this.F[o]; for (o = 0; o < p.length; o++) { p[o].zf.call(p[o].Ld, n) } break } } } }; k.prototype.eb = function (n) { if (n) { var o, p; for (p in this.F) { if (this.F.hasOwnProperty(p)) { for (o = this.F[p].length - 1; o >= 0; o--) { this.F[p][o].Ld === n && this.F[p].splice(o, 1) } this.F[p].length || delete this.F[p] } } } else { this.F = {} } }; m.kd = k })(f); (function (n) { function k() { if (!k.prototype.Ta) { k.prototype.Ta = new m } return k.prototype.Ta } var m = n.kd; n.ca = k })(f); (function (n) { function k() { } function m() { m.r.constructor.call(this) } var p = n.S, o = n.kd; k.ld = "GET"; n.extend(m, o); m.prototype.Cf = function (q) { q.I = new window.XMLHttpRequest; if (!("withCredentials" in q.I) && (q.I = typeof window.XDomainRequest !== "undefined" ? new window.XDomainRequest : j, q.I)) { var r = this; q.I.onreadystatechange = function () { if (q.I.readyState === 4) { var s = {}; s[m.pd] = q.I.status; q.I.status >= 200 && q.I.status < 400 ? (s[m.od] = q.I.responseText, s[m.qb] = r, r.dispatchEvent(new n.S(p.wb, s))) : r.dispatchEvent(new n.S(p.Xb, s)) } } } }; m.Eb = j; m.prototype.Mf = function (q) { if (!m.Eb) { m.Eb = new Image, m.Eb.alt = "" } m.Eb.src = q.url; q = {}; q[m.pd] = 200; q[m.od] = ""; q[m.qb] = this; this.dispatchEvent(new n.S(p.wb, q)) }; m.prototype.close = function () { this.eb() }; m.prototype.load = function (q) { q && q.method && q.url && (this.Cf(q), q.I ? (q.I.open(q.method, q.url, !0), q.I.send()) : this.Mf(q)) }; m.pd = "status"; m.od = "response"; m.qb = "instance"; n.Ie = k; n.He = function (q, r) { this.url = q || j; this.method = r; this.I = j }; n.Ge = m })(f); (function (n, k) { function m() { } m.Fa = "report"; m.qa = "what"; m.Ga = "reset"; m.Sb = "account"; m.cc = "sc_tracking_server"; m.xb = "tracking_server"; m.lb = "check_status_server"; m.rb = "job_id"; m.Pa = "publisher"; m.fc = "stream_type"; m.$b = "ovp"; m.ec = "sdk"; m.bd = "channel"; m.nb = "debug_tracking"; m.yb = "track_local"; m.Ha = "visitor_id"; m.Aa = "analytics_visitor_id"; m.Da = "marketing_cloud_visitor_id"; m.i = "name"; m.Ca = "length"; m.Ea = "player_name"; m.X = "timer_interval"; m.rd = "tracking_interval"; m.cd = "check_status_interval"; m.gc = "track_external_errors"; m.ac = "parent_name"; m.nd = "parent_pod"; m.bc = "parent_pod_position"; m.ub = "parent_pod_offset"; m.na = "parent_pod_cpm"; m.B = "offset"; m.vb = "source"; m.Yb = "error_id"; m.kb = "bitrate"; m.Zb = "fps"; m.Vb = "dropped_frames"; k.event.ba = m })(f, g); (function (n, k) { function m(o, p) { m.r.constructor.call(this, o, p) } n.extend(m, n.S); m.La = "api_destroy"; m.Tb = "api_config"; m.Uc = "api_open_main"; m.Tc = "api_open_ad"; m.Qc = "api_close"; m.Vc = "api_play"; m.Sc = "api_monitor"; m.Yc = "api_stop"; m.Pc = "api_click"; m.Rc = "api_complete"; m.Zc = "api_track_error"; m.Wc = "api_qos_info"; m.Nc = "api_bitrate_change"; m.Oc = "api_buffer_start"; m.Ub = "api_pod_offset"; m.Xc = "api_session_complete"; k.event.Ma = m })(f, g); (function (n, k) { function m(o, p) { m.r.constructor.call(this, o, p) } n.extend(m, n.S); m.Ba = "context_data_available"; k.event.dd = m })(f, g); (function (n, k) { function m(o, p) { m.r.constructor.call(this, o, p) } n.extend(m, n.S); m.oa = "data_request"; m.mb = "data_response"; m.ya = { Qa: "tracking_timer_interval", md: "main_video_publisher" }; k.event.Wb = m })(f, g); (function (n, k) { function m(o, p) { m.r.constructor.call(this, o, p) } n.extend(m, n.S); m.sb = "network_check_status_complete"; k.event.tb = m })(f, g); (function (n, k) { function m(o, p) { m.r.constructor.call(this, o, p) } n.extend(m, n.S); m.CLOCK_TRACKING_TICK = "CLOCK_TRACKING_TICK"; m.CLOCK_TRACKING_ENABLE = "CLOCK_TRACKING_ENABLE"; m.CLOCK_TRACKING_DISABLE = "CLOCK_TRACKING_DISABLE"; m.CLOCK_CHECK_STATUS_TICK = "CLOCK_CHECK_STATUS_TICK"; m.CLOCK_CHECK_STATUS_ENABLE = "CLOCK_CHECK_STATUS_ENABLE"; m.CLOCK_CHECK_STATUS_DISABLE = "CLOCK_CHECK_STATUS_DISABLE"; k.event.Na = m })(f, g); (function (n, k) { function m(p, q) { this.value = p; this.hint = q } function o(p) { this.Bc = p; this.data = {} } m.pa = "short"; o.prototype.c = function (p, q, r) { var s = this; return function () { arguments.length && (s[p] = arguments[0], s.Pb(q, arguments[0], r)); return s[p] } }; o.prototype.Pb = function (p, q, r) { this.data[p] = new m(q, r) }; k.a.R = o; k.a.ed = m })(f, g); (function (n, k) { function m(p, q) { m.r.constructor.call(this, p); this.cg = this.c("_year", "year", o.pa); this.Qf = this.c("_month", "month", o.pa); this.Df = this.c("_day", "day", o.pa); this.Kf = this.c("_hour", "hour", o.pa); this.Pf = this.c("_minute", "minute", o.pa); this.Sf = this.c("_second", "second", o.pa); this.cg(q.getUTCFullYear()); this.Qf(q.getUTCMonth() + 1); this.Df(q.getUTCDate()); this.Kf(q.getUTCHours()); this.Pf(q.getUTCMinutes()); this.Sf(q.getUTCSeconds()) } var o = k.a.ed; n.extend(m, k.a.R); k.a.he = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "asset"); this.Fb = this.c("_cpm", "cpm", j); this.L = this.c("_adId", "ad_id", j); this.Nb = this.c("_resolver", "resolver", j); this.Kb = this.c("_podId", "pod_id", j); this.Lb = this.c("_podPosition", "pod_position", j); this.Mb = this.c("_podSecond", "pod_second", j); this.length = this.c("_length", "length", j); this.Fb(""); this.L(""); this.Nb(""); this.Kb(""); this.Lb(""); this.Mb(0); this.length(0); if (arguments.length && arguments[0] instanceof m) { var o = arguments[0]; this.Fb(o.Fb()); this.L(o.L()); this.Nb(o.Nb()); this.Kb(o.Kb()); this.Lb(o.Lb()); this.Mb(o.Mb()); this.length(o.length()) } } n.extend(m, k.a.R); k.a.$c = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "asset"); this.type = this.c("_type", "type", j); this.k = this.c("_videoId", "video_id", j); this.K = this.c("_publisher", "publisher", j); this.q = this.c("_adData", "ad_data", j); this.duration = this.c("_duration", "duration", j); this.type(""); this.k(""); this.K(""); this.q(j); this.duration(0); if (arguments.length && arguments[0] instanceof m) { var p = arguments[0]; this.type(p.type()); this.k(p.k()); this.K(p.K()); this.duration(p.duration()); (p = p.q()) && this.q(new o(p)) } } var o = k.a.$c; n.extend(m, k.a.R); m.sd = "vod"; m.Ce = "live"; m.Be = "linear"; m.Ra = "ad"; k.a.jb = m })(f, g); (function (n, k) { function m(p) { m.r.constructor.call(this, "event"); this.pf = p; this.type = this.c("_type", "type", j); this.count = this.c("_count", "count", j); this.Gc = this.c("_totalCount", "total_count", j); this.duration = this.c("_duration", "duration", j); this.Hc = this.c("_totalDuration", "total_duration", j); this.ka = this.c("_playhead", "playhead", j); this.id = this.c("_id", "id", j); this.source = this.c("_source", "source", j); this.Ac = this.c("_prevTs", "prev_ts", j); this.qf = function () { var q = this.pf * 1000; this.pc = new Date(Math.floor(this.oc / q) * q); this.Pb("ts_as_date", new o(this.Bc, this.pc), j) }; this.Rb = function () { if (arguments.length) { this.oc = arguments[0], this.Pb("ts", this.oc, j), this.qf() } return this.oc }; this.ag = function () { if (arguments.length) { this.pc = arguments[0], this.Pb("ts_as_date", new o(this.Bc, this.pc), j) } }; this.type(""); this.count(0); this.Gc(0); this.duration(0); this.Hc(0); this.ka(0); this.id(""); this.source(""); this.Ac(-1); this.Rb((new Date).getTime()) } var o = k.a.he; n.extend(m, k.a.R); m.le = "load"; m.me = "unload"; m.ob = "start"; m.jd = "play"; m.hd = "pause"; m.je = "buffer"; m.ie = "bitrate_change"; m.ke = "error"; m.fd = "active"; m.gd = "complete"; k.a.pb = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "stream"); this.qc = this.c("_bitrate", "bitrate", j); this.Rd = this.c("_fps", "fps", j); this.Od = this.c("_droppedFrames", "dropped_frames", j); this.qc(0); this.Rd(0); this.Od(0) } n.extend(m, k.a.R); k.a.re = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "sc"); this.Xd = this.c("_reportSuiteId", "rsid", j); this.trackingServer = this.c("_trackingServer", "tracking_server", j); this.Xd(""); this.trackingServer("") } n.extend(m, k.a.R); k.a.Ae = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "sp"); this.ia = this.c("_ovp", "ovp", j); this.la = this.c("_sdk", "sdk", j); this.channel = this.c("_channel", "channel", j); this.playerName = this.c("_playerName", "player_name", j); this.ia("unknown"); this.la("unknown"); this.channel("unknown"); this.playerName("") } n.extend(m, k.a.R); k.a.xe = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "event"); this.Ec = this.c("_sessionId", "sid", j); this.Ec("") } n.extend(m, k.a.R); k.a.ye = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "stream"); this.rc = this.c("_cdn", "cdn", j); this.name = this.c("_name", "name", j); this.rc(""); this.name(""); if (arguments.length && arguments[0] instanceof m) { var o = arguments[0]; this.rc(o.rc()); this.name(o.name()) } } n.extend(m, k.a.R); k.a.qd = m })(f, g); (function (n, k) { function m() { m.r.constructor.call(this, "user"); this.uc = this.c("_device", "device", j); this.country = this.c("_country", "country", j); this.city = this.c("_city", "city", j); this.latitude = this.c("_latitude", "latitude", j); this.longitude = this.c("_longitude", "longitude", j); this.ib = this.c("_visitorId", "id", j); this.$a = this.c("_analyticsVisitorId", "aid", j); this.ab = this.c("_marketingCloudVisitorId", "mid", j); this.uc(""); this.country(""); this.city(""); this.latitude(""); this.longitude(""); this.ib(""); this.$a(""); this.ab(""); if (arguments.length && arguments[0] instanceof m) { var o = arguments[0]; this.uc(o.uc()); this.country(o.country()); this.city(o.city()); this.latitude(o.latitude()); this.longitude(o.longitude()); this.ib(o.ib()); this.$a(o.$a()); this.ab(o.ab()) } } n.extend(m, k.a.R); k.a.vd = m })(f, g); (function (m, k) { k.a.ue = function (n, o, q, r, p) { this.ga = n; this.g = o; this.Lc = q; this.Fc = r; this.cb = p } })(f, g); (function (n, k) { var m = k.a.pb; k.a.te = function (o, p, q) { this.Xf = o; this.Tf = p; this.Vf = q; this.G = []; this.Za = function (r) { this.G.push(r) }; this.lg = function () { return this.G }; this.Gf = function () { if (this.G.length) { for (var r = this.G.length - 1; r >= 0; r--) { this.G[r].ga.type() === m.hd && this.G.splice(r, 1) } } } } })(f, g); (function (n, k) { function m() { } m.prototype.$d = E(); m.prototype.ae = E(); m.prototype.W = E(); m.prototype.Zd = E(); m.prototype.be = E(); k.a.we = m })(f, g); (function (o, k) { function n() { this.N("[media-fork::QuerystringSerializer] > "); this.da = function (m) { return m ? m + "&" : "" }; this.Gd = function (m) { m && m.length > 0 && (m = m.substring(0, m.length - 1)); return m }; this.mf = function (t) { var u = [], w; for (w in t.data) { if (t.data.hasOwnProperty(w)) { var x = t.data[w], A = x.value; x = x.hint; var z = j, y = t.Bc; A === j || typeof A === "undefined" || (typeof A === "number" ? z = this.Zd(w, A, y, x) : typeof A === "string" ? z = this.be(w, A, y, x) : A instanceof p ? z = this.W(A) : this.warn("#_processDao() > Unable to serialize DAO. Field: " + w + ". Value: " + A + "."), z && u.push(z)) } } return u } } var s = o.Q, q = o.P, p = k.a.R, r = k.a.ed; o.extend(n, k.a.we); s(n, q); n.prototype.$d = function (m) { for (var t = [], u = m.G, w = 0; w < u.length; w++) { var x = this.ae(u[w]) + "&"; x += this.da(this.W(m.Xf)); x += this.da(this.W(m.Tf)); x += this.da(this.W(m.Vf)); x = this.Gd(x); t.push(x) } return t }; n.prototype.ae = function (m) { var t = this.da(this.W(m.ga)); t += this.da(this.W(m.g)); t += this.da(this.W(m.Lc)); t += this.da(this.W(m.Fc)); t += this.da(this.W(m.cb)); return t = this.Gd(t) }; n.prototype.W = function (m) { m = this.mf(m); for (var t = "", u = 0; u < m.length; u++) { t += u == m.length - 1 ? m[u] : m[u] + "&" } return t }; n.prototype.Zd = function (m, t, u, w) { var x = "l"; if (t != j && t !== void 0 && !isNaN(t)) { return w && typeof w === "string" && w === r.pa && (x = "h"), x + ":" + u + ":" + m + "=" + t } return j }; n.prototype.be = function (m, t, u) { if (t) { return "s:" + u + ":" + m + "=" + window.encodeURIComponent(t) } return j }; k.a.se = n })(f, g); (function (p, k) { function o(m) { this.Qb = 0; this.O = m; this.Gb = !1 } function w() { if (w.prototype.Ta) { return w.prototype.Ta } var m = this; this.N("[media-fork::TimerManager] > "); this.Ad = 0; this.fa = {}; this.ua = function () { this.log("#_onApiDestroy()"); clearInterval(this.yd); x().eb(this) }; this.jf = function () { this.log("#_onTick() > ------------------- (" + this.Ad + ")"); this.Ad++; for (var n in this.fa) { if (this.fa.hasOwnProperty(n)) { var q = this.fa[n]; if (q.Gb && (q.Qb++, q.Qb % q.O === 0)) { var z = {}; z[r.X] = q.O; x().dispatchEvent(new u(u[n], z)) } } } }; x().addEventListener(s.La, this.ua, this); this.yd = setInterval(function () { m.jf() }, y * 1000); this.Lf = function (n) { return (n = this.fa[n]) && n.Gb }; this.Kd = function (n, q) { this.fa[n] = new o(q) }; this.Ef = function (n) { delete this.fa[n] }; this.Yf = function (n, q) { this.log("#startTimer(name=" + n + ", reset=" + q + ")"); var z = this.fa[n]; if (z && (z.Gb = !0, q)) { this.log("Resseting timer: " + n), z.Qb = 0 } }; this.Zf = function (n, q) { this.log("#startTimer(name=" + n + ", reset=" + q + ")"); var z = this.fa[n]; if (z && (z.Gb = !1, q)) { this.log("Resseting timer: " + n), z.Qb = 0 } }; w.prototype.Ta = this } var t = p.Q, s = k.event.Ma, u = k.event.Na, r = k.event.ba, x = p.ca, y = 1; t(w, p.P); new w; k.M.Ee = w })(f, g); (function (o, k) { function n(u, w, x, y) { this.N("[media-fork::Timer] > "); this.O = y; this.ma = u; this.Hf = w; this.Ff = x; s().Kd(this.ma, this.O); this.ua = function () { this.Nd() }; this.lf = function (m) { m = m.data; var z = !1; m && m.hasOwnProperty(p.Ga) && (z = m[p.Ga]); this.start(z) }; this.kf = function (m) { m = m.data; var z = !1; m && m.hasOwnProperty(p.Ga) && (z = m[p.Ga]); this.stop(z) }; r().addEventListener(q.La, this.ua, this); r().addEventListener(this.Hf, this.lf, this); r().addEventListener(this.Ff, this.kf, this) } var t = o.Q, r = o.ca, q = k.event.Ma, s = k.M.Ee, p = k.event.ba; t(n, o.P); n.prototype.start = function (m) { this.log("#start(" + this.ma + ")"); s().Yf(this.ma, m) }; n.prototype.stop = function (m) { this.log("#stop(" + this.ma + ")"); s().Zf(this.ma, m) }; n.prototype.Nd = function () { r().eb(this); s().Ef(this.ma) }; n.prototype.setInterval = function (m) { var u = s().Lf(this.ma); this.stop(!0); this.O = m; s().Kd(this.ma, this.O); u && this.start(!0) }; k.M.ud = n })(f, g); (function (p, k) { function o() { this.N("[media-fork::TrackingTimer] > "); o.r.constructor.call(this, x.CLOCK_TRACKING_TICK, x.CLOCK_TRACKING_ENABLE, x.CLOCK_TRACKING_DISABLE, z); this.kc = function (m) { m = m.data[y.rd]; this.log("#_onCheckStatusComplete(interval=" + m + ")"); m ? m === this.O ? this.log("#_onCheckStatusComplete() > Interval value not changed.") : (this.log("#_onCheckStatusComplete() > Interval changed to: " + m), this.setInterval(m)) : (this.warn("#_onCheckStatusComplete() > Invalid interval value."), this.setInterval(z)) }; this.lc = function (m) { m = m.data[y.qa]; this.log("#_onDataRequest(what=" + m + ")"); switch (m) { case u.ya.Qa: m = {}, m[y.X] = this.O, s().dispatchEvent(new u(u.mb, m)) } }; s().addEventListener(r.sb, this.kc, this); s().addEventListener(u.oa, this.lc, this) } var w = p.Q, t = p.P, s = p.ca, u = k.event.Wb, r = k.event.tb, x = k.event.Na, y = k.event.ba, z = 10; p.extend(o, k.M.ud); w(o, t); k.M.Fe = o })(f, g); (function (p, k) { function o() { this.N("[media-fork::CheckStatusTimer] > "); o.r.constructor.call(this, z.CLOCK_CHECK_STATUS_TICK, z.CLOCK_CHECK_STATUS_ENABLE, z.CLOCK_CHECK_STATUS_DISABLE, t); var m = this; setTimeout(function () { m.Qe() }, 200); this.Qe = function () { this.log("#_initialCheck()"); var n = {}; n[y.X] = this.O; r().dispatchEvent(new z(z.CLOCK_CHECK_STATUS_TICK, n)) }; this.kc = function (n) { n = n.data[y.cd]; this.log("#_onCheckStatusComplete(interval=" + n + ")"); n ? n === this.O ? this.log("#_onCheckStatusComplete() > Interval value not changed.") : n > w ? (this.warn("#_onCheckStatusComplete() > Interval value too large: " + n), this.setInterval(w)) : (this.log("#_onCheckStatusComplete() > Interval changed to: " + n), this.setInterval(n)) : (this.warn("#_onCheckStatusComplete() > Invalid interval value."), this.setInterval(t)) }; r().addEventListener(x.sb, this.kc, this) } var w = 600, t = 60, s = p.Q, u = p.P, r = p.ca, x = k.event.tb, y = k.event.ba, z = k.event.Na; p.extend(o, k.M.ud); s(o, u); k.M.de = o })(f, g); (function (o, k) { var n = k.M.de, p = k.M.Fe; k.M.ee = function () { this.dg = new n; this.fg = new p } })(f, g); (function (o, k) { function n(m) { this.N("[media-fork::SettingsParser] > "); this.Bd = m; this.log("#SettingsParser(data=" + m + ")") } var s = o.Q, q = o.ca, p = k.event.ba, r = k.event.tb; s(n, o.P); n.prototype.parse = function () { var t, u, w, x; if (this.Bd) { window.DOMParser ? x = (new window.DOMParser).parseFromString(this.Bd, "text/xml") : (x = new window.ActiveXObject("Microsoft.XMLDOM"), x.async = !1, x.loadXML(this.data)); var y; (y = parseInt(x.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue, 10)) && (t = y); (y = parseInt(x.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue, 10)) && (u = y); (y = parseInt(x.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue, 10)) && (w = y === 1); x = {}; x[p.rd] = t; x[p.cd] = u; x[p.gc] = w; this.log("#parse() > Obtained configuration settings: " + JSON.stringify(x)); q().dispatchEvent(new r(r.sb, x)) } else { this.warn("#SettingsParser() > No data available for parsing.") } }; k.bb.ze = n })(f, g); (function (s, o) { function q(k) { this.N("[media-fork::Network] > "); this.ta = this.Hd = this.Cd = !1; this.of = k; this.Ed = this.xd = this.Id = j; this.jc = function (m) { m = m.data; this.log("#_onApiConfig(sb_server=" + m[F.xb] + ", check_status_server=" + m[F.lb] + ", job_id=" + m[F.rb] + ", debug_tracking=" + m[F.nb] + ", track_local=" + m[F.yb] + ")"); this.Id = m[F.xb]; this.xd = m[F.lb]; this.Ed = m[F.rb]; this.Cd = m[F.nb]; this.Hd = m[F.yb]; this.ta = !0 }; this.ua = function () { this.log("#_onApiDestroy()"); z().eb(this) }; this.gf = function (m) { if (this.ta) { if (m = this.of.$d(m.data[F.Fa]), !this.Hd) { for (var n = 0; n < m.length; n++) { var p = new B(this.Id + "/?__job_id=" + this.Ed + "&" + m[n], D.ld); this.Cd && window.console && window.console.info && window.console.info(p.method + " : " + p.url); (function (r, t) { r.addEventListener(w.wb, function () { r.close() }, this); r.addEventListener(w.Xb, function (y) { t.warn("#_onContextDataAvailable() > Failed to send heartbeat report: " + JSON.stringify(y)); r.close() }, this); r.load(p) })(new I, this) } } } else { this.warn("#_onContextDataAvailable() > Unable to send request: not configured.") } }; this.ef = function () { function m(t) { t.data && (new A(t.data.response)).parse(); t.data[I.qb].close() } function n(t) { p.warn("_onClockCheckStatusTick() > Failed to obtain the config. settings: " + JSON.stringify(t)); t.data[I.qb].close() } if (this.ta) { var p = this; this.ea = function (t) { if (t = t[F.Pa]) { t = t.replace(/[^a-zA-Z0-9]+/, "-").toLocaleLowerCase(); t = this.xd + t + ".xml?r=" + (new Date).getTime(); var y = new B(t, D.ld), K = new I; K.addEventListener(w.wb, m, this); K.addEventListener(w.Xb, n, this); this.log("#_onClockCheckStatusTick() > Get new settings from: " + t); K.load(y) } else { this.warn("#_onClockCheckStatusTick() > Publisher is NULL.") } }; var r = {}; r[F.qa] = G.ya.md; z().dispatchEvent(new G(G.oa, r)) } else { this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured.") } }; this.mc = function (m) { this.Pd(m.data) }; z().addEventListener(G.mb, this.mc, this); z().addEventListener(u.Tb, this.jc, this); z().addEventListener(u.La, this.ua, this); z().addEventListener(J.Ba, this.gf, this); z().addEventListener(H.CLOCK_CHECK_STATUS_TICK, this.ef, this) } var C = s.Q, x = s.P, w = s.S, z = s.ca, u = o.event.Ma, D = s.Ie, B = s.He, I = s.Ge, F = o.event.ba, G = o.event.Wb, H = o.event.Na, J = o.event.dd, A = o.bb.ze; C(q, s.Md); C(q, x); o.bb.qe = q })(f, g); (function (o, k) { function n() { this.N("[media-fork::Counters] > "); this.va = {}; this.wa = {}; this.Sd = function (m, q, r) { m = q + "." + r + "." + m; this.va[m] || (this.va[m] = 0); this.log("#getTotalCount(key=" + m + ")"); return this.va[m] }; this.mg = function (m, q, r) { m = q + "." + r + "." + m; this.log("#resetTotalCount(key=" + m + ")"); this.va[m] = 0 }; this.Wd = function (m, q, r) { m = q + "." + r + "." + m; this.va[m] || (this.va[m] = 0); this.log("#incrementTotalCount(key=" + m + ")"); this.va[m]++ }; this.Td = function (m, q, r) { m = q + "." + r + "." + m; this.wa[m] || (this.wa[m] = 0); this.log("#getTotalDuration(key=" + m + ")"); return this.wa[m] }; this.ng = function (m, q, r) { m = q + "." + r + "." + m; this.log("#resetTotalDuration(key=" + m + ")"); this.wa[m] = 0 }; this.Vd = function (q, r, s, t) { q = r + "." + s + "." + q; this.wa[q] || (this.wa[q] = 0); this.log("#increaseTotalDuration(key=" + q + ", amount=" + t + ")"); this.wa[q] += t } } var p = o.Q; p(n, o.P); k.H.ge = n })(f, g); (function (o, k) { function n() { this.N("[media-fork::History] > "); this.Dd = {}; this.zd = function (m) { var q = m.g; return (q.q() ? q.q().L() : q.k()) + "." + q.type() + "." + m.$ }; this.gb = function (m) { var q = this.zd(m); this.log("#updateWith(key=" + q + ")"); this.Dd[q] = m }; this.J = function (m) { m = this.zd(m); this.log("#getPreviousItemOfSameTypeWith(key=" + m + ")"); return this.Dd[m] } } var p = o.Q; p(n, o.P); k.H.oe = n })(f, g); (function (o, k) { var n = k.a.pb, r = k.a.jb, q = k.a.vd, p = k.a.qd; k.H.td = function (m, s, u, t, x, w) { this.timestamp = new Date; this.g = new r(m); this.Lc = new q(s); this.Fc = new p(u); this.$ = x; this.cb = t; this.ka = w; this.A = void 0; this.If = function () { if (this.$ === n.fd) { return this.g.k() } return this.g.type() === r.Ra ? this.g.q().L() : this.g.k() }; this.kg = function () { return 1 } } })(f, g); (function (m, k) { k.H.De = function () { this.Z = []; this.Jf = function () { return this.Z.slice() }; this.tf = function (n) { for (var o = -1, p = this.Z.length - 1; p >= 0; p--) { if (n.timestamp >= this.Z[p].timestamp) { break } o = p } o > 0 ? this.Z.splice(p, 0, n) : this.Z.push(n) } } })(f, g); (function (p, k) { function o(m) { this.N("[media-fork::ReporterHelper] > "); this.j = m; this.Fd = j; this.Ne = function (n, x, y) { y *= 1000; n = n.getTime() === 0 ? x.getTime() - y / 2 : n.getTime() / 2 + x.getTime() / 2; n = Math.floor(n / y) * y; this.Fd == n && (n += y); this.Fd = n; return new Date(n) }; this.Sa = function (x, y, z) { var D = this.j.ic, A = x.$, B = x.If(), C = x.g.type(), F = A === r.ob ? 0 : x.ka; D.Wd(A, B, C); D.Vd(A, B, C, y); z = new r(z); z.type(A); z.count(1); z.duration(y); z.Gc(D.Sd(A, B, C)); z.Hc(D.Td(A, B, C)); z.ka(F); z.Rb(x.timestamp.getTime()); z.Ac(x.A ? x.A.timestamp.getTime() : -1); return new q(z, x.g, x.Lc, x.Fc, x.cb) }; this.wd = function (n, x, y) { if (n.G.length) { var z = new t(this.j.e); z.type(this.j.Bb); z.q(j); z = new w(z, this.j.n, this.j.C, this.j.u, r.fd, this.j.p[this.j.e.k()]); z.A = this.j.o.J(z); this.j.o.gb(z); n.Za(this.Sa(z, x * 1000, x)); if (y != j) { for (x = 0; x < n.G.length; x++) { n.G[x].ga.ag(y) } } } }; this.Xa = function (n, x) { return x.getTime() - n.getTime() }; this.tc = function (n, x, y) { var z = new s(this.j.Db, this.j.Ia, this.j.Wa); z.Za(this.Sa(n, 0, x)); y && this.wd(z, x, j); return z }; this.Jd = function (y, A, B) { var H, C, D = new s(this.j.Db, this.j.Ia, this.j.Wa), I = this.j.Z.Jf(), G = []; C = j; var J = 0; for (J = H = 0; J < I.length; J++) { H = I[J], H.timestamp > y && H.timestamp <= A && G.push(H), H.timestamp <= y && (C = H) } this.log("#createReportForQuantum() > -------------TRACK REPORT----------------"); this.log("#createReportForQuantum() > Interval: [" + y.getTime() + " , " + A.getTime() + "]. Tracking interval: " + B); this.log("#createReportForQuantum() > -----------------------------------------"); for (J = 0; J < I.length; J++) { this.log("#createReportForQuantum() > [" + I[J].timestamp.getTime() + "] :" + I[J].$ + " | " + I[J].g.type()) } this.log("#createReportForQuantum() > -----------------------------------------"); for (J = 0; J < G.length; J++) { this.log("#createReportForQuantum() > [" + G[J].timestamp.getTime() + "] :" + G[J].$ + " | " + G[J].g.type()) } this.log("#createReportForQuantum() > -----------------------------------------"); if (C) { if (C.A) { C.A.timestamp = C.timestamp } C.timestamp = new Date(y.getTime() + 1); H = C.g.q() ? C.g.q().L() : C.g.k(); C.ka = this.j.p[H] } if (G.length) { I = 0; C && (I = C.$ === r.ob && C.g.type() !== t.Ra ? this.Xa(C.timestamp, G[0].timestamp) : this.Xa(y, G[0].timestamp), D.Za(this.Sa(C, I, B))); for (J = 0; J < G.length; J++) { var K = G[J]; I = J == G.length - 1 ? this.Xa(K.timestamp, A) : this.Xa(K.timestamp, G[J + 1].timestamp); var M = !1, L = D.G; for (H = 0; H < L.length; H++) { if (C = L[H], K.g.type() === C.g.type() && K.$ === C.ga.type() && (M = K.g.type() === t.Ra ? C.g.q().L() === K.g.q().L() : C.g.k() === K.g.k()), M) { L = C.ga; var N = C.g.type(); H = C.g.q() ? C.g.q().L() : C.g.k(); var F = this.j.ic; F.Wd(L.type(), H, N); F.Vd(L.type(), H, N, I); C.cb = K.cb; L.ka(this.j.p[H]); L.duration(L.duration() + I); L.Gc(F.Sd(L.type(), H, N)); L.Hc(F.Td(L.type(), H, N)); L.Rb(K.timestamp.getTime()); break } } if (!M) { this.log("#createReportForQuantum() > Adding event to report: " + K.$), H = K.g.q() ? K.g.q().L() : K.g.k(), K.ka = this.j.p[H], D.Za(this.Sa(K, I, B)) } } } else { C && D.Za(this.Sa(C, this.Xa(y, A), B)) } D.Gf(); J = this.Ne(y, A, B); this.wd(D, B, J); this.log("#createReportForQuantum() > Final report ----- START -----"); for (J = 0; J < D.G.length; J++) { C = D.G[J], B = C.ga, H = C.g.q() ? C.g.q().L() : C.g.k(), this.log("#createReportForQuantum() > Final report [" + B.Rb() + "/" + B.Ac() + "] :" + B.type() + " | type=" + C.g.type() + ", name=" + H + ", duration=" + B.duration() + ", playhead=" + B.ka()) } this.log("#createReportForQuantum() > Final report ----- END -----"); return D } } var u = p.Q, s = k.a.te, r = k.a.pb, t = k.a.jb, q = k.a.ue, w = k.H.td; u(o, p.P); k.H.ve = o })(f, g); (function (F, q) { function C() { this.N("[media-fork::Context] > "); this.zb = this.z = !1; this.Bb = j; this.hc = !1; this.l = this.Cb = j; this.f = { fb: j, K: j }; this.Ya = this.ea = j; this.p = {}; this.Va = new M(this); this.Z = new K; this.o = new R; this.Wa = new aa; this.Db = new V; this.Ia = new Y; this.e = new W; this.n = new ad; this.C = new Q; this.u = new N; this.ic = new ab; this.jc = function (k) { k = k.data; this.log("#_onApiConfig(account=" + k[P.Sb] + ", sc_server=" + k[P.cc] + ", sb_server=" + k[P.xb] + ", check_status_server=" + k[P.lb] + ", job_id=" + k[P.rb] + ", publisher=" + k[P.Pa] + ", ovp=" + k[P.$b] + ", sdk=" + k[P.ec] + ", debug_tracking=" + k[P.nb] + ", track_local=" + k[P.yb] + ")"); this.Db.Xd(k[P.Sb]); this.Db.trackingServer(k[P.cc]); this.f.K = k[P.Pa]; this.Ia.ia(k[P.$b]); this.Ia.la(k[P.ec]); this.Ia.channel(k[P.bd]); I().dispatchEvent(new U(U.CLOCK_CHECK_STATUS_ENABLE)) }; this.ua = function () { this.log("#_onApiDestroy()"); I().eb(this) }; this.Ye = function (k) { k = k.data; this.log("#_onApiOpenMain(name=" + k[P.i] + ", length=" + k[P.Ca] + ", type=" + k[P.fc] + ", player_name=" + k[P.Ea] + ", vid=" + k[P.Ha] + ", aid=" + k[P.Aa] + ", mid=" + k[P.Da] + ")"); this.nf(); this.l = k[P.i]; this.p[this.l] = 0; this.Ia.playerName(k[P.Ea]); this.n.ib(k[P.Ha]); this.n.$a(k[P.Aa]); this.n.ab(k[P.Da]); this.e.k(this.l); this.e.duration(k[P.Ca]); this.e.type(k[P.fc]); this.Bb = this.e.type(); this.C.name(this.l); this.Pe(); k = {}; k[P.Ga] = !0; I().dispatchEvent(new U(U.CLOCK_TRACKING_ENABLE, k)); this.ea = function (m) { m = m[P.X]; var n = new T(this.e, this.n, this.C, this.u, B.le, 0); n.A = this.o.J(n); this.o.gb(n); m = this.Va.tc(n, m, !0); n = {}; n[P.Fa] = m; I().dispatchEvent(new ae(ae.Ba, n)) }; k = {}; k[P.qa] = ac.ya.Qa; I().dispatchEvent(new ac(ac.oa, k)); k = new T(this.e, this.n, this.C, this.u, B.ob, 0); k.A = this.o.J(k); this.Y(k); this.z = !0 }; this.Xe = function (k) { if (this.z) { this.info("Call detected: onApiOpenAd()."); k = k.data; this.log(this, "#_onApiOpenAd(name=" + k[P.i] + ", length=" + k[P.Ca] + ", player_name=" + k[P.Ea] + ", parent_name=" + k[P.ac] + ", pod_pos=" + k[P.bc] + ", pod_offset=" + k[P.ub] + ", cpm=" + k[P.na] + ")"); this.e.k() || this.e.k(k[P.ac]); this.l = k[P.i]; this.p[this.l] = 0; var m = new X; m.L(this.l); m.length(k[P.Ca]); m.Nb(k[P.Ea]); m.Fb(k[P.na]); m.Kb(k[P.nd]); m.Mb(this.Cb); m.Lb(k[P.bc] + ""); this.e.q(m); this.e.type(W.Ra); k = new T(this.e, this.n, this.C, this.u, B.ob, 0); k.A = this.o.J(k); this.Y(k); k = new T(this.e, this.n, this.C, this.u, B.jd, this.p[this.l]); k.A = this.o.J(k); this.Y(k) } else { this.warn("#_onApiOpenAd() > No active viewing session.") } }; this.Ue = function (k) { this.z ? (k = k.data[P.i], this.log("#_onApiClose(name=" + k + ")"), k === this.e.k() ? this.Me() : this.Le()) : this.warn("#_onApiClose() > No active viewing session.") }; this.Ze = function (k) { if (this.z) { if (k = k.data, this.log("#_onApiPlay(name=" + k[P.i] + ", offset=" + k[P.B] + ", vid=" + k[P.Ha] + ", aid=" + k[P.Aa] + ", mid=" + k[P.Da] + ")"), !(k[P.i] == this.e.k && this.zb)) { this.n.ib(k[P.Ha]), this.n.$a(k[P.Aa]), this.n.ab(k[P.Da]), this.l = k[P.i], this.p[this.l] = Math.floor(k[P.B]), I().dispatchEvent(new U(U.CLOCK_TRACKING_ENABLE)), k = new T(this.e, this.n, this.C, this.u, B.jd, this.p[this.l]), k.A = this.o.J(k), this.Y(k) } } else { this.warn("#_onApiPlay() > No active viewing session.") } }; this.cf = function (k) { this.z ? (k = k.data, this.log("#_onApiStop(name=" + k[P.i] + ", offset=" + k[P.B] + ")"), this.l = k[P.i], this.p[this.l] = Math.floor(k[P.B]), k = new T(this.e, this.n, this.C, this.u, B.hd, this.p[this.l]), k.A = this.o.J(k), this.Y(k), I().dispatchEvent(new U(U.CLOCK_TRACKING_DISABLE))) : this.warn("#_onApiStop() > No active viewing session.") }; this.Te = function (k) { this.z ? (k = k.data, this.log("#_onApiClick(name=" + k[P.i] + ", offset=" + k[P.B] + ")")) : this.warn("#_onApiClick() > No active viewing session.") }; this.Ve = function (k) { this.z ? (k = k.data, this.log("#_onApiComplete(name=" + k[P.i] + ", offset=" + k[P.B] + ")")) : this.warn("#_onApiComplete() > No active viewing session.") }; this.af = function (k) { this.z ? (k = k.data, this.log("#_onApiQoSInfo(bitrate=" + k[P.i] + ", fps=" + k[P.Zb] + ", dropped_frames=" + k[P.Vb] + ")"), this.u.qc(k[P.kb]), this.u.Rd(k[P.Zb]), this.u.Od(k[P.Vb])) : this.warn("#_onApiQoSInfo() > No active viewing session.") }; this.Re = function (k) { if (this.z) { k = k.data; this.log("#_onApiBitrateChange(bitrate=" + k[P.i] + ")"); this.u.qc(k[P.kb]); var m = new T(this.e, this.n, this.C, this.u, B.ie, this.p[this.l]); m.A = this.o.J(m); this.o.gb(m); this.ea = function (n) { n = this.Va.tc(m, n[P.X], !1); var o = {}; o[P.Fa] = n; I().dispatchEvent(new ae(ae.Ba, o)) }; k = {}; k[P.qa] = ac.ya.Qa; I().dispatchEvent(new ac(ac.oa, k)) } else { this.warn("#_onApiBitrateChange() > No active viewing session.") } }; this.Se = function () { if (this.z) { this.log("#_onApiBufferStart()"); var k = new T(this.e, this.n, this.C, this.u, B.je, this.p[this.l]); k.A = this.o.J(k); this.Y(k) } else { this.warn("#_onApiBufferStart() > No active viewing session.") } }; this.df = function (k) { if (this.z) { var m = k.data; this.log("#_onApiTrackError(source=" + m[P.vb] + ", err_id=" + m[P.Yb] + ", offset=" + m[P.B] + ")"); if (!(this.hc && m[P.vb] !== O)) { var n = new T(this.e, this.n, this.C, this.u, B.ke, Math.floor(m[P.B])); n.A = this.o.J(n); this.o.gb(n); this.ea = function (o) { o = this.Va.tc(n, o[P.X], !1); var p = o.G[0]; p.ga.id(m[P.Yb]); p.ga.source(m[P.vb]); p = {}; p[P.Fa] = o; I().dispatchEvent(new ae(ae.Ba, p)) }; k = {}; k[P.qa] = ac.ya.Qa; I().dispatchEvent(new ac(ac.oa, k)) } } else { this.warn("#_onApiTrackError() > No active viewing session.") } }; this.$e = function (k) { this.z ? (this.Cb = Math.floor(k.data[P.ub]), this.log("#_onApiPodOffset(podOffset=" + this.Cb + ")")) : this.warn("#_onApiPodOffset() > No active viewing session.") }; this.bf = function () { if (this.z) { this.log("#_onApiSessionComplete()"); var k = new T(this.e, this.n, this.C, this.u, B.me, 0); k.A = this.o.J(k); this.Y(k); this.ea = function (m) { var n = new Date; m = this.Va.Jd(this.Ya || new Date(0), n, m[P.X]); var o = {}; o[P.Fa] = m; I().dispatchEvent(new ae(ae.Ba, o)); this.Ya = n }; k = {}; k[P.qa] = ac.ya.Qa; I().dispatchEvent(new ac(ac.oa, k)); k = {}; k[P.Ga] = !0; I().dispatchEvent(new U(U.CLOCK_TRACKING_DISABLE, k)); this.z = !1 } else { this.warn("#_onApiSessionComplete() > No active viewing session.") } }; this.We = function (k) { if (this.z) { var m = k.data; this.log("#_onApiMonitor(name=" + m[P.i] + ", offset=" + m[P.B] + ")"); this.l = m[P.i]; this.p[this.l] = Math.floor(k.data[P.B]) } else { this.warn("#_onApiMonitor() > No active viewing session.") } }; this.ff = function (k) { if (this.z) { this.log("#_onClockTrackingTick(interval=" + k.data[P.X] + ")"); var m = new Date; k = this.Va.Jd(this.Ya || new Date(0), m, k.data[P.X]); var n = {}; n[P.Fa] = k; I().dispatchEvent(new ae(ae.Ba, n)); this.Ya = m } else { this.warn("#_onClockTrackingTick() > No active viewing session.") } }; this.hf = function (k) { this.log("#_onNetworkCheckStatusComplete(track_ext_err=" + k.data[P.gc] + ")"); k = k.data[P.gc]; if (k !== j) { this.hc = k } }; this.lc = function (k) { k = k.data[P.qa]; this.log("#_onDataRequest(what=" + k + ")"); switch (k) { case ac.ya.md: k = {}, k[P.Pa] = this.f.K, I().dispatchEvent(new ac(ac.mb, k)) } }; this.mc = function (k) { this.log("#_onDataResponse()"); this.Pd(k.data) }; this.nf = function () { this.log("#_resetInternalState()"); this.zb = this.z = !1; this.Bb = j; this.hc = !1; this.p = {}; this.Ya = this.Cb = j; this.ic = new ab; this.o = new R; this.Z = new K; this.n = new ad; this.C = new Q; this.u = new N; this.Wa = new aa; this.e = new W; this.e.K(this.f.K); this.e.type(this.f.fb) }; this.Pe = function () { this.Wa.Ec("" + (new Date).getTime() + Math.floor(Math.random() * 1000000000)); this.log("#_generateSessionId() > New session id: " + this.Wa.Ec) }; this.Y = function (k) { this.log("#_placeItemOnTimeline(type=" + k.$ + ")"); this.Z.tf(k); this.o.gb(k) }; this.Me = function () { if (this.zb) { this.warn("#_closeMainVideo() > The main video content was already closed.") } else { this.p[this.e.k()] == -1 && (this.p[this.e.k()] = this.e.duration()); var k = new T(this.e, this.n, this.C, this.u, B.gd, this.p[this.e.k()]); k.A = this.o.J(k); this.Y(k); this.zb = !0 } }; this.Le = function () { var k = new T(this.e, this.n, this.C, this.u, B.gd, this.p[this.l]); k.A = this.o.J(k); this.Y(k); this.e.type(this.Bb); this.l = this.e.k(); this.e.q(j) }; I().addEventListener(Z.Tb, this.jc, this); I().addEventListener(Z.La, this.ua, this); I().addEventListener(Z.Uc, this.Ye, this); I().addEventListener(Z.Tc, this.Xe, this); I().addEventListener(Z.Qc, this.Ue, this); I().addEventListener(Z.Vc, this.Ze, this); I().addEventListener(Z.Yc, this.cf, this); I().addEventListener(Z.Pc, this.Te, this); I().addEventListener(Z.Rc, this.Ve, this); I().addEventListener(Z.Wc, this.af, this); I().addEventListener(Z.Nc, this.Re, this); I().addEventListener(Z.Oc, this.Se, this); I().addEventListener(Z.Zc, this.df, this); I().addEventListener(Z.Ub, this.$e, this); I().addEventListener(Z.Xc, this.bf, this); I().addEventListener(Z.Sc, this.We, this); I().addEventListener(U.CLOCK_TRACKING_TICK, this.ff, this); I().addEventListener(J.sb, this.hf, this); I().addEventListener(ac.oa, this.lc, this); I().addEventListener(ac.mb, this.mc, this) } var S = F.Q, L = F.P, I = F.ca, M = q.H.ve, K = q.H.De, T = q.H.td, R = q.H.oe, aa = q.a.ye, V = q.a.Ae, W = q.a.jb, Y = q.a.xe, ad = q.a.vd, Q = q.a.qd, N = q.a.re, ab = q.H.ge, U = q.event.Na, J = q.event.tb, ac = q.event.Wb, Z = q.event.Ma, ae = q.event.dd, P = q.event.ba, B = q.a.pb, X = q.a.$c, O = "player"; S(C, F.Md); S(C, L); q.H.fe = C })(f, g); (function (p) { function k(m) { this.N("[media-fork::HeartbeatMediaFork] > "); this.m = m; this.D = function () { var n = this.ta && (this.m.analyticsVisitorID || this.m.marketingCloudVisitorID || this.m.visitorID); n || this.warn("Unable to track! Is configured: " + this.ta + " analyticsVisitorID: " + this.m.analyticsVisitorID + " marketingCloudVisitorID: " + this.m.marketingCloudVisitorID + " visitorID: " + this.m.visitorID); return n }; this.ta = !1; this.j = new x; this.eg = new u(new z); this.yd = new t; this.nc = j; this.f = { trackingServer: j, vc: j, K: j, fb: j, ia: j, la: j, channel: j, debugTracking: !1, Jc: !1 } } var o = f.Q, w = f.ca, s = p.event.ba, r = p.event.Ma, t = p.M.ee, u = p.bb.qe, x = p.H.fe, y = p.a.jb, z = p.a.se; o(k, f.P); k.prototype.Wf = function (m) { if (m && m.hasOwnProperty("debugLogging")) { f.Oa = m.debugLogging } this.log("#setup(configData={trackingServer: " + m.trackingServer + ", jobId: " + m.vc + ", streamType: " + m.fb + ", publisher: " + m.K + ", ovp: " + m.ia + ", sdk: " + m.la + ", debugLogging: " + m.ig + "})"); this.f.debugTracking = this.m.debugTracking; this.f.Jc = this.m.trackLocal; this.f.channel = this.m.Media.channel; if (m) { if (m.hasOwnProperty("trackingServer")) { this.f.trackingServer = m.trackingServer } if (m.hasOwnProperty("jobId")) { this.f.vc = m.jobId } if (m.hasOwnProperty("publisher")) { this.f.K = m.publisher } if (m.hasOwnProperty("ovp")) { this.f.ia = m.ovp } if (m.hasOwnProperty("sdk")) { this.f.la = m.sdk } if (m.hasOwnProperty("streamType")) { this.f.fb = m.streamType === y.sd || m.streamType === y.Ce || m.streamType === y.Be || m.streamType === y.Ra ? m.streamType : y.sd } if (this.m.Media.__primetime) { this.f.ia = "primetime" } if (this.nc != j) { this.f.la = this.nc } this.log("#setup() > Applying configuration: {account: " + this.m.account + ", scTrackingServer: " + this.m.trackingServer + ", sbTrackingServer: " + this.f.trackingServer + ", jobId: " + this.f.trackingServer + ", publisher: " + this.f.K + ", ovp: " + this.f.ia + ", sdk: " + this.f.la + ", channel: " + this.f.channel + ", debugTracking: " + this.f.debugTracking + ", trackLocal: " + this.f.Jc + "}"); m = {}; m[s.Sb] = this.m.account; m[s.cc] = this.m.trackingServer; m[s.xb] = this.f.trackingServer; m[s.lb] = this.f.trackingServer + "/settings/"; m[s.rb] = this.f.vc; m[s.Pa] = this.f.K; m[s.$b] = this.f.ia; m[s.ec] = this.f.la; m[s.bd] = this.f.channel; m[s.nb] = this.f.debugTracking; m[s.yb] = this.f.Jc; w().dispatchEvent(new r(r.Tb, m)); this.ta = !0 } }; k.prototype.open = function (m, n, q) { this.log("#open(name=" + m + ", length=" + n + ", playerName=" + q + ")"); if (this.D()) { var A = {}; A[s.Ha] = this.m.visitorID; A[s.Aa] = this.m.analyticsVisitorID; A[s.Da] = this.m.Nf; A[s.i] = m; A[s.Ca] = n; A[s.fc] = this.f.fb; A[s.Ea] = q; w().dispatchEvent(new r(r.Uc, A)) } }; k.prototype.openAd = function (m, q, A, B, C, D, F) { this.log("#openAd(name=" + m + ", length=" + q + ", playerName=" + A + ", parentName=" + B + ", parentPod=" + C + ", parentPodPosition=" + D + ", cpm=" + F + ", )"); if (this.D()) { var G = {}; G[s.i] = m; G[s.Ca] = q; G[s.Ea] = A; G[s.ac] = B; G[s.nd] = C; G[s.bc] = D; G[s.na] = F; w().dispatchEvent(new r(r.Tc, G)) } }; k.prototype.close = function (m) { this.log("#close(name=" + m + ")"); if (this.D()) { var n = {}; n[s.i] = m; w().dispatchEvent(new r(r.Qc, n)) } }; k.prototype.play = function (m, n, q, A, B) { this.log("#play(name=" + m + ", offset=" + n + ", segmentNum=" + q + ", segment=" + A + ", segmentLength=" + B + ")"); if (this.D()) { q = {}, q[s.Ha] = this.m.visitorID, q[s.Aa] = this.m.analyticsVisitorID, q[s.Da] = this.m.Nf, q[s.i] = m, q[s.B] = n, w().dispatchEvent(new r(r.Vc, q)) } }; k.prototype.monitor = function (m, n) { this.log("#monitor(name=" + m + ", offset=" + n + ")"); var q = {}; q[s.i] = m; q[s.B] = n; w().dispatchEvent(new r(r.Sc, q)) }; k.prototype.stop = function (m, n) { this.log("#stop(name=" + m + ", offset=" + n + ")"); if (this.D()) { var q = {}; q[s.i] = m; q[s.B] = n; w().dispatchEvent(new r(r.Yc, q)) } }; k.prototype.click = function (m, n) { this.log("#click(name=" + m + ", offset=" + n + ")"); if (this.D()) { var q = {}; q[s.i] = m; q[s.B] = n; w().dispatchEvent(new r(r.Pc, q)) } }; k.prototype.complete = function (m, n) { this.log("#complete(name=" + m + ", offset=" + n + ")"); if (this.D()) { var q = {}; q[s.i] = m; q[s.B] = n; w().dispatchEvent(new r(r.Rc, q)) } }; k.prototype.Nd = function () { Logger.hg(this, "#destroy()"); w().dispatchEvent(new r(r.La)) }; k.prototype.$f = function (m, n, q) { this.log("#trackError(source=" + m + ", errorId=" + n + ", offset=" + q + ")"); if (this.D()) { var A = {}; A[s.vb] = m; A[s.Yb] = n; A[s.B] = q; w().dispatchEvent(new r(r.Zc, A)) } }; k.prototype.bg = function (m, n, q) { this.log("#updateQoSInfo(bitrate=" + m + ", fps=" + n + ", droppedFrames=" + q + ")"); if (this.D()) { var A = {}; A[s.kb] = m; A[s.Zb] = n; A[s.Vb] = q; w().dispatchEvent(new r(r.Wc, A)) } }; k.prototype.wf = function (m) { this.log("#bitrateChange(bitrate=" + m + ")"); if (this.D()) { var n = {}; n[s.kb] = m; w().dispatchEvent(new r(r.Nc, n)) } }; k.prototype.xf = function () { this.log("#bufferStart()"); this.D() && w().dispatchEvent(new r(r.Oc)) }; k.prototype.sf = function (m) { this.log("#adBreakStart(offset=" + m + ")"); if (this.D()) { var n = {}; n[s.ub] = m; w().dispatchEvent(new r(r.Ub, n)) } }; k.prototype.rf = function () { this.log("#adBreakEnd()"); if (this.D()) { var m = {}; m[s.ub] = j; w().dispatchEvent(new r(r.Ub, m)) } }; k.prototype.Uf = function () { this.log("#sessionComplete()"); this.D() && w().dispatchEvent(new r(r.Xc)) }; k.prototype.Ke = function (m) { this.log("#__setPsdkVersion(version=" + m + ")"); this.nc = m }; p.ne = k })(g); i.Ka || (i.Ka = {}); i.Ka.Bf || (i.Ka.Bf = f); i.Ka.Of = g })(this); this.Je(e) }(b.s); a.callMethodWhenReady = function (f, e) { c.visitor != j && (c.isReadyToTrack() ? a[f].apply(this, e) : c.callbackWhenReadyToTrack(a, a[f], e)) }; b.Heartbeat = a; b.uf = function () { var f, i; if (b.autoTrack && (f = b.s.d.getElementsByTagName("VIDEO"))) { for (i = 0; i < f.length; i++) { b.attach(f[i]) } } }; b.ra(d, "load", b.uf) };
function switchSuite() { var a = ""; if (location.hostname.indexOf("smdg") < 0) { a += "shawglobaltvprimetime" } else { a += "shawprimetimetest" } return a } var shaw_visitor = new Visitor("5F34123F5245B4A70A490D45@AdobeOrg"); shaw_visitor.trackingServer = "tr.globaltv.com"; shaw_visitor.trackingServerSecure = "Str.globaltv.com"; shaw_visitor.marketingCloudServer = "tr.globaltv.com"; shaw_visitor.marketingCloudServerSecure = "Str.globaltv.com"; s = new AppMeasurement(); s.account = switchSuite(); s.trackingServer = "tr.globaltv.com"; s.trackingServerSecure = "Str.globaltv.com"; s.trackInlineStats = true; s.visitor = shaw_visitor; s.contextData["omn.visitorapi"] = (typeof (Visitor) != "undefined" ? "VisitorAPI Present" : "VisitorAPI Missing"); s.loadModule("AudienceManagement"); s.AudienceManagement.setup({ partner: "shaw", containerNSID: 0, uuidCookie: { name: "aam_uuid", days: 30 } }); s.trackDownloadLinks = false; s.trackExternalLinks = false; s.linkDownloadFileTypes = "exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx"; s.linkInternalFilters = "javascript:,www.muzeumedia.com"; s.linkLeaveQueryString = false; s.linkTrackVars = "None"; s.linkTrackEvents = "None"; s.usePlugins = true; function s_doPlugins(a) { } s.doPlugins = s_doPlugins; s.loadModule("Media"); s.Media.autoTrack = false; s.Media.trackWhilePlaying = true; s.Media.trackVars = "None"; s.Media.trackEvents = "None"; s.Media.playerName = "ShawVideoPlayer-html5"; s.manageVars = new Function("c", "l", "f", "var s=this,vl,la,vla;l=l?l:'';f=f?f:1;if(!s[c])return false;vl='pageName,purchaseID,channel,server,pageType,campaign,state,zip,events,products,transactionID';for(var n=1;n<76;n++)vl+=',prop'+n+',eVar'+n;for(n=1;n<6;n++)vl+=',hier'+n;for(n=1;n<4;n++)vl+=',list'+n;for(n in s.contextData)vl+=',contextData.'+n;if(l&&(f==1||f==2)){if(f==1)vl=l.replace('[\\'','.').replace('\\']','');if(f==2){la=l.split(',');vla=vl.split(',');vl='';for(x in la){if(la[x].indexOf('contextData')>-1){lax=la[x].split('\\'');la[x]='contextData.'+lax[1];}for(y in vla){if(la[x]==vla[y]){vla[y]='';}}}for(y in vla){vl+=vla[y]?','+vla[y]:'';}}s.pt(vl,',',c,0);return true;}else if(l==''&&f==1){s.pt(vl,',',c,0);return true;}else return false;"); s.clearVars = new Function("t", "var s=this;if(t.indexOf('contextData')==-1)s[t]='';else if(t.indexOf('contextData')>-1){var c=t.substring(t.indexOf('.')+1);s.contextData[c]='';}"); s.lowercaseVars = new Function("t", "var s=this;if(t!='events'&&t.indexOf('contextData')==-1&&s[t]){s[t]=s[t].toString();if(s[t].indexOf('D=')!=0){s[t]=s[t].toLowerCase();}}else if(t.indexOf('contextData')>-1){var c=t.substring(t.indexOf('.')+1);if(s.contextData[c]){s.contextData[c]=s.contextData[c].toString();s.contextData[c]=s.contextData[c].toLowerCase();}}"); s.pt = new Function("x", "d", "f", "a", "var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return'';"); s.getValOnce = new Function("v", "c", "e", "var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return v==k?'':v"); function OmnitureHelper() { } OmnitureHelper.date = new Date(); OmnitureHelper.location = window.location; OmnitureHelper.GetPageURL = function () { var a = OmnitureHelper.location.pathname.toLowerCase(); if (a == "/") { a = "homepage" } return a }; OmnitureHelper.GetServerName = function () { return OmnitureHelper.location.hostname.toLowerCase() }; OmnitureHelper.sendEvent = function (d, a, b, e) { s.linkTrackEvents = ""; s.linkTrackVars = ""; if (b.length > 0) { s.linkTrackVars += ",events"; s.linkTrackEvents = b.join(","); s.events = s.linkTrackEvents } if (a != null) { for (var c in a) { s.linkTrackVars += "," + c; s[c] = a[c] } } if (s.linkTrackVars) { s.linkTrackVars = s.linkTrackVars.substr(1) } s.tl(this, "o", d, null, function () { if (e) { OmnitureHelper.location.href = e } }) }; OmnitureHelper.SendDataContextEvent = function (a) { var c = " "; if (!a) { a = { linkContextData: {}, delimiter: ":", isTrackingLink: true, redirectNewWindow: false, redirectURL: "", clickedEl: null } } if (a.isTrackingLink) { var b = a.linkContextData; a.linkContextData = { widgetName: (b.widgetName ? b.widgetName : c), category: (b.category ? b.category : c), position: (b.position ? b.position : c), showName: (b.showName ? b.showName : c), linkText: (b.linkText ? b.linkText : c), currentPage: (b.currentPage ? b.currentPage : c) } } if (!a.redirectNewWindow) { a.redirectNewWindow = false } s.contextData = (s.contextData && s.contextData ? s.contextData : []); var f = { sLinkTrackVarsMsg: (a.isTrackingLink ? "contextData.shaw.LinkTracking" : "contextData.shaw.UserAction"), sContextDataMsg: (a.isTrackingLink ? "shaw.LinkTracking" : "shaw.UserAction"), sTlMsg: (a.isTrackingLink ? "Link Tracking" : "User Action") }, d = [], e = a.clickedEl ? a.clickedEl : true; for (var g in a.linkContextData) { d.push(a.linkContextData[g]) } s.linkTrackVars = f.sLinkTrackVarsMsg; s.contextData[f.sContextDataMsg] = d.join(a.delimiter); s.tl((a.redirectNewWindow ? true : e), "o", f.sTlMsg, null, "navigate"); s.manageVars("clearVars"); if (a.redirectNewWindow) { return false } }; OmnitureHelper.GetInternalSearchTerms = function () { var b = OmnitureHelper.GetURLParameter("nav"); if (b) { var a = b.match(/^Ntk:AllSearch|(.*)|1|/g); if (a[1]) { return a[1].substr(1, a[1].indexOf("|1|") - 1) } } return OmnitureHelper.GetURLParameter("q").toLowerCase() }; OmnitureHelper.GetURLParameter = function (a) { var b = OmnitureHelper.LoadQueryString(); if (b[a]) { return b[a] } else { return "" } }; OmnitureHelper.LoadQueryString = function () { var d = {}; var f = OmnitureHelper.location.search.substr(1); var c = f.split("&"); var e; for (i = 0; i < c.length; i++) { e = c[i].split("="); var b = e[0]; var a = decodeURI(e[1]); d[b] = a } return d }; OmnitureHelper.GetSiteSection = function () { return OmnitureHelper.location.pathname.split("/")["1"] }; OmnitureHelper.GetReferringDomain = function () { return document.referrer }; OmnitureHelper.GetHourOfDay = function () { return OmnitureHelper.date.getHours() }; OmnitureHelper.GetDayOfWeek = function () { var a = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"); return a[OmnitureHelper.date.getDay()] }; OmnitureHelper.IsWeekend = function () { var a = OmnitureHelper.GetDayOfWeek(); if (a == "Sunday" || a == "Saturday") { return true } else { return false } }; OmnitureHelper.SetContentType = function (a) { s.contextData["shaw.contentType"] = a }; OmnitureHelper.SetContentSubType = function (a) { s.contextData["shaw.contentSubType"] = a }; OmnitureHelper.GetFlashVersion = function () { if (typeof swfobject != "undefined") { return JSON.stringify(swfobject.getFlashPlayerVersion()) } else { return "swfobject not defined" } }; OmnitureHelper.SetParameters = function (b) { for (var a in b) { s[a] = b[a] } s.t() }; OmnitureHelper.SetParametersWithoutNewPageView = function (b) { for (var a in b) { s[a] = b[a] } s.tl() }; OmnitureHelper.SetAuthenticationCookies = function (a) { if (!AamGpt.getCookie("auth")) { var b = 30; GlobalTV.Utils.setCookie("auth", a.BDUId + ";" + a.AltID, b); OmnitureHelper.sendEvent("Successful Login Attempt", { eVar8: "Successful Login Attempt" }, ["event8"]) } }; OmnitureHelper.ClearAuthenticationCookies = function () { GlobalTV.Utils.deleteCookie("auth") }; OmnitureHelper.SetAuthenticationParameters = function () { if (!AamGpt.getCookie("auth")) { s.contextData["shaw.authentication"] = "Non-authenticated User" } else { var a = AamGpt.getCookie("auth").split(";"); var b = AamGpt.getCookie("authTID"); s.contextData["shaw.authentication"] = "Authenticated User"; if (a[0]) { s.contextData["shaw.TVprovider"] = a[0] } if (a[1]) { s.contextData["shaw.alternateID"] = a[1] } if (b) { s.contextData["shaw.adobePassID"] = b } } }; OmnitureHelper.SetPageViewParameters = function () { var a = ""; if (OmnitureHelper.GetURLParameter("pn")) { a = " | Page " + OmnitureHelper.GetURLParameter("pn") } s.pageName = OmnitureHelper.GetPageURL() + a; s.server = OmnitureHelper.GetServerName(); s.channel = OmnitureHelper.GetSiteSection(); s.contextData["shaw.contentTitle"] = document.title; s.contextData["shaw.hourofDay"] = OmnitureHelper.GetHourOfDay(); s.contextData["shaw.dayofWeek"] = OmnitureHelper.GetDayOfWeek(); s.contextData["shaw.weekday"] = OmnitureHelper.IsWeekend() ? "Weekend" : "Weekday"; s.campaign = OmnitureHelper.GetURLParameter("cid"); if (s.campaign == "") { s.campaign = OmnitureHelper.GetURLParameter("utm_campaign") } if (s.campaign != "") { s.campaign = OmnitureHelper.GetURLParameter("cid") } s.campaign = s.getValOnce(s.campaign, "s_campaign", 0); if (!s.campaign) { s.eVar18 = OmnitureHelper.GetURLParameter("utm_medium"); s.eVar19 = OmnitureHelper.GetURLParameter("utm_source"); s.eVar20 = OmnitureHelper.GetURLParameter("utm_campaign"); s.eVar21 = OmnitureHelper.GetURLParameter("utm_term"); s.eVar22 = OmnitureHelper.GetURLParameter("utm_content"); s.prop11 = OmnitureHelper.GetInternalSearchTerms(); s.prop47 = OmnitureHelper.GetReferringDomain(); s.prop39 = OmnitureHelper.GetFlashVersion(); s.tempmedium = s.eVar18; if (s.eVar19 == "ie9" && utm_medium_override != false) { s.tempmedium = utm_medium_override } if (s.eVar19 || s.eVar20 || s.eVar21 || s.eVar22) { s.campaign = s.tempmedium + "|" + s.eVar19 + "|" + s.eVar20 + "|" + s.eVar21 + "|" + s.eVar22 } } }; OmnitureHelper.SendPageViewParameters = function () { OmnitureHelper.SetAuthenticationParameters(); OmnitureHelper.SetPageViewParameters(); var a = s.t(); if (a) { document.write(a) } };
(function (b) { var e = b.matchMedia; function a(j, l) { var m = 0, n = j.length, k; for (m; m < n; m++) { k = l(j[m], m); if (k === false) { break } } } function c(i) { return Object.prototype.toString.apply(i) === "[object Array]" } function d(i) { return typeof i === "function" } function h(i) { this.options = i; !i.deferSetup && this.setup() } h.prototype = { setup: function () { if (this.options.setup) { this.options.setup() } this.initialised = true }, on: function () { !this.initialised && this.setup(); this.options.match && this.options.match() }, off: function () { this.options.unmatch && this.options.unmatch() }, destroy: function () { this.options.destroy ? this.options.destroy() : this.off() }, equals: function (i) { return this.options === i || this.options.match === i } }; function f(j, i) { this.query = j; this.isUnconditional = i; this.handlers = []; this.mql = e(j); var k = this; this.listener = function (l) { k.mql = l; k.assess() }; this.mql.addListener(this.listener) } f.prototype = { addHandler: function (i) { var j = new h(i); this.handlers.push(j); this.matches() && j.on() }, removeHandler: function (i) { var j = this.handlers; a(j, function (k, l) { if (k.equals(i)) { k.destroy(); return !j.splice(l, 1) } }) }, matches: function () { return this.mql.matches || this.isUnconditional }, clear: function () { a(this.handlers, function (i) { i.destroy() }); this.mql.removeListener(this.listener); this.handlers.length = 0 }, assess: function () { var i = this.matches() ? "on" : "off"; a(this.handlers, function (j) { j[i]() }) } }; function g() { if (!e) { throw new Error("matchMedia not present, legacy browsers require a polyfill") } this.queries = {}; this.browserIsIncapable = !e("only all").matches } g.prototype = { register: function (k, j, m) { var l = this.queries, i = m && this.browserIsIncapable; if (!l[k]) { l[k] = new f(k, i) } if (d(j)) { j = { match: j } } if (!c(j)) { j = [j] } a(j, function (n) { l[k].addHandler(n) }); return this }, unregister: function (j, i) { var k = this.queries[j]; if (k) { if (i) { k.removeHandler(i) } else { k.clear(); delete this.queries[j] } } return this } }; b.enquire = b.enquire || new g() }(this));
$(function () { if ("ontouchstart" in document.documentElement) { $(".footer-socmedia a.icon-google-plus").attr("href", "https://plus.google.com/app/basic/+globaltv/posts") } if (navigator.userAgent.match(/Windows NT 6.2; ARM(.+)Touch/)) { var a = document.createElement("style"); a.appendChild(document.createTextNode("@-ms-viewport{width:device-width}")); document.getElementsByTagName("head")[0].appendChild(a) } }); var GlobalTv = (function (c, a) { var b = c || {}; b.GLOBAL_bp_small = 0; b.GLOBAL_bp_medium = 46.9375; b.GLOBAL_bp_large = 60; b.GLOBAL_bp_extra_large = 79.9375; b.GLOBAL_bp_mobilePx = 16 * b.GLOBAL_bp_small; b.GLOBAL_bp_tabletPx = 16 * b.GLOBAL_bp_medium; b.GLOBAL_bp_desktopPx = 16 * b.GLOBAL_bp_large; b.GLOBAL_bp_maximumPx = 16 * b.GLOBAL_bp_maximum; b.GLOBAL_bp_ipadFriendlyPx = 16 * b.GLOBAL_bp_medium - 1; b.GLOBAL_bp_smallToMedium = "screen and (min-width: 0) and (max-width: " + b.GLOBAL_bp_medium + "em)"; b.GLOBAL_bp_mediumToExtraLarge = "screen and (min-width: " + b.GLOBAL_bp_medium + "em) and (max-width: " + b.GLOBAL_bp_extra_large + "em)"; b.GLOBAL_bp_extraLargePlus = "screen and (min-width: " + b.GLOBAL_bp_extra_large + "em)"; b.GLOBAL_bp_videoMobile = "screen and (min-width: 0) and (max-width: " + b.GLOBAL_bp_video_mobile_max + "em)"; b.GLOBAL_bp_videoTablet = "screen and (min-width: " + b.GLOBAL_bp_video_tablet_min + "em) and (max-width: " + b.GLOBAL_bp_large + "em)"; b.GLOBAL_bp_videoDesktop = "screen and (min-width: " + b.GLOBAL_bp_video_desktop_min + "em)"; b.GLOBAL_bp_desktop = "screen and (min-width: " + b.GLOBAL_bp_medium + "em)"; return b }(GlobalTv || {}, jQuery));
var ShowMenu = function (a) { _Init = function (b) { this.settings = b; this.menuToggle = $(".navbar-toggle"); this.menuList = $(".navbar-collapse"); this.InitEvents() }; InitEvents = function () { var b = this; function c() { if (b.menuToggle.hasClass("collapsed")) { b.menuToggle.removeClass("collapsed"); b.menuList.slideDown("fast").addClass("open") } else { b.menuToggle.addClass("collapsed"); b.menuList.slideUp("fast").removeClass("open") } } this.menuToggle.bind("click.toggleMenuList", c) }; _Init(a) }; var HeaderFeaturesBar = function (a) { _Init = function (b) { this.$viewport = $(".headerFeatures"); this.$lastChild = this.$viewport.lastChild; this.InitEvents(b) }; InitEvents = function (b) { $(".headerFeatures-itemLink").on("click", $.proxy(function (f) { var d = $(f.target), j = d.parent(), h = d.attr("target"), i = d.text().replace("&", "and"), g = $(".headerFeatures-itemLink").index(f.target); var c = { linkContextData: { widgetName: "Header Features Bar", position: "Position_" + (parseInt(g) + 1), linkText: i, currentPage: window.location.pathname, }, delimiter: ":", isTrackingLink: true, redirectNewWindow: h === "_blank" ? true : false, redirectURL: f.target.href, clickedEl: f.target }; OmnitureHelper.SendDataContextEvent(c) }, this)) }; _Init(a) }; var SearchBar = function (a, b) { _Init = function (d) { this.settings = d; this.$searchForm = $("#js-searchForm"); this.$searchInputObj = $("#js-searchField"); this.$searchButtonObj = $("#js-searchButton"); this.InitEvents(); this.$searchInputObj.focus(function () { c() }); this.$searchInputObj.keypress(function () { c() }); function c() { this.$searchForm.removeClass("navbar-searchField--error") } }; InitEvents = function () { var d = this; function c() { var f = d.$searchInputObj.val(); if (d.$searchInputObj.width() === 0) { d.$searchInputObj.trigger("focus") } if ($(".searchResults-query").length) { if ($(".searchResults-query").html() != f && f) { document.location.href = b + "search/?q=" + GlobalTV.Utils.removeSpecialCharactersFromString(f) } else { return } } else { if (f) { if (/^[a-zA-Z0-9-\'\&' ]*$/.test(f) === false || /^\s*$/.test(f) || GlobalTV.Utils.removeSpecialCharactersFromString(f).length === 0) { e(); return } else { document.location.href = b + "search/?q=" + GlobalTV.Utils.removeSpecialCharactersFromString(f); OmnitureHelper.sendEvent(f, { eVar1: f, prop11: f }, ["event1"]) } } else { e() } } function e() { $(d.$searchForm).addClass("navbar-searchField--error") } } d.$searchForm.on("submit.SearchAction", function (f) { f.preventDefault(); c() }); d.$searchInputObj.keypress(function (f) { if (f.which == 13) { c() } }) }; _Init(a) }; $(function () { ShowMenu({}) });
(function (a) { var i = {}, l, k, c = document, m = window, e = c.documentElement, f = a.expando, j; a.event.special.inview = { add: function (d) { i[d.guid + "-" + this[f]] = { data: d, $element: a(this) }; if (!j && !a.isEmptyObject(i)) { j = setInterval(b, 250) } }, remove: function (d) { try { delete i[d.guid + "-" + this[f]] } catch (n) { } if (a.isEmptyObject(i)) { clearInterval(j); j = null } } }; function h() { var n, d, o = { height: m.innerHeight, width: m.innerWidth }; if (!o.height) { n = c.compatMode; if (n || !a.support.boxModel) { d = n === "CSS1Compat" ? e : c.body; o = { height: d.clientHeight, width: d.clientWidth } } } return o } function g() { return { top: m.pageYOffset || e.scrollTop || c.body.scrollTop, left: m.pageXOffset || e.scrollLeft || c.body.scrollLeft } } function b() { var n = [], q, r = 0; a.each(i, function (x, y) { var z = y.data.selector, w = y.$element; n.push(z ? w.find(z) : w) }); q = n.length; if (q) { l = l || h(); k = k || g(); for (; r < q; r++) { if (!a.contains(e, n[r][0])) { continue } var d = a(n[r]), p = { height: d.height(), width: d.width() }, o = d.offset(), s = d.data("inview"), u, v, t; if (!k || !l) { return } if (o.top + p.height > k.top && o.top < k.top + l.height && o.left + p.width > k.left && o.left < k.left + l.width) { u = (k.left > o.left ? "right" : (k.left + l.width) < (o.left + p.width) ? "left" : "both"); v = (k.top > o.top ? "bottom" : (k.top + l.height) < (o.top + p.height) ? "top" : "both"); t = u + "-" + v; if (!s || s !== t) { d.data("inview", t).trigger("inview", [true, u, v]) } } else { if (s) { d.data("inview", false).trigger("inview", [false]) } } } } } a(m).bind("scroll resize scrollstop", function () { l = k = null }); if (!e.addEventListener && e.attachEvent) { e.attachEvent("onfocusin", function () { k = null }) } })(jQuery);
$(function () { var c = navigator.userAgent.toLowerCase(); var b = c.indexOf("android") > -1; var a = GlobalTV.Utils.getCookie("hideAndroidSmartBanner"); if (b && !a) { $("#androidSmartBanner").toggleClass("hidden") } $("#androidSmartBanner .closeBanner").click(function () { GlobalTV.Utils.setCookie("hideAndroidSmartBanner", 1, 365); $("#androidSmartBanner").toggleClass("hidden") }) });
var GlobalTv = (function (c, a) { var b = c || {}; a(function () { var d = { extraLargeAdRendered: false, mediumAndLargeAdRendered: false, smallAdRendered: false, allAdRendered: false, writeAd: function (e) { a(e).each(function (f, g) { a(g).bind("inview", function (j, o, n) { var i = this; if (o === true) { a(g).unbind("inview"); var k = a(this); var h = 'googletag.cmd.push(function() { googletag.display("' + a(k).attr("id") + '"); });'; var m = a(k).get(0); var l = "<script>"; l += h; l += "</"; l += "script>"; a(m).append(l) } }) }) } }; if (!d.allAdRendered) { d.writeAd(".gpt-all"); d.allAdRendered = true } enquire.register(GlobalTv.GLOBAL_bp_extraLargePlus, function () { if (!d.extraLargeAdRendered) { d.writeAd(".gpt-extraLarge"); d.extraLargeAdRendered = true } }, true).register(GlobalTv.GLOBAL_bp_mediumToExtraLarge, function () { if (!d.mediumAndLargeAdRendered) { d.writeAd(".gpt-medium"); d.mediumAndLargeAdRendered = true } }).register(GlobalTv.GLOBAL_bp_smallToMedium, function () { if (!d.smallAdRendered) { d.writeAd(".gpt-small"); d.smallAdRendered = true } }) }); return b }(GlobalTv || {}, jQuery)); function cwChangeWallpaperAd(b, a) { if (typeof (b) != "string") { return false } else { jQuery("body").css("background", a + " url(" + b + ") no-repeat scroll 50% 0px") } } function refreshGPTAds() { googletag.pubads().refresh() };
$(function () { var c = "globaltvglobalgocatfish"; var b = GlobalTV.Utils.getCookie(c); var e = "catfish--on"; var d = "disableCatfish"; if (b !== d) { var a = $(".js-catfish"); a.addClass(e); $("#catfish-close").click(function (f) { a.removeClass(e); GlobalTV.Utils.setCookie(c, d, 1) }); $("#catfish-cta").click(function (h) { var g = $(this), f = { linkContextData: { widgetName: "TV Everywhere Catfish", linkText: $(this).text(), currentPage: window.location.pathname }, delimiter: ":", isTrackingLink: true, redirectURL: this.href, redirectNewWindow: (g.attr("target") === "_blank"), clickedEl: this }; OmnitureHelper.SendDataContextEvent(f); a.removeClass(e); GlobalTV.Utils.setCookie(c, d, 1) }) } });
var pinnedSiteDetection = new (function () { var a = "pinSiteLastAccessGLOBALTV"; this.supportLevel = { none: 0, upgradeable: 1, limited: 2, full: 3 }; this.getOSPinSupportLevel = function () { try { var c = navigator.userAgent; if (c.indexOf("Windows NT 6.1") !== -1) { return this.supportLevel.full } else { if (c.indexOf("Windows NT 6.0") !== -1) { return this.supportLevel.limited } else { if (c.indexOf("Windows NT") !== -1) { return this.supportLevel.upgradeable } else { return this.supportLevel.none } } } } catch (b) { return this.supportLevel.none } }; this.abilityLevel = { none: 0, limited: 1, full: 2 }; this.getBrowserPinAbilityLevel = function () { try { var b = navigator.appVersion; if (this.browserCanPin) { if (b.indexOf("Windows NT 6.0") !== -1) { return this.abilityLevel.limited } else { return this.abilityLevel.full } } else { return this.abilityLevel.none } } catch (c) { return this.abilityLevel.none } }; this.getDaysSincePinAccess = function () { if (this.browserCanPin) { if ("localStorage" in window && window.localStorage !== null) { var b = -1; try { var e = window.localStorage; if (e[a] != undefined) { var d = new Date(e[a]); var b = Math.round(((new Date()).getTime() - d.getTime()) / 86400000); if (isNaN(b)) { b = -1 } } } catch (c) { b = -1 } return b } } else { return -1 } }; this.setSiteHasBeenPinnedFlag = function () { try { if ("localStorage" in window && window.localStorage !== null && this.browserCanPin) { window.localStorage[a] = new Date(); return true } else { return false } } catch (b) { return false } }; this.removeSiteHasBeenPinnedFlag = function () { try { if ("localStorage" in window && window.localStorage !== null && this.browserCanPin) { window.localStorage.removeItem(a); return true } else { return true } } catch (b) { return false } }; this.browserCanPin = ("external" in window && "msIsSiteMode" in window.external); this.viewingFromPin = ("external" in window && "msIsSiteMode" in window.external && window.external.msIsSiteMode()); this.siteHasBeenPinned = (this.getDaysSincePinAccess() > -1); this.hasFullPinAbilityBrowser = (this.getBrowserPinAbilityLevel() === this.abilityLevel.full); this.hasLimitedPinAbilityBrowser = (this.getBrowserPinAbilityLevel() === this.abilityLevel.limited); this.hasNoPinAbilityBrowser = (this.getBrowserPinAbilityLevel() === this.abilityLevel.none); this.hasFullPinSupportOS = (this.getOSPinSupportLevel() === this.supportLevel.full); this.hasLimitedPinSupportOS = (this.getOSPinSupportLevel() === this.supportLevel.limited); this.hasUpgradeablePinSupportOS = (this.getOSPinSupportLevel() === this.supportLevel.upgradeable); this.hasNoPinSupportOS = (this.getOSPinSupportLevel() == this.supportLevel.none) });
var utm_medium_override = false; if (pinnedSiteDetection.viewingFromPin == true) { if (pinnedSiteDetection.siteHasBeenPinned == false) { pinnedSiteDetection.setSiteHasBeenPinnedFlag() } else { utm_medium_override = "click" } } else { if (pinnedSiteDetection.siteHasBeenPinned == true) { pinnedSiteDetection.removeSiteHasBeenPinnedFlag() } };
jQuery.cookie = function (c, g, d) { if (arguments.length > 1 && String(g) !== "[object Object]") { d = jQuery.extend({}, d); if (g === null || g === undefined) { d.expires = -1 } if (typeof d.expires === "number") { var a = d.expires, f = d.expires = new Date(); f.setDate(f.getDate() + a) } g = String(g); return (document.cookie = [encodeURIComponent(c), "=", d.raw ? g : encodeURIComponent(g), d.expires ? "; expires=" + d.expires.toUTCString() : "", d.path ? "; path=" + d.path : "", d.domain ? "; domain=" + d.domain : "", d.secure ? "; secure" : ""].join("")) } d = g || {}; var e, b = d.raw ? function (h) { return h } : decodeURIComponent; return (e = new RegExp("(?:^|; )" + encodeURIComponent(c) + "=([^;]*)").exec(document.cookie)) ? b(e[1]) : null };
/*
* jQuery pinable Plugin v1.2
* http://buildmypinnedsite.com
*
* Copyright 2011, Microsoft
* Licensed under MS-PL.
*
* Date: Thursday June 16 2011 14:54:29 -04
* Legal Notice: Any code provided on this site is "sample code" subject to the MSDN Terms of Use (http://msdn.microsoft.com/en-us/cc300389.aspx). Using this code means you agree to it.
*/
(function ($) { var settings = { closeTitle: "Close", cookieLength: 30, cookieName: "iePinning_" + document.domain, debug: false, discStyle: "toast", dragAlt: "Drag me!", logoPath: "/discoverability/images/logo.png", message: "Drag this to your Windows taskbar to enable special IE9 Features.", slideDuration: "fast", useCookie: true }, discStyles = { toast: '<div class="toast" id="pinning-discoverability"><div class="pinning-content"><img src="{{logoPath}}" alt="{{dragAlt}}" class="msPinSite" /><div class="pinning-main-text">{{message}}</div><a href="#close" class="pinning-hide" title="{{closeTitle}}">close</a></div></div></div>', pushUp: '<div class="push-up" id="pinning-discoverability"><div class="pinning-content"><div class="pinning-bg"><img src="{{logoPath}}" class="msPinSite" alt="{{dragAlt}}" /></div><div class="pinning-desc">{{message}}</div></div><a href="#close" class="pinning-hide" title="{{closeTitle}}">close</a></div>', topHat: '<div class="top-hat" id="pinning-discoverability"><div class="pinning-alignment"><div class="pinning-content"><img src="{{logoPath}}" class="msPinSite" alt="{{dragAlt}}" /><span class="pinning-desc">{{message}}</span><a href="#close" class="pinning-hide" title="{{closeTitle}}">close</a></div></div></div>' }; function hideBanner(event) { event.preventDefault(); settings.banner.slideToggle(settings.slideDuration); if (settings.useCookie) { $.cookie(settings.cookieName, settings.cookieValue, { expires: settings.cookieLength }) } } function shouldDisplay() { if (settings.debug) { return true } try { if (pinnedSiteDetection.hasFullPinAbilityBrowser) { if (!window.external.msIsSiteMode()) { if (settings.useCookie) { if ($.cookie(settings.cookieName) !== settings.cookieValue) { return true } else { return false } } else { return true } } else { return false } } else { return false } } catch (ex) { return false } } function showBanner() { if (shouldDisplay()) { if (discStyles.hasOwnProperty(settings.discStyle)) { var html = eval("discStyles." + settings.discStyle), html = html.replace("{{message}}", settings.message), html = html.replace("{{dragAlt}}", settings.dragAlt), html = html.replace("{{closeTitle}}", settings.closeTitle), html = html.replace("{{logoPath}}", settings.logoPath); settings.banner = $(html); settings.element.append(settings.banner); settings.banner.slideToggle(settings.slideDuration).find(".pinning-hide").bind("click", hideBanner) } else { $.error("Cannot find discoverability style.") } } } var methods = { init: function (callerSettings) { settings = $.extend(settings, callerSettings); settings.element = this; settings.cookieValue = "hidden"; settings.banner = undefined; showBanner() }, destroy: function () { settings.element.find(".pinning-hide").unbind("click"); settings.element = undefined; settings.banner.remove(); settings.banner = undefined } }; $.fn.pinable = function (method) { if (methods[method]) { return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)) } else { if (typeof method === "object" || !method) { return methods.init.apply(this, arguments) } else { $.error("Method " + method + " does not exist on jQuery.tooltip") } } } })(jQuery);
$(document).ready(function () { $("body").pinable({ closeTitle: "Close", containerElement: "body", cookieName: "iePinning_globaltv.com", cookieLength: 30, debug: false, discStyle: "toast", dragAlt: "Drag me!", elementId: "pinning-discoverability", logoPath: "/Content/images/discoverability/globaltv.png", message: 'Drag this to your Windows taskbar to enable special IE features. <a href="http://www.microsoft.com/canada/windows/internet-explorer/partner/globaltv/pin-site.aspx" target="_blank" class="pinning-learn">Learn More</a>', slideDuration: "fast", useCookie: true }) });
